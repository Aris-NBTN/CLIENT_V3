import{a as re,q as ae,v as ie,r as c,s as m,cg as ce,ch as oe,j as e,w as le}from"./index-Bl_pZCeN.js";import{H as de,G as ue,I as he,M as me,J as fe,K as xe,L as pe,A as J}from"./index-FpgqAsqH.js";const ve=({title:Q,description:V,keywords:W,author:X,ldJson:f={},children:Y})=>{var M,L,S,_,A,D,C,H,N,F,T,q,z,I,P,R,B,O;const x=re(),p=ae(),{token:{colorPrimary:b}}=ie.useToken(),[Z,g]=c.useState(!1),y=c.useRef(null),n=m(t=>t.menu),E=m(t=>t.menu.status),{user:a}=m(t=>t.auth),{info:s,loading:ee}=m(t=>t.info),te=t=>{try{if(!t)return[];const i=new DOMParser().parseFromString(t,"text/html"),o=[];return i.querySelectorAll(".nav__menu > ul > li").forEach(d=>{var G;if(!d)return;const j=d.querySelector(".nav__link > a");if(!j)return;const U={key:j.getAttribute("href")||"#",label:((G=j.textContent)==null?void 0:G.trim())||""},se=d.querySelectorAll(".dropdown__menu.dropdown-aris > li"),h=[];se.forEach(v=>{var K;if(!v)return;const k=v.querySelector(".dropdown__link > h4 > a");if(!k)return;const u={key:k.getAttribute("href")||"#",label:((K=k.textContent)==null?void 0:K.trim())||"",children:[]};v.querySelectorAll(".dropdown__submenu.dropdown-aris > li > a").forEach(w=>{var $;w&&u.children.push({key:w.getAttribute("href")||"#",label:(($=w.textContent)==null?void 0:$.trim())||""})}),u.children.length>0?h.push(u):h.push({label:u.label,key:u.key})}),h.length>0&&(U.children=h),o.push(U)}),o}catch(r){return console.error("Error parsing menu:",r),[]}};function ne(t){return t.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()}return c.useEffect(()=>{const t=i=>{const o=i.target.closest("a");if(o&&o.href){const l=new URL(o.href),d=l.pathname+l.search+l.hash;l.origin===window.location.origin&&(i.preventDefault(),x(d))}},r=document.getElementById("root");return r&&r.addEventListener("click",t),()=>{r&&r.removeEventListener("click",t)}},[x]),c.useEffect(()=>{E==="idle"&&p(ce())},[p,E]),c.useEffect(()=>{var t;if((t=n==null?void 0:n.menuItems)!=null&&t.header){const r=document.getElementById("menu-mobile"),i=()=>g(!0);return r&&r.addEventListener("click",i),()=>{r&&r.removeEventListener("click",i)}}},[n]),c.useEffect(()=>{const t=document.getElementById("icon-user");if(a!=null&&a.userType&&t){t.innerHTML="",y.current||(y.current=oe(t));const r=y.current,i=()=>a!=null&&a.avatar?e.jsx(J,{src:a==null?void 0:a.avatar,size:40}):e.jsxs(J,{style:{backgroundColor:b},size:40,children:[" ",ne(a==null?void 0:a.name)," "]});r.render(e.jsxs(e.Fragment,{children:["  ",i()," "]}))}},[a,n,b]),c.useEffect(()=>{ee&&p(le())},[]),e.jsxs(de,{children:[e.jsxs(ue,{children:[e.jsx("meta",{name:"description",content:V||((M=s[0])==null?void 0:M.description)}),e.jsx("meta",{name:"keywords",content:W||((L=s[0])==null?void 0:L.keywords)}),e.jsx("meta",{name:"author",content:X||((S=s[0])==null?void 0:S.manage)}),e.jsx("title",{children:Q||((_=s[0])==null?void 0:_.name)}),typeof f=="object"&&Object.keys(f).length>0&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(f)})]}),((A=n==null?void 0:n.menuItems)==null?void 0:A.css)&&e.jsx(e.Fragment,{children:e.jsx("style",{dangerouslySetInnerHTML:{__html:(D=n==null?void 0:n.menuItems)==null?void 0:D.css}})}),((C=n==null?void 0:n.menuItems)==null?void 0:C.header)&&e.jsx(e.Fragment,{children:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:500},children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(H=n==null?void 0:n.menuItems)==null?void 0:H.header}})})}),e.jsxs("div",{className:"flex flex-col justify-between items-stretch",style:{minHeight:"100dvh"},children:[Y,e.jsx("div",{dangerouslySetInnerHTML:{__html:(N=n==null?void 0:n.menuItems)==null?void 0:N.footer}})]}),e.jsx(he,{title:(T=(F=s==null?void 0:s.newData)==null?void 0:F[0])==null?void 0:T.name,placement:"left",onClose:()=>g(!1),open:Z,width:256,children:e.jsxs("div",{className:"flex flex-col justify-between",style:{height:"100%"},children:[e.jsx(me,{mode:"inline",onClick:t=>{g(!1),setTimeout(()=>{x(t.key)},500)},style:{width:256},items:te((q=n==null?void 0:n.menuItems)==null?void 0:q.header)}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(fe,{size:22}),(I=(z=s==null?void 0:s.newData)==null?void 0:z[0])==null?void 0:I.email]}),e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(xe,{size:22}),(R=(P=s==null?void 0:s.newData)==null?void 0:P[0])==null?void 0:R.phone]}),e.jsxs("div",{className:"flex items-center gap-2 my-2",children:[e.jsx(pe,{size:22}),(O=(B=s==null?void 0:s.newData)==null?void 0:B[0])==null?void 0:O.address]})]})]})})]})};export{ve as L};
