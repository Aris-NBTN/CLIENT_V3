import{r as be,j as _,e as sa,c as la,d as ua,U as ca}from"./index-XO_e58Ix.js";import{P as j,D as mr,r as Ke,a as Qt,d as Ee,S as yr,i as ha,b as fa,c as xr,l as wt,q as va,e as ga,f as da,n as Xe,B as Bt,g as ue,k as pa,h as X,p as q,j as $e,m as w,o as ma,s as ya,t as qe,u as ce,v as Qe,w as xa,T as ba,x as Ge,y as yt,z as zt,_ as k,G as et,A as ee,C as le,E as ie,F as te,H as Ta,I as _a,J as G,R as Te,K as Sa,L as un,M as wa,N as _e,O as Ca,Q as ft,U as tt,V as rt,W as Re,X as Aa,Y as Da,Z as Ne,$ as ke,a0 as La,a1 as cn,a2 as Oe,a3 as Ma,a4 as br,a5 as Tr,a6 as Z,a7 as hn,a8 as ve,a9 as Ra,aa as fn,ab as Ia,ac as Q,ad as Et,ae as _r,af as K,ag as vt,ah as J,ai as vn,aj as Oa,ak as Pa,al as de,am as gn,an as ka,ao as gt,ap as dn,aq as Na,ar as Ba,as as za,at as Ea,au as Sr,av as Ga,aw as wr,ax as Va,ay as Cr,az as Ar,aA as ja,aB as Wa,aC as Fa,aD as Ha,aE as Ya,aF as Ct,aG as Gt,aH as Dr,aI as Za,aJ as Jt,aK as Ua,aL as Xa,aM as pn,aN as Lr,aO as $a,aP as qa,aQ as Ka,aR as Qa,aS as Ja,aT as ei,aU as ti,aV as ri,aW as ni,aX as ai,aY as ii,aZ as mn,a_ as oi,a$ as si,b0 as li,b1 as ui,b2 as ci,b3 as hi,b4 as fi,b5 as er,b6 as tr,b7 as vi}from"./Layout-DXWOGTyT.js";import{R as gi,C as me,T as P,A as it,e as di,f as ot,g as pi,h as mi,i as yi}from"./index-DkPaNEOj.js";import{p as xi,s as bi,a as yn,h as Ti,D as xn,u as _i,e as Si,r as wi,f as Ci,g as Ai,b as Di,c as Li,i as Mi,d as st,j as Ri,S as Ii,k as Oi,l as Pi}from"./install-CX9co27m.js";import{F as At}from"./Format-CtU67VYD.js";import{C as ye}from"./index-aBx8ZZms.js";import"./index-C0VCRbK7.js";import"./index-77pOG4pZ.js";import"./index-DSoyN8jH.js";import"./index-DxdoIs5n.js";import"./useVariants-CsMAhLjD.js";import"./index-lzr6e5Gt.js";import"./Overflow-NiKfVzai.js";import"./index-zMQpAQ_1.js";import"./CheckOutlined-5NHR29ls.js";import"./SearchOutlined-DiIMcydI.js";import"./EllipsisOutlined-Djq8wM5c.js";import"./index-DKKcX3hg.js";import"./index-29i8oyFT.js";var He=Math.PI*2,xe=da.CMD,ki=["top","right","bottom","left"];function Ni(n,t,e,r,a){var i=e.width,o=e.height;switch(n){case"top":r.set(e.x+i/2,e.y-t),a.set(0,-1);break;case"bottom":r.set(e.x+i/2,e.y+o+t),a.set(0,1);break;case"left":r.set(e.x-t,e.y+o/2),a.set(-1,0);break;case"right":r.set(e.x+i+t,e.y+o/2),a.set(1,0);break}}function Bi(n,t,e,r,a,i,o,s,l){o-=n,s-=t;var c=Math.sqrt(o*o+s*s);o/=c,s/=c;var u=o*e+n,v=s*e+t;if(Math.abs(r-a)%He<1e-4)return l[0]=u,l[1]=v,c-e;if(i){var f=r;r=Xe(a),a=Xe(f)}else r=Xe(r),a=Xe(a);r>a&&(a+=He);var h=Math.atan2(s,o);if(h<0&&(h+=He),h>=r&&h<=a||h+He>=r&&h+He<=a)return l[0]=u,l[1]=v,c-e;var g=e*Math.cos(r)+n,d=e*Math.sin(r)+t,p=e*Math.cos(a)+n,m=e*Math.sin(a)+t,x=(g-o)*(g-o)+(d-s)*(d-s),y=(p-o)*(p-o)+(m-s)*(m-s);return x<y?(l[0]=g,l[1]=d,Math.sqrt(x)):(l[0]=p,l[1]=m,Math.sqrt(y))}function dt(n,t,e,r,a,i,o,s){var l=a-n,c=i-t,u=e-n,v=r-t,f=Math.sqrt(u*u+v*v);u/=f,v/=f;var h=l*u+c*v,g=h/f;s&&(g=Math.min(Math.max(g,0),1)),g*=f;var d=o[0]=n+g*u,p=o[1]=t+g*v;return Math.sqrt((d-a)*(d-a)+(p-i)*(p-i))}function bn(n,t,e,r,a,i,o){e<0&&(n=n+e,e=-e),r<0&&(t=t+r,r=-r);var s=n+e,l=t+r,c=o[0]=Math.min(Math.max(a,n),s),u=o[1]=Math.min(Math.max(i,t),l);return Math.sqrt((c-a)*(c-a)+(u-i)*(u-i))}var re=[];function zi(n,t,e){var r=bn(t.x,t.y,t.width,t.height,n.x,n.y,re);return e.set(re[0],re[1]),r}function Ei(n,t,e){for(var r=0,a=0,i=0,o=0,s,l,c=1/0,u=t.data,v=n.x,f=n.y,h=0;h<u.length;){var g=u[h++];h===1&&(r=u[h],a=u[h+1],i=r,o=a);var d=c;switch(g){case xe.M:i=u[h++],o=u[h++],r=i,a=o;break;case xe.L:d=dt(r,a,u[h],u[h+1],v,f,re,!0),r=u[h++],a=u[h++];break;case xe.C:d=ga(r,a,u[h++],u[h++],u[h++],u[h++],u[h],u[h+1],v,f,re),r=u[h++],a=u[h++];break;case xe.Q:d=va(r,a,u[h++],u[h++],u[h],u[h+1],v,f,re),r=u[h++],a=u[h++];break;case xe.A:var p=u[h++],m=u[h++],x=u[h++],y=u[h++],b=u[h++],T=u[h++];h+=1;var S=!!(1-u[h++]);s=Math.cos(b)*x+p,l=Math.sin(b)*y+m,h<=1&&(i=s,o=l);var A=(v-p)*y/x+p;d=Bi(p,m,y,b,b+T,S,A,f,re),r=Math.cos(b+T)*x+p,a=Math.sin(b+T)*y+m;break;case xe.R:i=r=u[h++],o=a=u[h++];var C=u[h++],D=u[h++];d=bn(i,o,C,D,v,f,re);break;case xe.Z:d=dt(r,a,i,o,v,f,re,!0),r=i,a=o;break}d<c&&(c=d,e.set(re[0],re[1]))}return c}var ae=new j,M=new j,B=new j,se=new j,oe=new j;function Mr(n,t){if(n){var e=n.getTextGuideLine(),r=n.getTextContent();if(r&&e){var a=n.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],o=a.candidates||ki,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,c=a.anchor,u=n.getComputedTransform(),v=u&&ha([],u),f=t.get("length2")||0;c&&B.copy(c);for(var h=0;h<o.length;h++){var g=o[h];Ni(g,0,s,ae,se),j.scaleAndAdd(M,ae,se,f),M.transform(v);var d=n.getBoundingRect(),p=c?c.distance(M):n instanceof fa?Ei(M,n.path,B):zi(M,d,B);p<l&&(l=p,M.transform(u),B.transform(u),B.toArray(i[0]),M.toArray(i[1]),ae.toArray(i[2]))}Tn(i,t.get("minTurnAngle")),e.setShape({points:i})}}}var pt=[],Y=new j;function Tn(n,t){if(t<=180&&t>0){t=t/180*Math.PI,ae.fromArray(n[0]),M.fromArray(n[1]),B.fromArray(n[2]),j.sub(se,ae,M),j.sub(oe,B,M);var e=se.len(),r=oe.len();if(!(e<.001||r<.001)){se.scale(1/e),oe.scale(1/r);var a=se.dot(oe),i=Math.cos(t);if(i<a){var o=dt(M.x,M.y,B.x,B.y,ae.x,ae.y,pt,!1);Y.fromArray(pt),Y.scaleAndAdd(oe,o/Math.tan(Math.PI-t));var s=B.x!==M.x?(Y.x-M.x)/(B.x-M.x):(Y.y-M.y)/(B.y-M.y);if(isNaN(s))return;s<0?j.copy(Y,M):s>1&&j.copy(Y,B),Y.toArray(n[1])}}}}function Gi(n,t,e){if(e<=180&&e>0){e=e/180*Math.PI,ae.fromArray(n[0]),M.fromArray(n[1]),B.fromArray(n[2]),j.sub(se,M,ae),j.sub(oe,B,M);var r=se.len(),a=oe.len();if(!(r<.001||a<.001)){se.scale(1/r),oe.scale(1/a);var i=se.dot(t),o=Math.cos(e);if(i<o){var s=dt(M.x,M.y,B.x,B.y,ae.x,ae.y,pt,!1);Y.fromArray(pt);var l=Math.PI/2,c=Math.acos(oe.dot(t)),u=l+c-e;if(u>=l)j.copy(Y,B);else{Y.scaleAndAdd(oe,s/Math.tan(Math.PI/2-u));var v=B.x!==M.x?(Y.x-M.x)/(B.x-M.x):(Y.y-M.y)/(B.y-M.y);if(isNaN(v))return;v<0?j.copy(Y,M):v>1&&j.copy(Y,B)}Y.toArray(n[1])}}}}function Dt(n,t,e,r){var a=e==="normal",i=a?n:n.ensureState(e);i.ignore=t;var o=r.get("smooth");o&&o===!0&&(o=.3),i.shape=i.shape||{},o>0&&(i.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();a?n.useStyle(s):i.style=s}function Vi(n,t){var e=t.smooth,r=t.points;if(r)if(n.moveTo(r[0][0],r[0][1]),e>0&&r.length>=3){var a=xr(r[0],r[1]),i=xr(r[1],r[2]);if(!a||!i){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var o=Math.min(a,i)*e,s=wt([],r[1],r[0],o/a),l=wt([],r[1],r[2],o/i),c=wt([],s,l,.5);n.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var u=1;u<r.length;u++)n.lineTo(r[u][0],r[u][1])}function _n(n,t,e){var r=n.getTextGuideLine(),a=n.getTextContent();if(!a){r&&n.removeTextGuideLine();return}for(var i=t.normal,o=i.get("show"),s=a.ignore,l=0;l<mr.length;l++){var c=mr[l],u=t[c],v=c==="normal";if(u){var f=u.get("show"),h=v?s:Ke(a.states[c]&&a.states[c].ignore,s);if(h||!Ke(f,o)){var g=v?r:r&&r.states[c];g&&(g.ignore=!0),r&&Dt(r,!0,c,u);continue}r||(r=new Qt,n.setTextGuideLine(r),!v&&(s||!o)&&Dt(r,!0,"normal",t.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),Dt(r,!1,c,u)}}if(r){Ee(r.style,e),r.style.fill=null;var d=i.get("showAbove"),p=n.textGuideLineConfig=n.textGuideLineConfig||{};p.showAbove=d||!1,r.buildPath=Vi}}function Sn(n,t){t=t||"labelLine";for(var e={normal:n.getModel(t)},r=0;r<yr.length;r++){var a=yr[r];e[a]=n.getModel([a,t])}return e}function ji(n){if(n){for(var t=[],e=0;e<n.length;e++)t.push(n[e].slice());return t}}function Wi(n,t){var e=n.label,r=t&&t.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:ji(r&&r.shape.points)}}var Rr=["align","verticalAlign","width","height","fontSize"],H=new ba,Lt=Ge(),Fi=Ge();function lt(n,t,e){for(var r=0;r<e.length;r++){var a=e[r];t[a]!=null&&(n[a]=t[a])}}var ut=["x","y","rotation"],Hi=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(t,e,r,a,i){var o=a.style,s=a.__hostTarget,l=s.textConfig||{},c=a.getComputedTransform(),u=a.getBoundingRect().plain();Bt.applyTransform(u,u,c),c?H.setLocalTransform(c):(H.x=H.y=H.rotation=H.originX=H.originY=0,H.scaleX=H.scaleY=1),H.rotation=Xe(H.rotation);var v=a.__hostTarget,f;if(v){f=v.getBoundingRect().plain();var h=v.getComputedTransform();Bt.applyTransform(f,f,h)}var g=f&&v.getTextGuideLine();this._labelList.push({label:a,labelLine:g,seriesModel:r,dataIndex:t,dataType:e,layoutOption:i,computedLayoutOption:null,rect:u,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:g&&g.ignore,x:H.x,y:H.y,scaleX:H.scaleX,scaleY:H.scaleY,rotation:H.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:a.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var r=t.__model,a=r.get("labelLayout");(ue(a)||pa(a).length)&&t.group.traverse(function(i){if(i.ignore)return!0;var o=i.getTextContent(),s=X(i);o&&!o.disableLabelLayout&&e._addLabel(s.dataIndex,s.dataType,r,o,a)})},n.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),r=t.getHeight();function a(y,b){return function(){Mr(y,b)}}for(var i=0;i<this._labelList.length;i++){var o=this._labelList[i],s=o.label,l=s.__hostTarget,c=o.defaultAttr,u=void 0;ue(o.layoutOption)?u=o.layoutOption(Wi(o,l)):u=o.layoutOption,u=u||{},o.computedLayoutOption=u;var v=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*v:c.attachedRot,offset:[u.dx||0,u.dy||0]});var f=!1;if(u.x!=null?(s.x=q(u.x,e),s.setStyle("x",0),f=!0):(s.x=c.x,s.setStyle("x",c.style.x)),u.y!=null?(s.y=q(u.y,r),s.setStyle("y",0),f=!0):(s.y=c.y,s.setStyle("y",c.style.y)),u.labelLinePoints){var h=l.getTextGuideLine();h&&(h.setShape({points:u.labelLinePoints}),f=!1)}var g=Lt(s);g.needsUpdateLabelLine=f,s.rotation=u.rotate!=null?u.rotate*v:c.rotation,s.scaleX=c.scaleX,s.scaleY=c.scaleY;for(var d=0;d<Rr.length;d++){var p=Rr[d];s.setStyle(p,u[p]!=null?u[p]:c.style[p])}if(u.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var x=o.seriesModel.getData(o.dataType);m=x.getItemModel(o.dataIndex)}s.on("drag",a(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=c.cursor}},n.prototype.layout=function(t){var e=t.getWidth(),r=t.getHeight(),a=xi(this._labelList),i=$e(a,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=$e(a,function(l){return l.layoutOption.moveOverlap==="shiftY"});bi(i,0,e),yn(o,0,r);var s=$e(a,function(l){return l.layoutOption.hideOverlap});Ti(s)},n.prototype.processLabelsOverall=function(){var t=this;w(this._chartViewList,function(e){var r=e.__model,a=e.ignoreLabelLineUpdate,i=r.isAnimationEnabled();e.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!a,l=o.getTextContent();!s&&l&&(s=Lt(l).needsUpdateLabelLine),s&&t._updateLabelLine(o,r),i&&t._animateLabels(o,r)})})},n.prototype._updateLabelLine=function(t,e){var r=t.getTextContent(),a=X(t),i=a.dataIndex;if(r&&i!=null){var o=e.getData(a.dataType),s=o.getItemModel(i),l={},c=o.getItemVisual(i,"style");if(c){var u=o.getVisual("drawType");l.stroke=c[u]}var v=s.getModel("labelLine");_n(t,Sn(s),l),Mr(t,v)}},n.prototype._animateLabels=function(t,e){var r=t.getTextContent(),a=t.getTextGuideLine();if(r&&(t.forceLabelAnimation||!r.ignore&&!r.invisible&&!t.disableLabelAnimation&&!ma(t))){var i=Lt(r),o=i.oldLayout,s=X(t),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},u=e.getData(s.dataType);if(o){r.attr(o);var f=t.prevStates;f&&(ce(f,"select")>=0&&r.attr(i.oldLayoutSelect),ce(f,"emphasis")>=0&&r.attr(i.oldLayoutEmphasis)),Qe(r,c,e,l)}else if(r.attr(c),!ya(r).valueAnimation){var v=Ke(r.style.opacity,1);r.style.opacity=0,qe(r,{style:{opacity:v}},e,l)}if(i.oldLayout=c,r.states.select){var h=i.oldLayoutSelect={};lt(h,c,ut),lt(h,r.states.select,ut)}if(r.states.emphasis){var g=i.oldLayoutEmphasis={};lt(g,c,ut),lt(g,r.states.emphasis,ut)}xa(r,l,u,e,e)}if(a&&!a.ignore&&!a.invisible){var i=Fi(a),o=i.oldLayout,d={points:a.shape.points};o?(a.attr({shape:o}),Qe(a,{shape:d},e)):(a.setShape(d),a.style.strokePercent=0,qe(a,{style:{strokePercent:1}},e)),i.oldLayout=d}},n}(),Mt=Ge();function wn(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,r){var a=Mt(e).labelManager;a||(a=Mt(e).labelManager=new Hi),a.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(t,e,r){var a=Mt(e).labelManager;r.updatedSeries.forEach(function(i){a.addLabelsOfSeries(e.getViewOfSeriesModel(i))}),a.updateLayoutConfig(e),a.layout(e),a.processLabelsOverall()})}var Ir="\0_ec_interaction_mutex";function Yi(n,t,e){var r=Cn(n);r[t]=e}function Zi(n,t,e){var r=Cn(n),a=r[t];a===e&&(r[t]=null)}function Cn(n){return n[Ir]||(n[Ir]={})}yt({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},zt);var Ui={axisPointer:1,tooltip:1,brush:1};function Xi(n,t,e){var r=t.getComponentByElement(n.topTarget),a=r&&r.coordinateSystem;return r&&r!==e&&!Ui.hasOwnProperty(r.mainType)&&a&&a.model!==e}function An(n,t,e,r,a,i){n=n||0;var o=e[1]-e[0];if(a!=null&&(a=Le(a,[0,o])),i!=null&&(i=Math.max(i,a??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=Le(s,[0,o]),a=i=Le(s,[a,i]),r=0}t[0]=Le(t[0],e),t[1]=Le(t[1],e);var l=Rt(t,r);t[r]+=n;var c=a||0,u=e.slice();l.sign<0?u[0]+=c:u[1]-=c,t[r]=Le(t[r],u);var v;return v=Rt(t,r),a!=null&&(v.sign!==l.sign||v.span<a)&&(t[1-r]=t[r]+l.sign*a),v=Rt(t,r),i!=null&&v.span>i&&(t[1-r]=t[r]+v.sign*i),t}function Rt(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function Le(n,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,n))}var Se=!0,Je=Math.min,Be=Math.max,$i=Math.pow,qi=1e4,Ki=6,Qi=6,Or="globalPan",Ji={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},eo={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Pr={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},to=0,ro=function(n){k(t,n);function t(e){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=e,r.group=new et,r._uid="brushController_"+to++,w(uo,function(a,i){this._handlers[i]=ee(a,this)},r),r}return t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var r=this._zr;this._enableGlobalPan||Yi(r,Or,this._uid),w(this._handlers,function(a,i){r.on(i,a)}),this._brushType=e.brushType,this._brushOption=le(ie(Pr),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;Zi(e,Or,this._uid),w(this._handlers,function(r,a){e.off(a,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var r=this._panels={};w(e,function(a){r[a.panelId]=ie(a)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=te(e,function(f){return le(ie(Pr),f,!0)});var r="\0-brush-index-",a=this._covers,i=this._covers=[],o=this,s=this._creatingCover;return new xn(a,e,c,l).add(u).update(u).remove(v).execute(),this;function l(f,h){return(f.id!=null?f.id:r+h)+"-"+f.brushType}function c(f,h){return l(f.__brushOption,h)}function u(f,h){var g=e[f];if(h!=null&&a[h]===s)i[f]=a[h];else{var d=i[f]=h!=null?(a[h].__brushOption=g,a[h]):Ln(o,Dn(o,g));rr(o,d)}}function v(f){a[f]!==s&&o.group.remove(a[f])}},t.prototype.unmount=function(){return this.enableBrush(!1),Vt(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Ta);function Dn(n,t){var e=xt[t.brushType].createCover(n,t);return e.__brushOption=t,Rn(e,t),n.group.add(e),e}function Ln(n,t){var e=nr(t);return e.endCreating&&(e.endCreating(n,t),Rn(t,t.__brushOption)),t}function Mn(n,t){var e=t.__brushOption;nr(t).updateCoverShape(n,t,e.range,e)}function Rn(n,t){var e=t.z;e==null&&(e=qi),n.traverse(function(r){r.z=e,r.z2=e})}function rr(n,t){nr(t).updateCommon(n,t),Mn(n,t)}function nr(n){return xt[n.__brushOption.brushType]}function ar(n,t,e){var r=n._panels;if(!r)return Se;var a,i=n._transform;return w(r,function(o){o.isTargetByCursor(t,e,i)&&(a=o)}),a}function In(n,t){var e=n._panels;if(!e)return Se;var r=t.__brushOption.panelId;return r!=null?e[r]:Se}function Vt(n){var t=n._covers,e=t.length;return w(t,function(r){n.group.remove(r)},n),t.length=0,!!e}function we(n,t){var e=te(n._covers,function(r){var a=r.__brushOption,i=ie(a.range);return{brushType:a.brushType,panelId:a.panelId,range:i}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function no(n){var t=n._track;if(!t.length)return!1;var e=t[t.length-1],r=t[0],a=e[0]-r[0],i=e[1]-r[1],o=$i(a*a+i*i,.5);return o>Ki}function On(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function Pn(n,t,e,r){var a=new et;return a.add(new Te({name:"main",style:ir(e),silent:!0,draggable:!0,cursor:"move",drift:G(kr,n,t,a,["n","s","w","e"]),ondragend:G(we,t,{isEnd:!0})})),w(r,function(i){a.add(new Te({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:G(kr,n,t,a,i),ondragend:G(we,t,{isEnd:!0})}))}),a}function kn(n,t,e,r){var a=r.brushStyle.lineWidth||0,i=Be(a,Qi),o=e[0][0],s=e[1][0],l=o-a/2,c=s-a/2,u=e[0][1],v=e[1][1],f=u-i+a/2,h=v-i+a/2,g=u-o,d=v-s,p=g+a,m=d+a;fe(n,t,"main",o,s,g,d),r.transformable&&(fe(n,t,"w",l,c,i,m),fe(n,t,"e",f,c,i,m),fe(n,t,"n",l,c,p,i),fe(n,t,"s",l,h,p,i),fe(n,t,"nw",l,c,i,i),fe(n,t,"ne",f,c,i,i),fe(n,t,"sw",l,h,i,i),fe(n,t,"se",f,h,i,i))}function jt(n,t){var e=t.__brushOption,r=e.transformable,a=t.childAt(0);a.useStyle(ir(e)),a.attr({silent:!r,cursor:r?"move":"default"}),w([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var o=t.childOfName(i.join("")),s=i.length===1?Wt(n,i[0]):io(n,i);o&&o.attr({silent:!r,invisible:!r,cursor:r?eo[s]+"-resize":null})})}function fe(n,t,e,r,a,i,o){var s=t.childOfName(e);s&&s.setShape(so(or(n,t,[[r,a],[r+i,a+o]])))}function ir(n){return Ee({strokeNoScale:!0},n.brushStyle)}function Nn(n,t,e,r){var a=[Je(n,e),Je(t,r)],i=[Be(n,e),Be(t,r)];return[[a[0],i[0]],[a[1],i[1]]]}function ao(n){return un(n.group)}function Wt(n,t){var e={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},a=Sa(e[t],ao(n));return r[a]}function io(n,t){var e=[Wt(n,t[0]),Wt(n,t[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function kr(n,t,e,r,a,i){var o=e.__brushOption,s=n.toRectRange(o.range),l=Bn(t,a,i);w(r,function(c){var u=Ji[c];s[u[0]][u[1]]+=l[u[0]]}),o.range=n.fromRectRange(Nn(s[0][0],s[1][0],s[0][1],s[1][1])),rr(t,e),we(t,{isEnd:!1})}function oo(n,t,e,r){var a=t.__brushOption.range,i=Bn(n,e,r);w(a,function(o){o[0]+=i[0],o[1]+=i[1]}),rr(n,t),we(n,{isEnd:!1})}function Bn(n,t,e){var r=n.group,a=r.transformCoordToLocal(t,e),i=r.transformCoordToLocal(0,0);return[a[0]-i[0],a[1]-i[1]]}function or(n,t,e){var r=In(n,t);return r&&r!==Se?r.clipPath(e,n._transform):ie(e)}function so(n){var t=Je(n[0][0],n[1][0]),e=Je(n[0][1],n[1][1]),r=Be(n[0][0],n[1][0]),a=Be(n[0][1],n[1][1]);return{x:t,y:e,width:r-t,height:a-e}}function lo(n,t,e){if(!(!n._brushType||co(n,t.offsetX,t.offsetY))){var r=n._zr,a=n._covers,i=ar(n,t,e);if(!n._dragging)for(var o=0;o<a.length;o++){var s=a[o].__brushOption;if(i&&(i===Se||s.panelId===i.panelId)&&xt[s.brushType].contain(a[o],e[0],e[1]))return}i&&r.setCursorStyle("crosshair")}}function Ft(n){var t=n.event;t.preventDefault&&t.preventDefault()}function Ht(n,t,e){return n.childOfName("main").contain(t,e)}function zn(n,t,e,r){var a=n._creatingCover,i=n._creatingPanel,o=n._brushOption,s;if(n._track.push(e.slice()),no(n)||a){if(i&&!a){o.brushMode==="single"&&Vt(n);var l=ie(o);l.brushType=Nr(l.brushType,i),l.panelId=i===Se?null:i.panelId,a=n._creatingCover=Dn(n,l),n._covers.push(a)}if(a){var c=xt[Nr(n._brushType,i)],u=a.__brushOption;u.range=c.getCreatingRange(or(n,a,n._track)),r&&(Ln(n,a),c.updateCommon(n,a)),Mn(n,a),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&ar(n,t,e)&&Vt(n)&&(s={isEnd:r,removeOnClick:!0});return s}function Nr(n,t){return n==="auto"?t.defaultBrushType:n}var uo={mousedown:function(n){if(this._dragging)Br(this,n);else if(!n.target||!n.target.draggable){Ft(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var e=this._creatingPanel=ar(this,n,t);e&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var t=n.offsetX,e=n.offsetY,r=this.group.transformCoordToLocal(t,e);if(lo(this,n,r),this._dragging){Ft(n);var a=zn(this,n,r,!1);a&&we(this,a)}},mouseup:function(n){Br(this,n)}};function Br(n,t){if(n._dragging){Ft(t);var e=t.offsetX,r=t.offsetY,a=n.group.transformCoordToLocal(e,r),i=zn(n,t,a,!0);n._dragging=!1,n._track=[],n._creatingCover=null,i&&we(n,i)}}function co(n,t,e){var r=n._zr;return t<0||t>r.getWidth()||e<0||e>r.getHeight()}var xt={lineX:zr(0),lineY:zr(1),rect:{createCover:function(n,t){function e(r){return r}return Pn({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=On(n);return Nn(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,r){kn(n,t,e,r)},updateCommon:jt,contain:Ht},polygon:{createCover:function(n,t){var e=new et;return e.add(new Qt({name:"main",style:ir(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new _a({name:"main",draggable:!0,drift:G(oo,n,t),ondragend:G(we,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,r){t.childAt(0).setShape({points:or(n,t,e)})},updateCommon:jt,contain:Ht}};function zr(n){return{createCover:function(t,e){return Pn({toRectRange:function(r){var a=[r,[0,100]];return n&&a.reverse(),a},fromRectRange:function(r){return r[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=On(t),r=Je(e[0][n],e[1][n]),a=Be(e[0][n],e[1][n]);return[r,a]},updateCoverShape:function(t,e,r,a){var i,o=In(t,e);if(o!==Se&&o.getLinearBrushOtherExtent)i=o.getLinearBrushOtherExtent(n);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-n]]}var l=[r,i];n&&l.reverse(),kn(t,e,l,a)},updateCommon:jt,contain:Ht}}function ho(n){return n=sr(n),function(t){return wa(t,n)}}function fo(n,t){return n=sr(n),function(e){var r=t??e,a=r?n.width:n.height,i=r?n.x:n.y;return[i,i+(a||0)]}}function vo(n,t,e){var r=sr(n);return function(a,i){return r.contain(i[0],i[1])&&!Xi(a,t,e)}}function sr(n){return Bt.create(n)}var Er=["x","y","radius","angle","single"],go=["cartesian2d","polar","singleAxis"];function po(n){var t=n.get("coordinateSystem");return ce(go,t)>=0}function Pe(n){return n+"Axis"}function mo(n,t){var e=_e(),r=[],a=_e();n.eachComponent({mainType:"dataZoom",query:t},function(u){a.get(u.uid)||s(u)});var i;do i=!1,n.eachComponent("dataZoom",o);while(i);function o(u){!a.get(u.uid)&&l(u)&&(s(u),i=!0)}function s(u){a.set(u.uid,!0),r.push(u),c(u)}function l(u){var v=!1;return u.eachTargetAxis(function(f,h){var g=e.get(f);g&&g[h]&&(v=!0)}),v}function c(u){u.eachTargetAxis(function(v,f){(e.get(v)||e.set(v,[]))[f]=!0})}return r}var It=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),yo=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return t.prototype.init=function(e,r,a){var i=Gr(e);this.settledOption=i,this.mergeDefaultAndTheme(e,a),this._doInit(i)},t.prototype.mergeOption=function(e){var r=Gr(e);le(this.option,e,!0),le(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(e){var r=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var a=this.settledOption;w([["start","startValue"],["end","endValue"]],function(i,o){this._rangePropMode[o]==="value"&&(r[i[0]]=a[i[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),r=this._targetAxisInfoMap=_e(),a=this._fillSpecifiedTargetAxis(r);a?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var r=!1;return w(Er,function(a){var i=this.getReferringComponents(Pe(a),Ca);if(i.specified){r=!0;var o=new It;w(i.models,function(s){o.add(s.componentIndex)}),e.set(a,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(e,r){var a=this.ecModel,i=!0;if(i){var o=r==="vertical"?"y":"x",s=a.findComponents({mainType:o+"Axis"});l(s,o)}if(i){var s=a.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===r}});l(s,"single")}function l(c,u){var v=c[0];if(v){var f=new It;if(f.add(v.componentIndex),e.set(u,f),i=!1,u==="x"||u==="y"){var h=v.getReferringComponents("grid",ft).models[0];h&&w(c,function(g){v.componentIndex!==g.componentIndex&&h===g.getReferringComponents("grid",ft).models[0]&&f.add(g.componentIndex)})}}}i&&w(Er,function(c){if(i){var u=a.findComponents({mainType:Pe(c),filter:function(f){return f.get("type",!0)==="category"}});if(u[0]){var v=new It;v.add(u[0].componentIndex),e.set(c,v),i=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(r){!e&&(e=r)},this),e==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var r=this._rangePropMode,a=this.get("rangeMode");w([["start","startValue"],["end","endValue"]],function(i,o){var s=e[i[0]]!=null,l=e[i[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":a?r[o]=a[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(r,a){e==null&&(e=this.ecModel.getComponent(Pe(r),a))},this),e},t.prototype.eachTargetAxis=function(e,r){this._targetAxisInfoMap.each(function(a,i){w(a.indexList,function(o){e.call(r,i,o)})})},t.prototype.getAxisProxy=function(e,r){var a=this.getAxisModel(e,r);if(a)return a.__dzAxisProxy},t.prototype.getAxisModel=function(e,r){var a=this._targetAxisInfoMap.get(e);if(a&&a.indexMap[r])return this.ecModel.getComponent(Pe(e),r)},t.prototype.setRawRange=function(e){var r=this.option,a=this.settledOption;w([["start","startValue"],["end","endValue"]],function(i){(e[i[0]]!=null||e[i[1]]!=null)&&(r[i[0]]=a[i[0]]=e[i[0]],r[i[1]]=a[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var r=this.option;w(["start","startValue","end","endValue"],function(a){r[a]=e[a]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,r){if(e==null&&r==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(e,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var r,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var o=a[i],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var c=this.getAxisProxy(o,s.indexList[l]);if(c.hostedBy(this))return c;r||(r=c)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(tt);function Gr(n){var t={};return w(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}var xo=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(yo),bo=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,a,i){this.dataZoomModel=e,this.ecModel=r,this.api=a},t.type="dataZoom",t}(rt),To=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="dataZoom.select",t}(bo),Ie=w,Vr=Da,_o=function(){function n(t,e,r,a){this._dimName=t,this._axisIndex=e,this.ecModel=a,this._dataZoomModel=r}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(po(e)){var r=Pe(this._dimName),a=e.getReferringComponents(r,ft).models[0];a&&this._axisIndex===a.componentIndex&&t.push(e)}},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return ie(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e=this._dataExtent,r=this.getAxisModel(),a=r.axis.scale,i=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],c;Ie(["start","end"],function(f,h){var g=t[f],d=t[f+"Value"];i[h]==="percent"?(g==null&&(g=o[h]),d=a.parse(Re(g,o,e))):(c=!0,d=d==null?e[h]:a.parse(d),g=Re(d,e,o)),l[h]=d==null||isNaN(d)?e[h]:d,s[h]=g==null||isNaN(g)?o[h]:g}),Vr(l),Vr(s);var u=this._minMaxSpan;c?v(l,s,e,o,!1):v(s,l,o,e,!0);function v(f,h,g,d,p){var m=p?"Span":"ValueSpan";An(0,f,g,"all",u["min"+m],u["max"+m]);for(var x=0;x<2;x++)h[x]=Re(f[x],g,d,!0),p&&(h[x]=a.parse(h[x]))}return{valueWindow:l,percentWindow:s}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=So(this,this._dimName,e),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t!==this._dataZoomModel)return;var r=this._dimName,a=this.getTargetSeriesModels(),i=t.get("filterMode"),o=this._valueWindow;if(i==="none")return;Ie(a,function(l){var c=l.getData(),u=c.mapDimensionsAll(r);if(u.length){if(i==="weakFilter"){var v=c.getStore(),f=te(u,function(h){return c.getDimensionIndex(h)},c);c.filterSelf(function(h){for(var g,d,p,m=0;m<u.length;m++){var x=v.get(f[m],h),y=!isNaN(x),b=x<o[0],T=x>o[1];if(y&&!b&&!T)return!0;y&&(p=!0),b&&(g=!0),T&&(d=!0)}return p&&g&&d})}else Ie(u,function(h){if(i==="empty")l.setData(c=c.map(h,function(d){return s(d)?d:NaN}));else{var g={};g[h]=o,c.selectRange(g)}});Ie(u,function(h){c.setApproximateExtent(o,h)})}});function s(l){return l>=o[0]&&l<=o[1]}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,r=this._dataExtent;Ie(["min","max"],function(a){var i=e.get(a+"Span"),o=e.get(a+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?i=Re(r[0]+o,r,[0,100],!0):i!=null&&(o=Re(i,[0,100],r,!0)-r[0]),t[a+"Span"]=i,t[a+"ValueSpan"]=o},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,r=this._valueWindow;if(e){var a=Aa(r,[0,500]);a=Math.min(a,20);var i=t.axis.scale.rawExtentInfo;e[0]!==0&&i.setDeterminedMinMax("min",+r[0].toFixed(a)),e[1]!==100&&i.setDeterminedMinMax("max",+r[1].toFixed(a)),i.freeze()}},n}();function So(n,t,e){var r=[1/0,-1/0];Ie(e,function(o){_i(r,o.getData(),t)});var a=n.getAxisModel(),i=Si(a.axis.scale,a,r).calculate();return[i.min,i.max]}var wo={getTargetSeries:function(n){function t(a){n.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(o,s){var l=n.getComponent(Pe(o),s);a(o,s,l,i)})})}t(function(a,i,o,s){o.__dzAxisProxy=null});var e=[];t(function(a,i,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new _o(a,i,s,n),e.push(o.__dzAxisProxy))});var r=_e();return w(e,function(a){w(a.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(r,a){e.getAxisProxy(r,a).reset(e)}),e.eachTargetAxis(function(r,a){e.getAxisProxy(r,a).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var r=e.findRepresentativeAxisProxy();if(r){var a=r.getDataPercentWindow(),i=r.getDataValueWindow();e.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}};function Co(n){n.registerAction("dataZoom",function(t,e){var r=mo(e,t);w(r,function(a){a.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var jr=!1;function Ao(n){jr||(jr=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,wo),Co(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function Do(n){n.registerComponentModel(xo),n.registerComponentView(To),Ao(n)}var ne=function(){function n(){}return n}(),En={};function Ye(n,t){En[n]=t}function Gn(n){return En[n]}var Lo=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;w(this.option.feature,function(r,a){var i=Gn(a);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),le(r,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(tt);function Mo(n,t,e){var r=t.getBoxLayoutParams(),a=t.get("padding"),i={width:e.getWidth(),height:e.getHeight()},o=Ne(r,i,a);ke(t.get("orient"),n,t.get("itemGap"),o.width,o.height),La(n,r,i,a)}function Vn(n,t){var e=cn(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),n=new Te({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var Ro=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,a,i){var o=this.group;if(o.removeAll(),!e.get("show"))return;var s=+e.get("itemSize"),l=e.get("orient")==="vertical",c=e.get("feature")||{},u=this._features||(this._features={}),v=[];w(c,function(g,d){v.push(d)}),new xn(this._featureNames||[],v).add(f).update(f).remove(G(f,null)).execute(),this._featureNames=v;function f(g,d){var p=v[g],m=v[d],x=c[p],y=new Oe(x,e,e.ecModel),b;if(i&&i.newTitle!=null&&i.featureName===p&&(x.title=i.newTitle),p&&!m){if(Io(p))b={onclick:y.option.onclick,featureName:p};else{var T=Gn(p);if(!T)return;b=new T}u[p]=b}else if(b=u[m],!b)return;b.uid=Ma("toolbox-feature"),b.model=y,b.ecModel=r,b.api=a;var S=b instanceof ne;if(!p&&m){S&&b.dispose&&b.dispose(r,a);return}if(!y.get("show")||S&&b.unusable){S&&b.remove&&b.remove(r,a);return}h(y,b,p),y.setIconStatus=function(A,C){var D=this.option,L=this.iconPaths;D.iconStatus=D.iconStatus||{},D.iconStatus[A]=C,L[A]&&(C==="emphasis"?br:Tr)(L[A])},b instanceof ne&&b.render&&b.render(y,r,a,i)}function h(g,d,p){var m=g.getModel("iconStyle"),x=g.getModel(["emphasis","iconStyle"]),y=d instanceof ne&&d.getIcons?d.getIcons():g.get("icon"),b=g.get("title")||{},T,S;Z(y)?(T={},T[p]=y):T=y,Z(b)?(S={},S[p]=b):S=b;var A=g.iconPaths={};w(T,function(C,D){var L=hn(C,{},{x:-s/2,y:-s/2,width:s,height:s});L.setStyle(m.getItemStyle());var I=L.ensureState("emphasis");I.style=x.getItemStyle();var R=new ve({style:{text:S[D],align:x.get("textAlign"),borderRadius:x.get("textBorderRadius"),padding:x.get("textPadding"),fill:null,font:Ra({fontStyle:x.get("textFontStyle"),fontFamily:x.get("textFontFamily"),fontSize:x.get("textFontSize"),fontWeight:x.get("textFontWeight")},r)},ignore:!0});L.setTextContent(R),fn({el:L,componentModel:e,itemName:D,formatterParamsExtra:{title:S[D]}}),L.__title=S[D],L.on("mouseover",function(){var O=x.getItemStyle(),F=l?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:x.get("textFill")||O.fill||O.stroke||"#000",backgroundColor:x.get("textBackgroundColor")}),L.setTextConfig({position:x.get("textPosition")||F}),R.ignore=!e.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",D])!=="emphasis"&&a.leaveEmphasis(this),R.hide()}),(g.get(["iconStatus",D])==="emphasis"?br:Tr)(L),o.add(L),L.on("click",ee(d.onclick,d,r,a,D)),A[D]=L})}Mo(o,e,a),o.add(Vn(o.getBoundingRect(),e)),l||o.eachChild(function(g){var d=g.__title,p=g.ensureState("emphasis"),m=p.textConfig||(p.textConfig={}),x=g.getTextContent(),y=x&&x.ensureState("emphasis");if(y&&!ue(y)&&d){var b=y.style||(y.style={}),T=Ia(d,ve.makeFont(b)),S=g.x+o.x,A=g.y+o.y+s,C=!1;A+T.height>a.getHeight()&&(m.position="top",C=!0);var D=C?-5-T.height:s+10;S+T.width/2>a.getWidth()?(m.position=["100%",D],b.align="right"):S-T.width/2<0&&(m.position=[0,D],b.align="left")}})},t.prototype.updateView=function(e,r,a,i){w(this._features,function(o){o instanceof ne&&o.updateView&&o.updateView(o.model,r,a,i)})},t.prototype.remove=function(e,r){w(this._features,function(a){a instanceof ne&&a.remove&&a.remove(e,r)}),this.group.removeAll()},t.prototype.dispose=function(e,r){w(this._features,function(a){a instanceof ne&&a.dispose&&a.dispose(e,r)})},t.type="toolbox",t}(rt);function Io(n){return n.indexOf("my")===0}var Oo=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){var a=this.model,i=a.get("name")||e.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":a.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:a.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),c=Q.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=i+"."+s,u.target="_blank",u.href=l;var v=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(v)}else if(window.navigator.msSaveOrOpenBlob||o){var f=l.split(","),h=f[0].indexOf("base64")>-1,g=o?decodeURIComponent(f[1]):f[1];h&&(g=window.atob(g));var d=i+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var p=g.length,m=new Uint8Array(p);p--;)m[p]=g.charCodeAt(p);var x=new Blob([m]);window.navigator.msSaveOrOpenBlob(x,d)}else{var y=document.createElement("iframe");document.body.appendChild(y);var b=y.contentWindow,T=b.document;T.open("image/svg+xml","replace"),T.write(g),T.close(),b.focus(),T.execCommand("SaveAs",!0,d),document.body.removeChild(y)}}else{var S=a.get("lang"),A='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(S&&S[0]||"")+'" /></body>',C=window.open();C.document.write(A),C.document.title=i}},t.getDefaultOption=function(e){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(ne),Wr="__ec_magicType_stack__",Po=[["line","bar"],["stack"]],ko=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getIcons=function(){var e=this.model,r=e.get("icon"),a={};return w(e.get("type"),function(i){r[i]&&(a[i]=r[i])}),a},t.getDefaultOption=function(e){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(e,r,a){var i=this.model,o=i.get(["seriesIndex",a]);if(Fr[a]){var s={series:[]},l=function(v){var f=v.subType,h=v.id,g=Fr[a](f,h,v,i);g&&(Ee(g,v.option),s.series.push(g));var d=v.coordinateSystem;if(d&&d.type==="cartesian2d"&&(a==="line"||a==="bar")){var p=d.getAxesByScale("ordinal")[0];if(p){var m=p.dim,x=m+"Axis",y=v.getReferringComponents(x,ft).models[0],b=y.componentIndex;s[x]=s[x]||[];for(var T=0;T<=b;T++)s[x][b]=s[x][b]||{};s[x][b].boundaryGap=a==="bar"}}};w(Po,function(v){ce(v,a)>=0&&w(v,function(f){i.setIconStatus(f,"normal")})}),i.setIconStatus(a,"emphasis"),e.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var c,u=a;a==="stack"&&(c=le({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",a])!=="emphasis"&&(u="tiled")),r.dispatchAction({type:"changeMagicType",currentType:u,newOption:s,newTitle:c,featureName:"magicType"})}},t}(ne),Fr={line:function(n,t,e,r){if(n==="bar")return le({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,t,e,r){if(n==="line")return le({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,t,e,r){var a=e.get("stack")===Wr;if(n==="line"||n==="bar")return r.setIconStatus("stack",a?"normal":"emphasis"),le({id:t,stack:a?"":Wr},r.get(["option","stack"])||{},!0)}};yt({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});var bt=new Array(60).join("-"),ze="	";function No(n){var t={},e=[],r=[];return n.eachRawSeries(function(a){var i=a.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var o=i.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:i.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(a)}else e.push(a)}else e.push(a)}),{seriesGroupByCategoryAxis:t,other:e,meta:r}}function Bo(n){var t=[];return w(n,function(e,r){var a=e.categoryAxis,i=e.valueAxis,o=i.dim,s=[" "].concat(te(e.series,function(h){return h.name})),l=[a.model.getCategories()];w(e.series,function(h){var g=h.getRawData();l.push(h.getRawData().mapArray(g.mapDimension(o),function(d){return d}))});for(var c=[s.join(ze)],u=0;u<l[0].length;u++){for(var v=[],f=0;f<l.length;f++)v.push(l[f][u]);c.push(v.join(ze))}t.push(c.join(`
`))}),t.join(`

`+bt+`

`)}function zo(n){return te(n,function(t){var e=t.getRawData(),r=[t.name],a=[];return e.each(e.dimensions,function(){for(var i=arguments.length,o=arguments[i-1],s=e.getName(o),l=0;l<i-1;l++)a[l]=arguments[l];r.push((s?s+ze:"")+a.join(ze))}),r.join(`
`)}).join(`

`+bt+`

`)}function Eo(n){var t=No(n);return{value:$e([Bo(t.seriesGroupByCategoryAxis),zo(t.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+bt+`

`),meta:t.meta}}function mt(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Go(n){var t=n.slice(0,n.indexOf(`
`));if(t.indexOf(ze)>=0)return!0}var Yt=new RegExp("["+ze+"]+","g");function Vo(n){for(var t=n.split(/\n+/g),e=mt(t.shift()).split(Yt),r=[],a=te(e,function(l){return{name:l,data:[]}}),i=0;i<t.length;i++){var o=mt(t[i]).split(Yt);r.push(o.shift());for(var s=0;s<o.length;s++)a[s]&&(a[s].data[i]=o[s])}return{series:a,categories:r}}function jo(n){for(var t=n.split(/\n+/g),e=mt(t.shift()),r=[],a=0;a<t.length;a++){var i=mt(t[a]);if(i){var o=i.split(Yt),s="",l=void 0,c=!1;isNaN(o[0])?(c=!0,s=o[0],o=o.slice(1),r[a]={name:s,value:[]},l=r[a].value):l=r[a]=[];for(var u=0;u<o.length;u++)l.push(+o[u]);l.length===1&&(c?r[a].value=l[0]:r[a]=l[0])}}return{name:e,data:r}}function Wo(n,t){var e=n.split(new RegExp(`
*`+bt+`
*`,"g")),r={series:[]};return w(e,function(a,i){if(Go(a)){var o=Vo(a),s=t[i],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=jo(a);r.series.push(o)}}),r}var Fo=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var a=r.getDom(),i=this.model;this._dom&&a.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=i.get("lang")||[];s.innerHTML=l[0]||i.get("title"),s.style.cssText="margin:10px 20px",s.style.color=i.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var v=i.get("optionToContent"),f=i.get("contentToOption"),h=Eo(e);if(ue(v)){var g=v(r.getOption());Z(g)?c.innerHTML=g:Et(g)&&c.appendChild(g)}else{u.readOnly=i.get("readOnly");var d=u.style;d.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",d.color=i.get("textColor"),d.borderColor=i.get("textareaBorderColor"),d.backgroundColor=i.get("textareaColor"),u.value=h.value,c.appendChild(u)}var p=h.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",y=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+i.get("buttonColor"),x+=";color:"+i.get("buttonTextColor");var T=this;function S(){a.removeChild(o),T._dom=null}_r(y,"click",S),_r(b,"click",function(){if(f==null&&v!=null||f!=null&&v==null){S();return}var A;try{ue(f)?A=f(c,r.getOption()):A=Wo(u.value,p)}catch(C){throw S(),new Error("Data view format error "+C)}A&&r.dispatchAction({type:"changeDataView",newOption:A}),S()}),y.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=y.style.cssText=x,!i.get("readOnly")&&m.appendChild(b),m.appendChild(y),o.appendChild(s),o.appendChild(c),o.appendChild(m),c.style.height=a.clientHeight-80+"px",a.appendChild(o),this._dom=o},t.prototype.remove=function(e,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.getDefaultOption=function(e){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(ne);function Ho(n,t){return te(n,function(e,r){var a=t&&t[r];if(vt(a)&&!J(a)){var i=vt(e)&&!J(e);i||(e={value:e});var o=a.name!=null&&e.name==null;return e=Ee(e,a),o&&delete e.name,e}else return e})}yt({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];w(n.newOption.series,function(r){var a=t.getSeriesByName(r.name)[0];if(!a)e.push(K({type:"scatter"},r));else{var i=a.get("data");e.push({name:r.name,data:Ho(r.data,i)})}}),t.mergeOption(Ee({series:e},n.newOption))});var jn=w,Wn=Ge();function Yo(n,t){var e=lr(n);jn(t,function(r,a){for(var i=e.length-1;i>=0;i--){var o=e[i];if(o[a])break}if(i<0){var s=n.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(s){var l=s.getPercentRange();e[0][a]={dataZoomId:a,start:l[0],end:l[1]}}}}),e.push(t)}function Zo(n){var t=lr(n),e=t[t.length-1];t.length>1&&t.pop();var r={};return jn(e,function(a,i){for(var o=t.length-1;o>=0;o--)if(a=t[o][i],a){r[i]=a;break}}),r}function Uo(n){Wn(n).snapshots=null}function Xo(n){return lr(n).length}function lr(n){var t=Wn(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var $o=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.onclick=function(e,r){Uo(e),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(ne);yt({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var qo=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Fn=function(){function n(t,e,r){var a=this;this._targetInfoList=[];var i=Hr(e,t);w(Ko,function(o,s){(!r||!r.include||ce(r.include,s)>=0)&&o(i,a._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(r,a,i){if((r.coordRanges||(r.coordRanges=[])).push(a),!r.coordRange){r.coordRange=a;var o=Ot[r.brushType](0,i,a);r.__rangeOffset={offset:Xr[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,r){w(t,function(a){var i=this.findTargetInfo(a,e);i&&i!==!0&&w(i.coordSyses,function(o){var s=Ot[a.brushType](1,o,a.range,!0);r(a,s.values,o,e)})},this)},n.prototype.setInputRanges=function(t,e){w(t,function(r){var a=this.findTargetInfo(r,e);if(r.range=r.range||[],a&&a!==!0){r.panelId=a.panelId;var i=Ot[r.brushType](0,a.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?Xr[r.brushType](i.values,o.offset,Qo(i.xyMinMax,o.xyMinMax)):i.values}},this)},n.prototype.makePanelOpts=function(t,e){return te(this._targetInfoList,function(r){var a=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e?e(r):null,clipPath:ho(a),isTargetByCursor:vo(a,t,r.coordSysModel),getLinearBrushOtherExtent:fo(a)}})},n.prototype.controlSeries=function(t,e,r){var a=this.findTargetInfo(t,r);return a===!0||a&&ce(a.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var r=this._targetInfoList,a=Hr(e,t),i=0;i<r.length;i++){var o=r[i],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<Yr.length;l++)if(Yr[l](a,o))return o}return!0},n}();function Zt(n){return n[0]>n[1]&&n.reverse(),n}function Hr(n,t){return vn(n,t,{includeMainTypes:qo})}var Ko={grid:function(n,t){var e=n.xAxisModels,r=n.yAxisModels,a=n.gridModels,i=_e(),o={},s={};!e&&!r&&!a||(w(e,function(l){var c=l.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),w(r,function(l){var c=l.axis.grid.model;i.set(c.id,c),s[c.id]=!0}),w(a,function(l){i.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),i.each(function(l){var c=l.coordinateSystem,u=[];w(c.getCartesians(),function(v,f){(ce(e,v.getAxis("x").model)>=0||ce(r,v.getAxis("y").model)>=0)&&u.push(v)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:Zr.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(n,t){w(n.geoModels,function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:Zr.geo})})}},Yr=[function(n,t){var e=n.xAxisModel,r=n.yAxisModel,a=n.gridModel;return!a&&e&&(a=e.axis.grid.model),!a&&r&&(a=r.axis.grid.model),a&&a===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],Zr={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(un(n)),t}},Ot={lineX:G(Ur,0),lineY:G(Ur,1),rect:function(n,t,e,r){var a=n?t.pointToData([e[0][0],e[1][0]],r):t.dataToPoint([e[0][0],e[1][0]],r),i=n?t.pointToData([e[0][1],e[1][1]],r):t.dataToPoint([e[0][1],e[1][1]],r),o=[Zt([a[0],i[0]]),Zt([a[1],i[1]])];return{values:o,xyMinMax:o}},polygon:function(n,t,e,r){var a=[[1/0,-1/0],[1/0,-1/0]],i=te(e,function(o){var s=n?t.pointToData(o,r):t.dataToPoint(o,r);return a[0][0]=Math.min(a[0][0],s[0]),a[1][0]=Math.min(a[1][0],s[1]),a[0][1]=Math.max(a[0][1],s[0]),a[1][1]=Math.max(a[1][1],s[1]),s});return{values:i,xyMinMax:a}}};function Ur(n,t,e,r){var a=e.getAxis(["x","y"][n]),i=Zt(te([0,1],function(s){return t?a.coordToData(a.toLocalCoord(r[s]),!0):a.toGlobalCoord(a.dataToCoord(r[s]))})),o=[];return o[n]=i,o[1-n]=[NaN,NaN],{values:i,xyMinMax:o}}var Xr={lineX:G($r,0),lineY:G($r,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return te(n,function(r,a){return[r[0]-e[0]*t[a][0],r[1]-e[1]*t[a][1]]})}};function $r(n,t,e,r){return[t[0]-r[n]*e[0],t[1]-r[n]*e[1]]}function Qo(n,t){var e=qr(n),r=qr(t),a=[e[0]/r[0],e[1]/r[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}function qr(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var Ut=w,Jo=Pa("toolbox-dataZoom_"),es=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.render=function(e,r,a,i){this._brushController||(this._brushController=new ro(a.getZr()),this._brushController.on("brush",ee(this._onBrush,this)).mount()),ns(e,r,this,i,a),rs(e,r)},t.prototype.onclick=function(e,r,a){ts[a].call(this)},t.prototype.remove=function(e,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var r=e.areas;if(!e.isEnd||!r.length)return;var a={},i=this.ecModel;this._brushController.updateCovers([]);var o=new Fn(ur(this.model),i,{include:["grid"]});o.matchOutputRanges(r,i,function(c,u,v){if(v.type==="cartesian2d"){var f=c.brushType;f==="rect"?(s("x",v,u[0]),s("y",v,u[1])):s({lineX:"x",lineY:"y"}[f],v,u)}}),Yo(i,a),this._dispatchZoomAction(a);function s(c,u,v){var f=u.getAxis(c),h=f.model,g=l(c,h,i),d=g.findRepresentativeAxisProxy(h).getMinMaxSpan();(d.minValueSpan!=null||d.maxValueSpan!=null)&&(v=An(0,v.slice(),f.scale.getExtent(),0,d.minValueSpan,d.maxValueSpan)),g&&(a[g.id]={dataZoomId:g.id,startValue:v[0],endValue:v[1]})}function l(c,u,v){var f;return v.eachComponent({mainType:"dataZoom",subType:"select"},function(h){var g=h.getAxisModel(c,u.componentIndex);g&&(f=h)}),f}},t.prototype._dispatchZoomAction=function(e){var r=[];Ut(e,function(a,i){r.push(ie(a))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(e){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(ne),ts={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(Zo(this.ecModel))}};function ur(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function rs(n,t){n.setIconStatus("back",Xo(t)>1?"emphasis":"normal")}function ns(n,t,e,r,a){var i=e._isZoomActive;r&&r.type==="takeGlobalCursor"&&(i=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),e._isZoomActive=i,n.setIconStatus("zoom",i?"emphasis":"normal");var o=new Fn(ur(n),t,{include:["grid"]}),s=o.makePanelOpts(a,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(s).enableBrush(i&&s.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}Oa("dataZoom",function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(!t||t.get(e)==null)return;var r=t.getModel(e),a=[],i=ur(r),o=vn(n,i);Ut(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),Ut(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,c,u){var v=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:Jo+c+v};f[u]=v,a.push(f)}return a});function as(n){n.registerComponentModel(Lo),n.registerComponentView(Ro),Ye("saveAsImage",Oo),Ye("magicType",ko),Ye("dataView",Fo),Ye("dataZoom",es),Ye("restore",$o),de(Do)}var is=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(tt);function Hn(n){var t=n.get("confine");return t!=null?!!t:n.get("renderMode")==="richText"}function Yn(n){if(Q.domSupported){for(var t=document.documentElement.style,e=0,r=n.length;e<r;e++)if(n[e]in t)return n[e]}}var Zn=Yn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),os=Yn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Un(n,t){if(!n)return t;t=gn(t,!0);var e=n.indexOf(t);return n=e===-1?t:"-"+n.slice(0,e)+"-"+t,n.toLowerCase()}function ss(n,t){var e=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return e?e[t]:null}var ls=Un(os,"transition"),cr=Un(Zn,"transform"),us="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Q.transform3dSupported?"will-change:transform;":"");function cs(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function hs(n,t,e){if(!Z(e)||e==="inside")return"";var r=n.get("backgroundColor"),a=n.get("borderWidth");t=gt(t);var i=cs(e),o=Math.max(Math.round(a)*1.5,6),s="",l=cr+":",c;ce(["left","right"],i)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(c=i==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(c=i==="top"?225:45)+"deg)");var u=c*Math.PI/180,v=o+a,f=v*Math.abs(Math.cos(u))+v*Math.abs(Math.sin(u)),h=Math.round(((f-Math.SQRT2*a)/2+Math.SQRT2*a-(f-v)/2)*100)/100;s+=";"+i+":-"+h+"px";var g=t+" solid "+a+"px;",d=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+r+";"];return'<div style="'+d.join("")+'"></div>'}function fs(n,t){var e="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+e,a="opacity"+r+",visibility"+r;return t||(r=" "+n+"s "+e,a+=Q.transformSupported?","+cr+r:",left"+r+",top"+r),ls+":"+a}function Kr(n,t,e){var r=n.toFixed(0)+"px",a=t.toFixed(0)+"px";if(!Q.transformSupported)return e?"top:"+a+";left:"+r+";":[["top",a],["left",r]];var i=Q.transform3dSupported,o="translate"+(i?"3d":"")+"("+r+","+a+(i?",0":"")+")";return e?"top:0;left:0;"+cr+":"+o+";":[["top",0],["left",0],[Zn,o]]}function vs(n){var t=[],e=n.get("fontSize"),r=n.getTextColor();r&&t.push("color:"+r),t.push("font:"+n.getFont()),e&&t.push("line-height:"+Math.round(e*3/2)+"px");var a=n.get("textShadowColor"),i=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,s=n.get("textShadowOffsetY")||0;return a&&i&&t.push("text-shadow:"+o+"px "+s+"px "+i+"px "+a),w(["decoration","align"],function(l){var c=n.get(l);c&&t.push("text-"+l+":"+c)}),t.join(";")}function gs(n,t,e){var r=[],a=n.get("transitionDuration"),i=n.get("backgroundColor"),o=n.get("shadowBlur"),s=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),v=dn(n,"html"),f=l+"px "+c+"px "+o+"px "+s;return r.push("box-shadow:"+f),t&&a&&r.push(fs(a,e)),i&&r.push("background-color:"+i),w(["width","color","radius"],function(h){var g="border-"+h,d=gn(g),p=n.get(d);p!=null&&r.push(g+":"+p+(h==="color"?"":"px"))}),r.push(vs(u)),v!=null&&r.push("padding:"+cn(v).join("px ")+"px"),r.join(";")+";"}function Qr(n,t,e,r,a){var i=t&&t.painter;if(e){var o=i&&i.getViewportRoot();o&&Na(n,o,e,r,a)}else{n[0]=r,n[1]=a;var s=i&&i.getViewportRootOffset();s&&(n[0]+=s.offsetLeft,n[1]+=s.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var ds=function(){function n(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Q.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var a=this._zr=t.getZr(),i=e.appendTo,o=i&&(Z(i)?document.querySelector(i):Et(i)?i:ue(i)&&i(t.getDom()));Qr(this._styleCoord,a,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(r),this._api=t,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var c=a.handler,u=a.painter.getViewportRoot();ka(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return n.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),r=ss(e,"position"),a=e.style;a.position!=="absolute"&&r!=="absolute"&&(a.position="relative")}var i=t.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this.el.className=t.get("className")||""},n.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,a=r.style,i=this._styleCoord;r.innerHTML?a.cssText=us+gs(t,!this._firstShow,this._longHide)+Kr(i[0],i[1],!0)+("border-color:"+gt(e)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,e,r,a,i){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(Z(i)&&r.get("trigger")==="item"&&!Hn(r)&&(s=hs(r,a,i)),Z(t))o.innerHTML=t+s;else if(t){o.innerHTML="",J(t)||(t=[t]);for(var l=0;l<t.length;l++)Et(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var c=document.createElement("div");c.innerHTML=s,o.appendChild(c)}}},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},n.prototype.moveTo=function(t,e){var r=this._styleCoord;if(Qr(r,this._zr,this._container,t,e),r[0]!=null&&r[1]!=null){var a=this.el.style,i=Kr(r[0],r[1]);w(i,function(o){a[o[0]]=o[1]})}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",Q.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ee(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},n}(),ps=function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),en(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,e,r,a,i){var o=this;vt(t)&&Ba(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new ve({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:dn(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),w(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){o.el.style[c]=r.get(c)}),w(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){o.el.style[c]=s.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),r=Jr(t.style);return[e.width+r.left+r.right,e.height+r.top+r.bottom]},n.prototype.moveTo=function(t,e){var r=this.el;if(r){var a=this._styleCoord;en(a,this._zr,t,e),t=a[0],e=a[1];var i=r.style,o=ge(i.borderWidth||0),s=Jr(i);r.x=t+o+s.left,r.y=e+o+s.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ee(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function ge(n){return Math.max(0,n)}function Jr(n){var t=ge(n.shadowBlur||0),e=ge(n.shadowOffsetX||0),r=ge(n.shadowOffsetY||0);return{left:ge(t-e),right:ge(t+e),top:ge(t-r),bottom:ge(t+r)}}function en(n,t,e,r){n[0]=e,n[1]=r,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var ms=new Te({shape:{x:-1,y:-1,width:2,height:2}}),ys=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,r){if(!(Q.node||!r.getDom())){var a=e.getComponent("tooltip"),i=this._renderMode=za(a.get("renderMode"));this._tooltipContent=i==="richText"?new ps(r):new ds(r,{appendTo:a.get("appendToBody",!0)?"body":a.get("appendTo",!0)})}},t.prototype.render=function(e,r,a){if(!(Q.node||!a.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=r,this._api=a;var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?Ea(this,"_updatePosition",50,"fixRate"):Sr(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel,r=e.get("triggerOn");wi("itemTooltip",this._api,ee(function(a,i,o){r!=="none"&&(r.indexOf(a)>=0?this._tryShow(i,o):a==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,r=this._ecModel,a=this._api,i=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&o.manuallyShowTip(e,r,a,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,r,a,i){if(!(i.from===this.uid||Q.node||!a.getDom())){var o=tn(i,a);this._ticket="";var s=i.dataByCoordSys,l=_s(i,r,a);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&i.x!=null&&i.y!=null){var u=ms;u.x=i.x,u.y=i.y,u.update(),X(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},o)}else if(s)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:s,tooltipOption:i.tooltipOption},o);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(e,r,a,i))return;var v=Ci(i,r),f=v.point[0],h=v.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:v.el,position:i.position,positionDefault:"bottom"},o)}else i.x!=null&&i.y!=null&&(a.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:a.getZr().findHover(i.x,i.y).target},o))}},t.prototype.manuallyHideTip=function(e,r,a,i){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(tn(i,a))},t.prototype._manuallyAxisShowTip=function(e,r,a,i){var o=i.seriesIndex,s=i.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var c=r.getSeriesByIndex(o);if(c){var u=c.getData(),v=Ze([u.getItemModel(s),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(v.get("trigger")==="axis")return a.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:i.position}),!0}}},t.prototype._tryShow=function(e,r){var a=e.target,i=this._tooltipModel;if(i){this._lastX=e.offsetX,this._lastY=e.offsetY;var o=e.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,e);else if(a){var s=X(a);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;Ga(a,function(u){if(X(u).dataIndex!=null)return l=u,!0;if(X(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(e,l,r):c?this._showComponentItemTooltip(e,c,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(e,r){var a=e.get("showDelay");r=ee(r,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(r,a):r()},t.prototype._showAxisTooltip=function(e,r){var a=this._ecModel,i=this._tooltipModel,o=[r.offsetX,r.offsetY],s=Ze([r.tooltipOption],i),l=this._renderMode,c=[],u=wr("section",{blocks:[],noHeader:!0}),v=[],f=new Ct;w(e,function(x){w(x.dataByAxis,function(y){var b=a.getComponent(y.axisDim+"Axis",y.axisIndex),T=y.value;if(!(!b||T==null)){var S=Ai(T,b.axis,a,y.seriesDataIndices,y.valueLabelOpt),A=wr("section",{header:S,noHeader:!Va(S),sortBlocks:!0,blocks:[]});u.blocks.push(A),w(y.seriesDataIndices,function(C){var D=a.getSeriesByIndex(C.seriesIndex),L=C.dataIndexInside,I=D.getDataParams(L);if(!(I.dataIndex<0)){I.axisDim=y.axisDim,I.axisIndex=y.axisIndex,I.axisType=y.axisType,I.axisId=y.axisId,I.axisValue=Di(b.axis,{value:T}),I.axisValueLabel=S,I.marker=f.makeTooltipMarker("item",gt(I.color),l);var R=Cr(D.formatTooltip(L,!0,null)),O=R.frag;if(O){var F=Ze([D],i).get("valueFormatter");A.blocks.push(F?K({valueFormatter:F},O):O)}R.text&&v.push(R.text),c.push(I)}})}})}),u.blocks.reverse(),v.reverse();var h=r.position,g=s.get("order"),d=Ar(u,f,l,g,a.get("useUTC"),s.get("textStyle"));d&&v.unshift(d);var p=l==="richText"?`

`:"<br/>",m=v.join(p);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(e,c)?this._updatePosition(s,h,o[0],o[1],this._tooltipContent,c):this._showTooltipContent(s,m,c,Math.random()+"",o[0],o[1],h,null,f)})},t.prototype._showSeriesItemTooltip=function(e,r,a){var i=this._ecModel,o=X(r),s=o.seriesIndex,l=i.getSeriesByIndex(s),c=o.dataModel||l,u=o.dataIndex,v=o.dataType,f=c.getData(v),h=this._renderMode,g=e.positionDefault,d=Ze([f.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),p=d.get("trigger");if(!(p!=null&&p!=="item")){var m=c.getDataParams(u,v),x=new Ct;m.marker=x.makeTooltipMarker("item",gt(m.color),h);var y=Cr(c.formatTooltip(u,!1,v)),b=d.get("order"),T=d.get("valueFormatter"),S=y.frag,A=S?Ar(T?K({valueFormatter:T},S):S,x,h,b,i.get("useUTC"),d.get("textStyle")):y.text,C="item_"+c.name+"_"+u;this._showOrMove(d,function(){this._showTooltipContent(d,A,m,C,e.offsetX,e.offsetY,e.position,e.target,x)}),a({type:"showTip",dataIndexInside:u,dataIndex:f.getRawIndex(u),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,r,a){var i=this._renderMode==="html",o=X(r),s=o.tooltipConfig,l=s.option||{},c=l.encodeHTMLContent;if(Z(l)){var u=l;l={content:u,formatter:u},c=!0}c&&i&&l.content&&(l=ie(l),l.content=ja(l.content));var v=[l],f=this._ecModel.getComponent(o.componentMainType,o.componentIndex);f&&v.push(f),v.push({formatter:l.content});var h=e.positionDefault,g=Ze(v,this._tooltipModel,h?{position:h}:null),d=g.get("content"),p=Math.random()+"",m=new Ct;this._showOrMove(g,function(){var x=ie(g.get("formatterParams")||{});this._showTooltipContent(g,d,x,p,e.offsetX,e.offsetY,e.position,r,m)}),a({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,r,a,i,o,s,l,c,u){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var v=this._tooltipContent;v.setEnterable(e.get("enterable"));var f=e.get("formatter");l=l||e.get("position");var h=r,g=this._getNearestPoint([o,s],a,e.get("trigger"),e.get("borderColor")),d=g.color;if(f)if(Z(f)){var p=e.ecModel.get("useUTC"),m=J(a)?a[0]:a,x=m&&m.axisType&&m.axisType.indexOf("time")>=0;h=f,x&&(h=Wa(m.axisValue,h,p)),h=Fa(h,a,!0)}else if(ue(f)){var y=ee(function(b,T){b===this._ticket&&(v.setContent(T,u,e,d,l),this._updatePosition(e,l,o,s,v,a,c))},this);this._ticket=i,h=f(a,i,y)}else h=f;v.setContent(h,u,e,d,l),v.show(e,d),this._updatePosition(e,l,o,s,v,a,c)}},t.prototype._getNearestPoint=function(e,r,a,i){if(a==="axis"||J(r))return{color:i||(this._renderMode==="html"?"#fff":"none")};if(!J(r))return{color:i||r.color||r.borderColor}},t.prototype._updatePosition=function(e,r,a,i,o,s,l){var c=this._api.getWidth(),u=this._api.getHeight();r=r||e.get("position");var v=o.getSize(),f=e.get("align"),h=e.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),ue(r)&&(r=r([a,i],s,o.el,g,{viewSize:[c,u],contentSize:v.slice()})),J(r))a=q(r[0],c),i=q(r[1],u);else if(vt(r)){var d=r;d.width=v[0],d.height=v[1];var p=Ne(d,{width:c,height:u});a=p.x,i=p.y,f=null,h=null}else if(Z(r)&&l){var m=Ts(r,g,v,e.get("borderWidth"));a=m[0],i=m[1]}else{var m=xs(a,i,o,c,u,f?null:20,h?null:20);a=m[0],i=m[1]}if(f&&(a-=rn(f)?v[0]/2:f==="right"?v[0]:0),h&&(i-=rn(h)?v[1]/2:h==="bottom"?v[1]:0),Hn(e)){var m=bs(a,i,o,c,u);a=m[0],i=m[1]}o.moveTo(a,i)},t.prototype._updateContentNotChangedOnAxis=function(e,r){var a=this._lastDataByCoordSys,i=this._cbParamsList,o=!!a&&a.length===e.length;return o&&w(a,function(s,l){var c=s.dataByAxis||[],u=e[l]||{},v=u.dataByAxis||[];o=o&&c.length===v.length,o&&w(c,function(f,h){var g=v[h]||{},d=f.seriesDataIndices||[],p=g.seriesDataIndices||[];o=o&&f.value===g.value&&f.axisType===g.axisType&&f.axisId===g.axisId&&d.length===p.length,o&&w(d,function(m,x){var y=p[x];o=o&&m.seriesIndex===y.seriesIndex&&m.dataIndex===y.dataIndex}),i&&w(f.seriesDataIndices,function(m){var x=m.seriesIndex,y=r[x],b=i[x];y&&b&&b.data!==y.data&&(o=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=r,!!o},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,r){Q.node||!r.getDom()||(Sr(this,"_updatePosition"),this._tooltipContent.dispose(),Li("itemTooltip",r))},t.type="tooltip",t}(rt);function Ze(n,t,e){var r=t.ecModel,a;e?(a=new Oe(e,r,r),a=new Oe(t.option,a,r)):a=t;for(var i=n.length-1;i>=0;i--){var o=n[i];o&&(o instanceof Oe&&(o=o.get("tooltip",!0)),Z(o)&&(o={formatter:o}),o&&(a=new Oe(o,a,r)))}return a}function tn(n,t){return n.dispatchAction||ee(t.dispatchAction,t)}function xs(n,t,e,r,a,i,o){var s=e.getSize(),l=s[0],c=s[1];return i!=null&&(n+l+i+2>r?n-=l+i:n+=i),o!=null&&(t+c+o>a?t-=c+o:t+=o),[n,t]}function bs(n,t,e,r,a){var i=e.getSize(),o=i[0],s=i[1];return n=Math.min(n+o,r)-o,t=Math.min(t+s,a)-s,n=Math.max(n,0),t=Math.max(t,0),[n,t]}function Ts(n,t,e,r){var a=e[0],i=e[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,c=t.width,u=t.height;switch(n){case"inside":s=t.x+c/2-a/2,l=t.y+u/2-i/2;break;case"top":s=t.x+c/2-a/2,l=t.y-i-o;break;case"bottom":s=t.x+c/2-a/2,l=t.y+u+o;break;case"left":s=t.x-a-o,l=t.y+u/2-i/2;break;case"right":s=t.x+c+o,l=t.y+u/2-i/2}return[s,l]}function rn(n){return n==="center"||n==="middle"}function _s(n,t,e){var r=Ha(n).queryOptionMap,a=r.keys()[0];if(!(!a||a==="series")){var i=Ya(t,a,r.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}),o=i.models[0];if(o){var s=e.getViewOfComponentModel(o),l;if(s.group.traverse(function(c){var u=X(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:a,componentIndex:o.componentIndex,el:l}}}}function Xn(n){de(Mi),n.registerComponentModel(is),n.registerComponentView(ys),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},zt),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},zt)}var Ss=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(tt),ws=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,a){if(this.group.removeAll(),!!e.get("show")){var i=this.group,o=e.getModel("textStyle"),s=e.getModel("subtextStyle"),l=e.get("textAlign"),c=Ke(e.get("textBaseline"),e.get("textVerticalAlign")),u=new ve({style:Gt(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),v=u.getBoundingRect(),f=e.get("subtext"),h=new ve({style:Gt(s,{text:f,fill:s.getTextColor(),y:v.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=e.get("link"),d=e.get("sublink"),p=e.get("triggerEvent",!0);u.silent=!g&&!p,h.silent=!d&&!p,g&&u.on("click",function(){Dr(g,"_"+e.get("target"))}),d&&h.on("click",function(){Dr(d,"_"+e.get("subtarget"))}),X(u).eventData=X(h).eventData=p?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(u),f&&i.add(h);var m=i.getBoundingRect(),x=e.getBoxLayoutParams();x.width=m.width,x.height=m.height;var y=Ne(x,{width:a.getWidth(),height:a.getHeight()},e.get("padding"));l||(l=e.get("left")||e.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),c||(c=e.get("top")||e.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?y.y+=y.height:c==="middle"&&(y.y+=y.height/2),c=c||"top"),i.x=y.x,i.y=y.y,i.markRedraw();var b={align:l,verticalAlign:c};u.setStyle(b),h.setStyle(b),m=i.getBoundingRect();var T=y.margin,S=e.getItemStyle(["color","opacity"]);S.fill=e.get("backgroundColor");var A=new Te({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:e.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});i.add(A)}},t.type="title",t}(rt);function $n(n){n.registerComponentModel(Ss),n.registerComponentView(ws)}var Cs=function(n,t){if(t==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},Xt=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return t.prototype.init=function(e,r,a){this.mergeDefaultAndTheme(e,a),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),this._updateSelector(e)},t.prototype._updateSelector=function(e){var r=e.selector,a=this.ecModel;r===!0&&(r=e.selector=["all","inverse"]),J(r)&&w(r,function(i,o){Z(i)&&(i={type:i}),r[o]=le(i,Cs(a,i.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var r=!1,a=0;a<e.length;a++){var i=e[a].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var r=[],a=[];e.eachRawSeries(function(l){var c=l.name;a.push(c);var u;if(l.legendVisualProvider){var v=l.legendVisualProvider,f=v.getAllNames();e.isSeriesFiltered(l)||(a=a.concat(f)),f.length?r=r.concat(f):u=!0}else u=!0;u&&Za(l)&&r.push(l.name)}),this._availableNames=a;var i=this.get("data")||r,o=_e(),s=te(i,function(l){return(Z(l)||Jt(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new Oe(l,this,this.ecModel))},this);this._data=$e(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var r=this.option.selected,a=this.get("selectedMode");if(a==="single"){var i=this._data;w(i,function(o){r[o.get("name")]=!1})}r[e]=!0},t.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var r=this.option.selected;r.hasOwnProperty(e)||(r[e]=!0),this[r[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,r=this.option.selected;w(e,function(a){r[a.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,r=this.option.selected;w(e,function(a){var i=a.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},t.prototype.isSelected=function(e){var r=this.option.selected;return!(r.hasOwnProperty(e)&&!r[e])&&ce(this._availableNames,e)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(tt),Me=G,$t=w,ct=et,qn=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return t.prototype.init=function(){this.group.add(this._contentGroup=new ct),this.group.add(this._selectorGroup=new ct),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,r,a){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var o=e.get("align"),s=e.get("orient");(!o||o==="auto")&&(o=e.get("left")==="right"&&s==="vertical"?"right":"left");var l=e.get("selector",!0),c=e.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=s==="horizontal"?"end":"start"),this.renderInner(o,e,r,a,l,s,c);var u=e.getBoxLayoutParams(),v={width:a.getWidth(),height:a.getHeight()},f=e.get("padding"),h=Ne(u,v,f),g=this.layoutInner(e,o,h,i,l,c),d=Ne(Ee({width:g.width,height:g.height},u),v,f);this.group.x=d.x-g.x,this.group.y=d.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Vn(g,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,r,a,i,o,s,l){var c=this.getContentGroup(),u=_e(),v=r.get("selectedMode"),f=[];a.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),$t(r.getData(),function(h,g){var d=h.get("name");if(!this.newlineDisabled&&(d===""||d===`
`)){var p=new ct;p.newline=!0,c.add(p);return}var m=a.getSeriesByName(d)[0];if(!u.get(d))if(m){var x=m.getData(),y=x.getVisual("legendLineStyle")||{},b=x.getVisual("legendIcon"),T=x.getVisual("style"),S=this._createItem(m,d,g,h,r,e,y,T,b,v,i);S.on("click",Me(nn,d,null,i,f)).on("mouseover",Me(qt,m.name,null,i,f)).on("mouseout",Me(Kt,m.name,null,i,f)),a.ssr&&S.eachChild(function(A){var C=X(A);C.seriesIndex=m.seriesIndex,C.dataIndex=g,C.ssrType="legend"}),u.set(d,!0)}else a.eachRawSeries(function(A){if(!u.get(d)&&A.legendVisualProvider){var C=A.legendVisualProvider;if(!C.containName(d))return;var D=C.indexOfName(d),L=C.getItemVisual(D,"style"),I=C.getItemVisual(D,"legendIcon"),R=Ua(L.fill);R&&R[3]===0&&(R[3]=.2,L=K(K({},L),{fill:Xa(R,"rgba")}));var O=this._createItem(A,d,g,h,r,e,{},L,I,v,i);O.on("click",Me(nn,null,d,i,f)).on("mouseover",Me(qt,null,d,i,f)).on("mouseout",Me(Kt,null,d,i,f)),a.ssr&&O.eachChild(function(F){var E=X(F);E.seriesIndex=A.seriesIndex,E.dataIndex=g,E.ssrType="legend"}),u.set(d,!0)}},this)},this),o&&this._createSelector(o,r,i,s,l)},t.prototype._createSelector=function(e,r,a,i,o){var s=this.getSelectorGroup();$t(e,function(c){var u=c.type,v=new ve({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(v);var f=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);pn(v,{normal:f,emphasis:h},{defaultText:c.title}),Lr(v)})},t.prototype._createItem=function(e,r,a,i,o,s,l,c,u,v,f){var h=e.visualDrawType,g=o.get("itemWidth"),d=o.get("itemHeight"),p=o.isSelected(r),m=i.get("symbolRotate"),x=i.get("symbolKeepAspect"),y=i.get("icon");u=y||u||"roundRect";var b=As(u,i,l,c,h,p,f),T=new ct,S=i.getModel("textStyle");if(ue(e.getLegendIcon)&&(!y||y==="inherit"))T.add(e.getLegendIcon({itemWidth:g,itemHeight:d,icon:u,iconRotate:m,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}));else{var A=y==="inherit"&&e.getData().getVisual("symbol")?m==="inherit"?e.getData().getVisual("symbolRotate"):m:0;T.add(Ds({itemWidth:g,itemHeight:d,icon:u,iconRotate:A,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:x}))}var C=s==="left"?g+5:-5,D=s,L=o.get("formatter"),I=r;Z(L)&&L?I=L.replace("{name}",r??""):ue(L)&&(I=L(r));var R=p?S.getTextColor():i.get("inactiveColor");T.add(new ve({style:Gt(S,{text:I,x:C,y:d/2,fill:R,align:D,verticalAlign:"middle"},{inheritColor:R})}));var O=new Te({shape:T.getBoundingRect(),style:{fill:"transparent"}}),F=i.getModel("tooltip");return F.get("show")&&fn({el:O,componentModel:o,itemName:r,itemTooltipOption:F.option}),T.add(O),T.eachChild(function(E){E.silent=!0}),O.silent=!v,this.getContentGroup().add(T),Lr(T),T.__legendDataIndex=a,T},t.prototype.layoutInner=function(e,r,a,i,o,s){var l=this.getContentGroup(),c=this.getSelectorGroup();ke(e.get("orient"),l,e.get("itemGap"),a.width,a.height);var u=l.getBoundingRect(),v=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),o){ke("horizontal",c,e.get("selectorItemGap",!0));var f=c.getBoundingRect(),h=[-f.x,-f.y],g=e.get("selectorButtonGap",!0),d=e.getOrient().index,p=d===0?"width":"height",m=d===0?"height":"width",x=d===0?"y":"x";s==="end"?h[d]+=u[p]+g:v[d]+=f[p]+g,h[1-d]+=u[m]/2-f[m]/2,c.x=h[0],c.y=h[1],l.x=v[0],l.y=v[1];var y={x:0,y:0};return y[p]=u[p]+g+f[p],y[m]=Math.max(u[m],f[m]),y[x]=Math.min(0,f[x]+h[1-d]),y}else return l.x=v[0],l.y=v[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(rt);function As(n,t,e,r,a,i,o){function s(p,m){p.lineWidth==="auto"&&(p.lineWidth=m.lineWidth>0?2:0),$t(p,function(x,y){p[y]==="inherit"&&(p[y]=m[y])})}var l=t.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",v=l.getShallow("decal");c.decal=!v||v==="inherit"?r.decal:$a(v,o),c.fill==="inherit"&&(c.fill=r[a]),c.stroke==="inherit"&&(c.stroke=r[u]),c.opacity==="inherit"&&(c.opacity=(a==="fill"?r:e).opacity),s(c,r);var f=t.getModel("lineStyle"),h=f.getLineStyle();if(s(h,e),c.fill==="auto"&&(c.fill=r.fill),c.stroke==="auto"&&(c.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!i){var g=t.get("inactiveBorderWidth"),d=c[u];c.lineWidth=g==="auto"?r.lineWidth>0&&d?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:c,lineStyle:h}}function Ds(n){var t=n.icon||"roundRect",e=qa(t,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return e.setStyle(n.itemStyle),e.rotation=(n.iconRotate||0)*Math.PI/180,e.setOrigin([n.itemWidth/2,n.itemHeight/2]),t.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function nn(n,t,e,r){Kt(n,t,e,r),e.dispatchAction({type:"legendToggleSelect",name:n??t}),qt(n,t,e,r)}function Kn(n){for(var t=n.getZr().storage.getDisplayList(),e,r=0,a=t.length;r<a&&!(e=t[r].states.emphasis);)r++;return e&&e.hoverLayer}function qt(n,t,e,r){Kn(e)||e.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:r})}function Kt(n,t,e,r){Kn(e)||e.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:r})}function Ls(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(e){for(var r=0;r<t.length;r++)if(!t[r].isSelected(e.name))return!1;return!0})}function Ue(n,t,e){var r={},a=n==="toggleSelected",i;return e.eachComponent("legend",function(o){a&&i!=null?o[i?"select":"unSelect"](t.name):n==="allSelect"||n==="inverseSelect"?o[n]():(o[n](t.name),i=o.isSelected(t.name));var s=o.getData();w(s,function(l){var c=l.get("name");if(!(c===`
`||c==="")){var u=o.isSelected(c);r.hasOwnProperty(c)?r[c]=r[c]&&u:r[c]=u}})}),n==="allSelect"||n==="inverseSelect"?{selected:r}:{name:t.name,selected:r}}function Ms(n){n.registerAction("legendToggleSelect","legendselectchanged",G(Ue,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",G(Ue,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",G(Ue,"inverseSelect")),n.registerAction("legendSelect","legendselected",G(Ue,"select")),n.registerAction("legendUnSelect","legendunselected",G(Ue,"unSelect"))}function Qn(n){n.registerComponentModel(Xt),n.registerComponentView(qn),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Ls),n.registerSubTypeDefaulter("legend",function(){return"plain"}),Ms(n)}var Rs=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,r,a){var i=Ka(e);n.prototype.init.call(this,e,r,a),an(this,e,i)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),an(this,this.option,e)},t.type="legend.scroll",t.defaultOption=Qa(Xt.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(Xt);function an(n,t,e){var r=n.getOrient(),a=[1,1];a[r.index]=0,Ja(t,e,{type:"box",ignoreSize:!!a})}var on=et,Pt=["width","height"],kt=["x","y"],Is=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new on),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new on)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,r,a,i,o,s,l){var c=this;n.prototype.renderInner.call(this,e,r,a,i,o,s,l);var u=this._controllerGroup,v=r.get("pageIconSize",!0),f=J(v)?v:[v,v];g("pagePrev",0);var h=r.getModel("pageTextStyle");u.add(new ve({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(d,p){var m=d+"DataIndex",x=hn(r.get("pageIcons",!0)[r.getOrient().name][p],{onclick:ee(c._pageGo,c,m,r,i)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});x.name=d,u.add(x)}},t.prototype.layoutInner=function(e,r,a,i,o,s){var l=this.getSelectorGroup(),c=e.getOrient().index,u=Pt[c],v=kt[c],f=Pt[1-c],h=kt[1-c];o&&ke("horizontal",l,e.get("selectorItemGap",!0));var g=e.get("selectorButtonGap",!0),d=l.getBoundingRect(),p=[-d.x,-d.y],m=ie(a);o&&(m[u]=a[u]-d[u]-g);var x=this._layoutContentAndController(e,i,m,c,u,f,h,v);if(o){if(s==="end")p[c]+=x[u]+g;else{var y=d[u]+g;p[c]-=y,x[v]-=y}x[u]+=d[u]+g,p[1-c]+=x[h]+x[f]/2-d[f]/2,x[f]=Math.max(x[f],d[f]),x[h]=Math.min(x[h],d[h]+p[1-c]),l.x=p[0],l.y=p[1],l.markRedraw()}return x},t.prototype._layoutContentAndController=function(e,r,a,i,o,s,l,c){var u=this.getContentGroup(),v=this._containerGroup,f=this._controllerGroup;ke(e.get("orient"),u,e.get("itemGap"),i?a.width:null,i?null:a.height),ke("horizontal",f,e.get("pageButtonItemGap",!0));var h=u.getBoundingRect(),g=f.getBoundingRect(),d=this._showController=h[o]>a[o],p=[-h.x,-h.y];r||(p[i]=u[c]);var m=[0,0],x=[-g.x,-g.y],y=Ke(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(d){var b=e.get("pageButtonPosition",!0);b==="end"?x[i]+=a[o]-g[o]:m[i]+=g[o]+y}x[1-i]+=h[s]/2-g[s]/2,u.setPosition(p),v.setPosition(m),f.setPosition(x);var T={x:0,y:0};if(T[o]=d?a[o]:h[o],T[s]=Math.max(h[s],g[s]),T[l]=Math.min(0,g[l]+x[1-i]),v.__rectSize=a[o],d){var S={x:0,y:0};S[o]=Math.max(a[o]-g[o]-y,0),S[s]=T[s],v.setClipPath(new Te({shape:S})),v.__rectSize=S[o]}else f.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(e);return A.pageIndex!=null&&Qe(u,{x:A.contentPosition[0],y:A.contentPosition[1]},d?e:null),this._updatePageInfoView(e,A),T},t.prototype._pageGo=function(e,r,a){var i=this._getPageInfo(r)[e];i!=null&&a.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},t.prototype._updatePageInfoView=function(e,r){var a=this._controllerGroup;w(["pagePrev","pageNext"],function(u){var v=u+"DataIndex",f=r[v]!=null,h=a.childOfName(u);h&&(h.setStyle("fill",f?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var i=a.childOfName("pageText"),o=e.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,c=r.pageCount;i&&o&&i.setStyle("text",Z(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):o({current:l,total:c}))},t.prototype._getPageInfo=function(e){var r=e.get("scrollDataIndex",!0),a=this.getContentGroup(),i=this._containerGroup.__rectSize,o=e.getOrient().index,s=Pt[o],l=kt[o],c=this._findTargetItemIndex(r),u=a.children(),v=u[c],f=u.length,h=f?1:0,g={contentPosition:[a.x,a.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return g;var d=b(v);g.contentPosition[o]=-d.s;for(var p=c+1,m=d,x=d,y=null;p<=f;++p)y=b(u[p]),(!y&&x.e>m.s+i||y&&!T(y,m.s))&&(x.i>m.i?m=x:m=y,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),x=y;for(var p=c-1,m=d,x=d,y=null;p>=-1;--p)y=b(u[p]),(!y||!T(x,y.s))&&m.i<x.i&&(x=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=y;return g;function b(S){if(S){var A=S.getBoundingRect(),C=A[l]+S[l];return{s:C,e:C+A[s],i:S.__legendDataIndex}}}function T(S,A){return S.e>=A&&S.s<=A+i}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var r,a=this.getContentGroup(),i;return a.eachChild(function(o,s){var l=o.__legendDataIndex;i==null&&l!=null&&(i=s),l===e&&(r=s)}),r??i},t.type="legend.scroll",t}(qn);function Os(n){n.registerAction("legendScroll","legendscroll",function(t,e){var r=t.scrollDataIndex;r!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(a){a.setScrollDataIndex(r)})})}function Ps(n){de(Qn),n.registerComponentModel(Rs),n.registerComponentView(Is),Os(n)}function Jn(n){de(Qn),de(Ps)}var sn=Math.PI*2,ht=Math.PI/180;function ea(n,t){return Ne(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function ta(n,t){var e=ea(n,t),r=n.get("center"),a=n.get("radius");J(a)||(a=[0,a]);var i=q(e.width,t.getWidth()),o=q(e.height,t.getHeight()),s=Math.min(i,o),l=q(a[0],s/2),c=q(a[1],s/2),u,v,f=n.coordinateSystem;if(f){var h=f.dataToPoint(r);u=h[0]||0,v=h[1]||0}else J(r)||(r=[r,r]),u=q(r[0],i)+e.x,v=q(r[1],o)+e.y;return{cx:u,cy:v,r0:l,r:c}}function ks(n,t,e){t.eachSeriesByType(n,function(r){var a=r.getData(),i=a.mapDimension("value"),o=ea(r,e),s=ta(r,e),l=s.cx,c=s.cy,u=s.r,v=s.r0,f=-r.get("startAngle")*ht,h=r.get("endAngle"),g=r.get("padAngle")*ht;h=h==="auto"?f-sn:-h*ht;var d=r.get("minAngle")*ht,p=d+g,m=0;a.each(i,function($){!isNaN($)&&m++});var x=a.getSum(i),y=Math.PI/(x||m)*2,b=r.get("clockwise"),T=r.get("roseType"),S=r.get("stillShowZeroSum"),A=a.getDataExtent(i);A[0]=0;var C=b?1:-1,D=[f,h],L=C*g/2;ei(D,!b),f=D[0],h=D[1];var I=ra(r);I.startAngle=f,I.endAngle=h,I.clockwise=b;var R=Math.abs(h-f),O=R,F=0,E=f;if(a.setLayout({viewRect:o,r:u}),a.each(i,function($,U){var N;if(isNaN($)){a.setItemLayout(U,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:l,cy:c,r0:v,r:T?NaN:u});return}T!=="area"?N=x===0&&S?y:$*y:N=R/m,N<p?(N=p,O-=p):F+=$;var W=E+C*N,V=0,z=0;g>N?(V=E+C*N/2,z=V):(V=E+L,z=W-L),a.setItemLayout(U,{angle:N,startAngle:V,endAngle:z,clockwise:b,cx:l,cy:c,r0:v,r:T?Re($,A,[v,u]):u}),E=W}),O<sn&&m)if(O<=.001){var he=R/m;a.each(i,function($,U){if(!isNaN($)){var N=a.getItemLayout(U);N.angle=he;var W=0,V=0;he<g?(W=f+C*(U+1/2)*he,V=W):(W=f+C*U*he+L,V=f+C*(U+1)*he-L),N.startAngle=W,N.endAngle=V}})}else y=O/F,E=f,a.each(i,function($,U){if(!isNaN($)){var N=a.getItemLayout(U),W=N.angle===p?p:$*y,V=0,z=0;W<g?(V=E+C*W/2,z=V):(V=E+L,z=E+C*W-L),N.startAngle=V,N.endAngle=z,E+=C*W}})})}var ra=Ge();function Ns(n){return{seriesType:n,reset:function(t,e){var r=e.findComponents({mainType:"legend"});if(!(!r||!r.length)){var a=t.getData();a.filterSelf(function(i){for(var o=a.getName(i),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Bs=Math.PI/180;function ln(n,t,e,r,a,i,o,s,l,c){if(n.length<2)return;function u(d){for(var p=d.rB,m=p*p,x=0;x<d.list.length;x++){var y=d.list[x],b=Math.abs(y.label.y-e),T=r+y.len,S=T*T,A=Math.sqrt((1-Math.abs(b*b/m))*S),C=t+(A+y.len2)*a,D=C-y.label.x,L=y.targetTextWidth-D*a;na(y,L,!0),y.label.x=C}}function v(d){for(var p={list:[],maxY:0},m={list:[],maxY:0},x=0;x<d.length;x++)if(d[x].labelAlignTo==="none"){var y=d[x],b=y.label.y>e?m:p,T=Math.abs(y.label.y-e);if(T>=b.maxY){var S=y.label.x-t-y.len2*a,A=r+y.len,C=Math.abs(S)<A?Math.sqrt(T*T/(1-S*S/A/A)):A;b.rB=C,b.maxY=T}b.list.push(y)}u(p),u(m)}for(var f=n.length,h=0;h<f;h++)if(n[h].position==="outer"&&n[h].labelAlignTo==="labelLine"){var g=n[h].label.x-c;n[h].linePoints[1][0]+=g,n[h].label.x=c}yn(n,l,l+o)&&v(n)}function zs(n,t,e,r,a,i,o,s){for(var l=[],c=[],u=Number.MAX_VALUE,v=-Number.MAX_VALUE,f=0;f<n.length;f++){var h=n[f].label;Nt(n[f])||(h.x<t?(u=Math.min(u,h.x),l.push(n[f])):(v=Math.max(v,h.x),c.push(n[f])))}for(var f=0;f<n.length;f++){var g=n[f];if(!Nt(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var h=g.label,d=g.linePoints,p=void 0;g.labelAlignTo==="edge"?h.x<t?p=d[2][0]-g.labelDistance-o-g.edgeDistance:p=o+a-g.edgeDistance-d[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?h.x<t?p=u-o-g.bleedMargin:p=o+a-v-g.bleedMargin:h.x<t?p=h.x-o-g.bleedMargin:p=o+a-h.x-g.bleedMargin,g.targetTextWidth=p,na(g,p)}}ln(c,t,e,r,1,a,i,o,s,v),ln(l,t,e,r,-1,a,i,o,s,u);for(var f=0;f<n.length;f++){var g=n[f];if(!Nt(g)&&g.linePoints){var h=g.label,d=g.linePoints,m=g.labelAlignTo==="edge",x=h.style.padding,y=x?x[1]+x[3]:0,b=h.style.backgroundColor?0:y,T=g.rect.width+b,S=d[1][0]-d[2][0];m?h.x<t?d[2][0]=o+g.edgeDistance+T+g.labelDistance:d[2][0]=o+a-g.edgeDistance-T-g.labelDistance:(h.x<t?d[2][0]=h.x+g.labelDistance:d[2][0]=h.x-g.labelDistance,d[1][0]=d[2][0]+S),d[1][1]=d[2][1]=h.y}}}function na(n,t,e){if(e===void 0&&(e=!1),n.labelStyleWidth==null){var r=n.label,a=r.style,i=n.rect,o=a.backgroundColor,s=a.padding,l=s?s[1]+s[3]:0,c=a.overflow,u=i.width+(o?0:l);if(t<u||e){var v=i.height;if(c&&c.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var f=r.getBoundingRect();r.setStyle("width",Math.ceil(f.width)),r.setStyle("backgroundColor",o)}else{var h=t-l,g=t<u?h:e?h>n.unconstrainedWidth?null:h:null;r.setStyle("width",g)}var d=r.getBoundingRect();i.width=d.width;var p=(r.style.margin||0)+2.1;i.height=d.height+p,i.y-=(i.height-v)/2}}}function Nt(n){return n.position==="center"}function Es(n){var t=n.getData(),e=[],r,a,i=!1,o=(n.get("minShowLabelAngle")||0)*Bs,s=t.getLayout("viewRect"),l=t.getLayout("r"),c=s.width,u=s.x,v=s.y,f=s.height;function h(S){S.ignore=!0}function g(S){if(!S.ignore)return!0;for(var A in S.states)if(S.states[A].ignore===!1)return!0;return!1}t.each(function(S){var A=t.getItemGraphicEl(S),C=A.shape,D=A.getTextContent(),L=A.getTextGuideLine(),I=t.getItemModel(S),R=I.getModel("label"),O=R.get("position")||I.get(["emphasis","label","position"]),F=R.get("distanceToLabelLine"),E=R.get("alignTo"),he=q(R.get("edgeDistance"),c),$=R.get("bleedMargin"),U=I.getModel("labelLine"),N=U.get("length");N=q(N,c);var W=U.get("length2");if(W=q(W,c),Math.abs(C.endAngle-C.startAngle)<o){w(D.states,h),D.ignore=!0,L&&(w(L.states,h),L.ignore=!0);return}if(g(D)){var V=(C.startAngle+C.endAngle)/2,z=Math.cos(V),pe=Math.sin(V),Ve,nt,hr,at;r=C.cx,a=C.cy;var Ce=O==="inside"||O==="inner";if(O==="center")Ve=C.cx,nt=C.cy,at="center";else{var Tt=(Ce?(C.r+C.r0)/2*z:C.r*z)+r,_t=(Ce?(C.r+C.r0)/2*pe:C.r*pe)+a;if(Ve=Tt+z*3,nt=_t+pe*3,!Ce){var fr=Tt+z*(N+l-C.r),vr=_t+pe*(N+l-C.r),gr=fr+(z<0?-1:1)*W,dr=vr;E==="edge"?Ve=z<0?u+he:u+c-he:Ve=gr+(z<0?-F:F),nt=dr,hr=[[Tt,_t],[fr,vr],[gr,dr]]}at=Ce?"center":E==="edge"?z>0?"right":"left":z>0?"left":"right"}var je=Math.PI,Ae=0,We=R.get("rotate");if(Jt(We))Ae=We*(je/180);else if(O==="center")Ae=0;else if(We==="radial"||We===!0){var ia=z<0?-V+je:-V;Ae=ia}else if(We==="tangential"&&O!=="outside"&&O!=="outer"){var De=Math.atan2(z,pe);De<0&&(De=je*2+De);var oa=pe>0;oa&&(De=je+De),Ae=De-je}if(i=!!Ae,D.x=Ve,D.y=nt,D.rotation=Ae,D.setStyle({verticalAlign:"middle"}),Ce){D.setStyle({align:at});var St=D.states.select;St&&(St.x+=D.x,St.y+=D.y)}else{var Fe=D.getBoundingRect().clone();Fe.applyTransform(D.getComputedTransform());var pr=(D.style.margin||0)+2.1;Fe.y-=pr/2,Fe.height+=pr,e.push({label:D,labelLine:L,position:O,len:N,len2:W,minTurnAngle:U.get("minTurnAngle"),maxSurfaceAngle:U.get("maxSurfaceAngle"),surfaceNormal:new j(z,pe),linePoints:hr,textAlign:at,labelDistance:F,labelAlignTo:E,edgeDistance:he,bleedMargin:$,rect:Fe,unconstrainedWidth:Fe.width,labelStyleWidth:D.style.width})}A.setTextConfig({inside:Ce})}}),!i&&n.get("avoidLabelOverlap")&&zs(e,r,a,l,c,f,u,v);for(var d=0;d<e.length;d++){var p=e[d],m=p.label,x=p.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:p.textAlign}),y&&(w(m.states,h),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(x){var T=p.linePoints;y||!T?(w(x.states,h),x.ignore=!0):(Tn(T,p.minTurnAngle),Gi(T,p.surfaceNormal,p.maxSurfaceAngle),x.setShape({points:T}),m.__hostTarget.textGuideLineConfig={anchor:new j(T[0][0],T[0][1])})}}}var Gs=function(n){k(t,n);function t(e,r,a){var i=n.call(this)||this;i.z2=2;var o=new ve;return i.setTextContent(o),i.updateData(e,r,a,!0),i}return t.prototype.updateData=function(e,r,a,i){var o=this,s=e.hostModel,l=e.getItemModel(r),c=l.getModel("emphasis"),u=e.getItemLayout(r),v=K(st(l.getModel("itemStyle"),u,!0),u);if(isNaN(v.startAngle)){o.setShape(v);return}if(i){o.setShape(v);var f=s.getShallow("animationType");s.ecModel.ssr?(qe(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=v.cx,o.originY=v.cy):f==="scale"?(o.shape.r=u.r0,qe(o,{shape:{r:u.r}},s,r)):a!=null?(o.setShape({startAngle:a,endAngle:a}),qe(o,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},s,r)):(o.shape.endAngle=u.startAngle,Qe(o,{shape:{endAngle:u.endAngle}},s,r))}else ti(o),Qe(o,{shape:v},s,r);o.useStyle(e.getItemVisual(r,"style")),ri(o,l);var h=(u.startAngle+u.endAngle)/2,g=s.get("selectedOffset"),d=Math.cos(h)*g,p=Math.sin(h)*g,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,e,r),o.ensureState("emphasis").shape=K({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},st(c.getModel("itemStyle"),u)),K(o.ensureState("select"),{x:d,y:p,shape:st(l.getModel(["select","itemStyle"]),u)}),K(o.ensureState("blur"),{shape:st(l.getModel(["blur","itemStyle"]),u)});var x=o.getTextGuideLine(),y=o.getTextContent();x&&K(x.ensureState("select"),{x:d,y:p}),K(y.ensureState("select"),{x:d,y:p}),ni(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype._updateLabel=function(e,r,a){var i=this,o=r.getItemModel(a),s=o.getModel("labelLine"),l=r.getItemVisual(a,"style"),c=l&&l.fill,u=l&&l.opacity;pn(i,ai(o),{labelFetcher:r.hostModel,labelDataIndex:a,inheritColor:c,defaultOpacity:u,defaultText:e.getFormattedLabel(a,"normal")||r.getName(a)});var v=i.getTextContent();i.setTextConfig({position:null,rotation:null}),v.attr({z2:10});var f=e.get(["label","position"]);if(f!=="outside"&&f!=="outer")i.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new Qt,this.setTextGuideLine(h)),_n(this,Sn(o),{stroke:c,opacity:ii(s.get(["lineStyle","opacity"]),u,1)})}},t}(mn),Vs=function(n){k(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.render=function(e,r,a,i){var o=e.getData(),s=this._data,l=this.group,c;if(!s&&o.count()>0){for(var u=o.getItemLayout(0),v=1;isNaN(u&&u.startAngle)&&v<o.count();++v)u=o.getItemLayout(v);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&e.get("showEmptyCircle")){var f=ra(e),h=new mn({shape:K(ta(e,a),f)});h.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,l.add(h)}o.diff(s).add(function(g){var d=new Gs(o,g,c);o.setItemGraphicEl(g,d),l.add(d)}).update(function(g,d){var p=s.getItemGraphicEl(d);p.updateData(o,g,c),p.off("click"),l.add(p),o.setItemGraphicEl(g,p)}).remove(function(g){var d=s.getItemGraphicEl(g);oi(d,e,g)}).execute(),Es(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,r){var a=r.getData(),i=a.getItemLayout(0);if(i){var o=e[0]-i.cx,s=e[1]-i.cy,l=Math.sqrt(o*o+s*s);return l<=i.r&&l>=i.r0}},t.type="pie",t}(si);function js(n,t,e){t=J(t)&&{coordDimensions:t}||K({encodeDefine:n.getEncode()},t);var r=n.getSource(),a=Ri(r,t).dimensions,i=new Ii(a,n);return i.initData(r,e),i}var Ws=function(){function n(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},n.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},n.prototype.getItemVisual=function(t,e){var r=this._getDataWithEncodedVisual();return r.getItemVisual(t,e)},n}(),Fs=Ge(),Hs=function(n){k(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ws(ee(this.getData,this),ee(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return js(this,{coordDimensions:["value"],encodeDefaulter:G(li,this)})},t.prototype.getDataParams=function(e){var r=this.getData(),a=Fs(r),i=a.seats;if(!i){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),i=a.seats=ui(o,r.hostModel.get("percentPrecision"))}var s=n.prototype.getDataParams.call(this,e);return s.percent=i[e]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(e){ci(e,"labelLine",["show"]);var r=e.labelLine,a=e.emphasis.labelLine;r.show=r.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(hi);function Ys(n){return{seriesType:n,reset:function(t,e){var r=t.getData();r.filterSelf(function(a){var i=r.mapDimension("value"),o=r.get(i,a);return!(Jt(o)&&!isNaN(o)&&o<0)})}}}function aa(n){n.registerChartView(Vs),n.registerSeriesModel(Hs),fi("pie",n.registerAction),n.registerLayout(G(ks,"pie")),n.registerProcessor(Ns("pie")),n.registerProcessor(Ys("pie"))}de([$n,Xn,Jn,aa,er,wn]);const Zs=({data:n})=>{const t=be.useRef(null),e=(()=>{const r=new Date;return`${r.getDate().toString().padStart(2,"0")}/${(r.getMonth()+1).toString().padStart(2,"0")}/${r.getFullYear()}`})();return be.useEffect(()=>{const r=t.current,a=tr(r),i={title:{text:"Tổng doanh thu - Đơn đặt hàng",subtext:`Ngày ${e}`,left:"center"},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},series:[{name:"Access From",type:"pie",radius:"50%",data:n,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};return a.setOption(i),()=>{a.dispose()}},[]),_.jsx("div",{ref:t,style:{width:"100%",height:"500px"}})};de([$n,as,Xn,Jn,aa,er,wn]);const Us=({data:n})=>{const t=be.useRef(null);function e(){const r=new Date,a=r.getDay()||7,i=new Date(r);i.setDate(r.getDate()-a+1);const o=new Date(i);o.setDate(i.getDate()+6);const s=l=>{const c=l.getDate(),u=l.getMonth()+1;return`${c}/${u}`};return`${s(i)} - ${s(o)}`}return be.useEffect(()=>{if(t.current){const r=tr(t.current),a={title:{text:"Tổng doanh thu tuần này",subtext:`Ngày ${e()}`,left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",top:"bottom"},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},series:[{name:"Area Mode",type:"pie",radius:[20,140],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:5},data:n}]};return r.setOption(a),()=>{r.dispose()}}},[]),_.jsx("div",{ref:t,style:{width:"100%",height:"500px"}})};de([Oi,Pi,er]);const Xs=({data:n})=>{const t=be.useRef(null);return be.useEffect(()=>{const e=t.current,r=tr(e),a={xAxis:{type:"category",data:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"]},yAxis:{type:"value"},series:[{data:n,type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]};return a&&r.setOption(a),()=>{r.dispose()}},[]),_.jsx("div",{ref:t,style:{height:"600px"}})},gl=()=>{var o,s,l,c,u,v,f,h,g,d,p,m,x,y,b,T,S;const{token:{colorPrimary:n}}=sa.useToken(),t=la(),{revenue:e,loading:r}=ua(A=>A.revenue),a=((o=e==null?void 0:e.revenue)==null?void 0:o.dailyRevenues)||[],i=["Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7","Chủ nhật"];return be.useEffect(()=>{r&&t(ca())},[]),_.jsx(vi,{title:"Trang chủ",header:"TRANG CHỦ",children:_.jsxs(gi,{gutter:[24,24],className:"overflow-hidden",children:[_.jsx(me,{span:24,sm:{span:12},xl:{span:6},children:_.jsxs(ye,{loading:r,className:"ant-card-pro h-full",title:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx(P.Title,{level:4,className:"!mb-0",children:"Tổng Doanh Thu"}),_.jsx(it,{style:{backgroundColor:n},icon:_.jsx(di,{})})]}),bordered:!1,children:[_.jsx(P.Title,{className:"fw-bold",level:2,children:At((s=e==null?void 0:e.revenue)==null?void 0:s.totalRevenueAllTime)}),_.jsx(P.Title,{level:5,className:"!mb-0",children:"Tổng doanh thu tuần này"}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx(P.Title,{level:4,type:"danger",className:"!my-2",children:At((l=e==null?void 0:e.revenue)==null?void 0:l.weeklyRevenue)}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsx(P.Text,{className:"flex items-center gap-2 !mt-0",type:"success",children:((c=e==null?void 0:e.revenue)==null?void 0:c.revenueDifference)>0?_.jsxs(_.Fragment,{children:[" + ",At((u=e==null?void 0:e.revenue)==null?void 0:u.revenueDifference)," ",_.jsx(ot,{size:16})]}):_.jsx(_.Fragment,{})})})]})]})}),_.jsx(me,{span:24,sm:{span:12},xl:{span:6},children:_.jsxs(ye,{loading:r,className:"ant-card-pro h-full",title:_.jsx(_.Fragment,{children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx(P.Title,{level:4,className:"!mb-0",children:"Tổng Đơn Đặt Hàng"}),_.jsx(it,{style:{backgroundColor:n},icon:_.jsx(pi,{})})]})}),bordered:!1,children:[_.jsxs(P.Title,{className:"fw-bold",level:2,children:[(v=e==null?void 0:e.orders)==null?void 0:v.totalOrdersWithStatus," Đơn đặt hàng"]}),_.jsx(P.Title,{level:5,className:"!mb-0",children:"Tổng đơn hàng tuần này"}),_.jsxs("div",{className:"flex justify-between",children:[_.jsxs(P.Title,{level:4,type:"danger",className:"!my-2",children:[(f=e==null?void 0:e.orders)==null?void 0:f.totalOrdersThisWeekWithStatus," Đơn"]}),((h=e==null?void 0:e.orders)==null?void 0:h.orderDifferenceWithStatus)>0?_.jsx(_.Fragment,{children:_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs(P.Text,{className:"flex items-center gap-2 !mt-0",type:"success",children:["+ ",(g=e==null?void 0:e.orders)==null?void 0:g.orderDifferenceWithStatus," Đơn",_.jsx(ot,{size:16})]})})}):_.jsx(_.Fragment,{})]})]})}),_.jsx(me,{span:24,sm:{span:12},xl:{span:6},children:_.jsxs(ye,{loading:r,className:"ant-card-pro h-full",title:_.jsx(_.Fragment,{children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx(P.Title,{level:4,className:"!mb-0",children:"Truy Cập Website"}),_.jsx(it,{style:{backgroundColor:n},icon:_.jsx(mi,{})})]})}),bordered:!1,children:[_.jsx(P.Title,{className:"fw-bold",level:2,children:" --- "}),_.jsx(P.Title,{level:5,className:"!mb-0",children:"Tổng lượng truy cập tuần này"}),_.jsxs("div",{className:"flex justify-between",children:[_.jsx(P.Title,{level:4,type:"danger",className:"!my-2",children:" --- "}),_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs(P.Text,{className:"flex items-center gap-2 !mt-0",type:"success",children:["---",_.jsx(ot,{size:16})]})})]})]})}),_.jsx(me,{span:24,sm:{span:12},xl:{span:6},children:_.jsxs(ye,{loading:r,className:"ant-card-pro h-full",title:_.jsx(_.Fragment,{children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx(P.Title,{level:4,className:"!mb-0",children:"Người Dùng"}),_.jsx(it,{style:{backgroundColor:n},icon:_.jsx(yi,{})})]})}),bordered:!1,children:[_.jsxs(P.Title,{className:"fw-bold",level:2,children:[(d=e==null?void 0:e.users)==null?void 0:d.totalUsersWithStatus," Người dùng"]}),_.jsx(P.Title,{level:5,className:"!mb-0",children:"Tổng người dùng tuần này"}),_.jsxs("div",{className:"flex justify-between",children:[_.jsxs(P.Title,{level:4,type:"danger",className:"!my-2",children:[(p=e==null?void 0:e.users)==null?void 0:p.totalUsersThisWeek," Người dùng"]}),((m=e==null?void 0:e.users)==null?void 0:m.userDifference)>0?_.jsx(_.Fragment,{children:_.jsx("div",{className:"flex items-center gap-2",children:_.jsxs(P.Text,{className:"flex items-center gap-2 !mt-0",type:"success",children:["+ ",(x=e==null?void 0:e.users)==null?void 0:x.userDifference," Người dùng",_.jsx(ot,{size:16})]})})}):_.jsx(_.Fragment,{})]})]})}),_.jsx(me,{span:24,lg:{span:12},children:_.jsx(ye,{loading:r,title:_.jsx(P.Title,{level:4,className:"!mb-0",children:"Hôm Nay"}),bordered:!1,children:_.jsx("div",{style:{height:500},children:_.jsx(Zs,{data:[{value:(y=e==null?void 0:e.orders)==null?void 0:y.totalOrdersToday,name:"Tổng đơn đặt hàng"},{value:(b=e==null?void 0:e.orders)==null?void 0:b.totalOrdersTodayWithFalseStatus,name:"Tổng đơn đặt hàng chưa thanh toán"},{value:(T=e==null?void 0:e.orders)==null?void 0:T.totalOrdersTodayWithTrueStatus,name:"Tổng đơn đặt hàng đã thanh toán"}]})})})}),_.jsx(me,{span:24,lg:{span:12},children:_.jsx(ye,{loading:r,title:_.jsx(P.Title,{level:4,className:"!mb-0",children:"Doanh Thu Theo Tuần"}),bordered:!1,children:_.jsx("div",{style:{height:500},children:_.jsx(Us,{data:a.map((A,C)=>({value:A.revenue,name:i[C]}))})})})}),_.jsx(me,{span:24,children:_.jsx(ye,{loading:r,className:"!mb-6",title:_.jsx(P.Title,{level:4,className:"!mb-0",children:"Doanh Thu Hằng Tháng"}),bordered:!1,children:_.jsx(Xs,{data:(S=e==null?void 0:e.revenue)==null?void 0:S.monthlyRevenues.map(A=>A.revenue)})})})]})})};export{gl as default};
