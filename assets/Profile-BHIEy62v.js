import{d as F,r as h,j as e,o as S,i as I,t as T,k}from"./index-_ypI0F_1.js";import{b7 as q}from"./Layout-BvBWVB06.js";import{p as d}from"./provinceVNApi-C0YqpPWt.js";import{F as n}from"./index-BJP39Tjo.js";import{B as w}from"./index-CV_nyqji.js";import{R as p,C as a}from"./index-C3H4z0p8.js";import{C as x}from"./index-BY379eDO.js";import{I as m}from"./index-Cltbj2CO.js";import{R as u}from"./index-D6mCrjB3.js";import{S as g}from"./index-C3t78VW8.js";import"./index-CK5a60u3.js";import"./index-ZfKfo4Jn.js";import"./index-DsFhX4f0.js";import"./useVariants-7fT5Kw8J.js";import"./EllipsisOutlined-BDD7BBGF.js";import"./Overflow-C2mG9Ibm.js";import"./CheckOutlined-ZzPgNfBr.js";import"./index-DZ4TB2Lo.js";import"./SearchOutlined-yRdI2ge9.js";import"./index-DK7lNpsH.js";const Y=()=>{const[i]=n.useForm(),{user:l}=F(s=>s.auth),[j,b]=h.useState([]),[f,N]=h.useState([]),[v,y]=h.useState([]);h.useEffect(()=>{d.province().then(s=>{const o=s.map(r=>({label:r.name,value:r.name,key:r.code}));b(o)})},[]),h.useEffect(()=>{l!=null&&l._id&&i.setFieldsValue(l)},[l]);const C=s=>{S("put","Đang cập nhật thông tin..."),s.id=l._id,I.putUser(s).then(()=>{T("put","Cập nhật thông tin thành công!")}).catch(()=>{k("put","Cập nhật thông tin thất bại!")})};return e.jsx(q,{title:"Thông tin cá nhân",header:"THÔNG TIN",button:e.jsx(e.Fragment,{children:e.jsx(w,{type:"primary",onClick:()=>i.submit(),children:"Lưu Thông Tin"})}),children:e.jsx(n,{form:i,name:"customForm",layout:"vertical",onFinish:C,children:e.jsxs(p,{gutter:[24,24],children:[e.jsx(a,{span:24,children:e.jsx(x,{title:"Thông tin tài khoản",children:e.jsxs(p,{gutter:[14,14],children:[e.jsx(n.Item,{className:"mb-0 hidden",label:"Email",name:"_id",children:e.jsx(m,{size:"large",readOnly:!0,placeholder:"Nhập tên người dùng"})}),e.jsx(a,{md:{span:12},span:24,children:e.jsx(n.Item,{className:"mb-0",label:"Email",name:"email",children:e.jsx(m,{size:"large",readOnly:!0,placeholder:"Nhập tên người dùng"})})}),e.jsx(a,{md:{span:12},span:24,children:e.jsx(n.Item,{className:"mb-0",label:"Số điện thoại",name:"phone",validateFirst:!0,rules:[{required:!0,message:"Vui lòng nhập số điện thoại!"},{pattern:/^0/,message:"Số điện thoại phải bắt đầu bằng số 0!"},{len:10,message:"Số điện thoại phải có đúng 10 số!"}],children:e.jsx(m,{size:"large",placeholder:"Nhập số điện thoại",onKeyPress:s=>{/[0-9]/.test(s.key)||s.preventDefault()}})})})]})})}),e.jsx(a,{span:24,children:e.jsx(x,{className:"mb-6",title:"Thông tin cá nhân",children:e.jsxs(p,{gutter:[14,14],children:[e.jsx(a,{xl:{span:20},md:{span:20},span:24,children:e.jsx(n.Item,{name:"name",label:"Tên người dùng",rules:[{required:!0,message:"Vui lòng nhập tên người dùng!"}],children:e.jsx(m,{size:"large",placeholder:"Nhập tên người dùng"})})}),e.jsx(a,{className:"flex",xl:{span:4},md:{span:4},span:24,children:e.jsx(n.Item,{name:"gender",label:"Giới tính",rules:[{required:!0,message:"Vui lòng nhập tên người dùng!"}],children:e.jsxs(u.Group,{children:[e.jsx(u,{value:"Nam",children:"Nam"}),e.jsx(u,{value:"Nữ",children:"Nữ"})]})})}),e.jsx(a,{md:{span:8},span:24,children:e.jsx(n.Item,{className:"mb-2",name:"province",label:"Tỉnh/Thành phố",rules:[{required:!0,message:"Chọn tỉnh hoặc thành phố!"}],children:e.jsx(g,{showSearch:!0,optionFilterProp:"label",size:"large",className:"mb-2",placeholder:"Chọn tỉnh hoặc thành phố",options:j,onChange:(s,o)=>{d.district(o.key).then(r=>{const c=r.map(t=>({label:t.name,value:t.name,key:t.code}));N(c),i.setFieldsValue({district:void 0}),i.setFieldsValue({ward:void 0})})}})})}),e.jsx(a,{md:{span:8},span:24,children:e.jsx(n.Item,{className:"mb-2",name:"district",label:"Quận/Huyện",rules:[{required:!0,message:"Chọn quận hoặc huyện!"}],children:e.jsx(g,{showSearch:!0,optionFilterProp:"label",size:"large",className:"mb-2",placeholder:"Chọn quận hoặc huyện",options:f,onChange:(s,o)=>{d.ward(o.key).then(r=>{const c=r.map(t=>({label:t.name,value:t.name,key:t.code}));y(c),i.setFieldsValue({ward:void 0})})}})})}),e.jsx(a,{md:{span:8},span:24,children:e.jsx(n.Item,{className:"mb-2",name:"ward",label:"Xã/Phường",rules:[{required:!0,message:"Chọn xã hoặc phường!"}],children:e.jsx(g,{showSearch:!0,optionFilterProp:"label",size:"large",className:"mb-2",placeholder:"Chọn xã hoặc phường",options:v})})}),e.jsx(a,{span:24,children:e.jsx(n.Item,{className:"mb-2",name:"address",label:"Địa chỉ",rules:[{required:!0,message:"Nhập địa chỉ!"}],children:e.jsx(m,{size:"large",placeholder:"Nhập địa chỉ"})})})]})})})]})})})};export{Y as default};
