import{u as I,q as L,s as c,r as e,y as j,b5 as w,b4 as R,j as u,aT as m,I as g,t as $}from"./index-BuOBoE3L.js";import{b7 as q}from"./Layout-DaSFpQjb.js";import{P as D,p as F,b as G,a as J,B as r}from"./index-BMNiilBF.js";import{p as K,a as M,b as z,c as d,B as U,d as H,t as N}from"./index-zvPZghFT.js";import{p as f}from"./index-TnMWlHan.js";import{p as O,a as Q,S as h}from"./index-BLZGZfSB.js";import"./index-DZDReWIE.js";import"./EllipsisOutlined-UCIQXMLt.js";import"./Overflow-5-KPhr6t.js";import"./context-BmjTTwEj.js";import"./index-B2Nf3_Kd.js";import"./index-B7kLKWWs.js";import"./index-Be4-u7cl.js";import"./row-DIBBKypf.js";import"./index-B1Z2SEkC.js";import"./useLocale-76tcZULO.js";import"./TextArea-K7M6i712.js";import"./useVariants-CUU9r09_.js";import"./compact-item-Bm60McBf.js";import"./CheckOutlined-mJczqd3-.js";import"./button-Bs7G6NJZ.js";import"./index-B969Fsrj.js";import"./index-DHj6h5NR.js";import"./PurePanel-BRKgd2Gs.js";import"./index-BlzXQ1I0.js";import"./SearchOutlined-BzeQJFQE.js";import"./Dropdown-USpko8_K.js";import"./index-Dp0RD0VD.js";import"./fileApi-Cmxe4Jzf.js";import"./html2canvas.esm-CBrSDip1.js";const xt=()=>{const o=I(),p=L(),b=localStorage.getItem("name-course"),{pluginsScript:k,loading:P}=c(t=>t.pluginsScript),[i,S]=e.useState(),B=()=>{m.getChildrenPage(o).then(t=>{S(t.data)}).catch(()=>g("data","Lỗi lấy bài viết"))},v=(t,a)=>{m.putChildren({id:o==null?void 0:o.id,childId:o==null?void 0:o.childId,edit:t,content:a}).then(()=>$("data","Đã lưu bài viết")).catch(()=>g("data","Lỗi lưu bài viết"))},{plugins:n,loading:y}=c(t=>t.plugins),x=e.useMemo(()=>{var t;return(t=n==null?void 0:n.newData)==null?void 0:t.map(a=>({id:a.id,src:`${j}/uploads/${a.src}`}))},[n]),C=t=>{t.Panels.addButton("options",[{id:"google-fonts",className:"fa fa-font",attributes:{title:"Cài đặt kiểu chữ"},command:"open-fonts",togglable:!0,visible:!0}]);const a=["bootstrapIcon","link","quote","link-block","text-basic","text-section","column1","column2","column3","column3-7"],E=["open-templates","link-page"],T=["Extra","Blog","Layout","Short Codes"],{models:A}=t.BlockManager.getCategories();a.forEach(s=>t.BlockManager.remove(s)),E.forEach(s=>{t.Panels.removeButton("options",s)}),A.forEach(s=>{var l;return T.includes((l=s.get)==null?void 0:l.call(s,"id"))&&s.set("open",!1)})};return e.useEffect(()=>{y===!0&&p(w())},[]),e.useEffect(()=>{P===!0&&p(R())},[]),e.useEffect(()=>{B()},[]),u.jsx(q,{margin:0,header:"Bài viết Bài Học",children:i&&u.jsx(D,{data:(i==null?void 0:i.edit)||"",configGrapeJs:C,height:"calc(100vh - 56px)",folder:b,pluginss:x,canvas:k[0],plugins:[F,G,K,f,J,M,z,d,O,Q,r.model3d,r.imageLink,r.masonry,U,h.customType,h.customTypeSelect,H,N],pluginsOpts:{[d]:{api_key:"AIzaSyAdJTYSLPlKz4w5Iqyy-JAF2o8uQKd1FKc"},[f]:{options:{extraPlugins:"dialogui,sharedspace,justify,colorbutton,panelbutton,font",language:"vi",toolbarGroups:[{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi","paragraph"]},{name:"links",groups:["links"]},{name:"insert",groups:["insert"]},"/",{name:"styles",groups:["styles"]},{name:"colors",groups:["colors"]},{name:"tools",groups:["tools"]},{name:"others",groups:["others"]}]},position:"center"}},savePage:v})})};export{xt as default};
