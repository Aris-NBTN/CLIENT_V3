import{q,s as T,r as s,j as e,b8 as j,b9 as V,ba as $,T as h,Z as X,a7 as i,bb as Q,I as R,bc as Z,bd as H,be as J,bf as K,bg as U,bh as W,bi as Y}from"./index-CLgyQ1vx.js";import{bb as ee,b7 as te}from"./Layout-Bo8X0zbn.js";import{E as k}from"./Table-BASKfIV3.js";import{F as d,a as ae}from"./Filter-ByHhxKaB.js";import{f as re,e as ie}from"./Format-D-jAu6wH.js";import{v as ne,w as se,x as C}from"./index-CnibHaQp.js";import{e as le}from"./export-nvQuuiWM.js";import{F as l}from"./index-BKrmvUfW.js";import{T as u}from"./index-ObwxId4A.js";import{B as o}from"./button-CFZW2Fak.js";import{M as S}from"./index-CL0RwYER.js";import{I as w}from"./index-DNERIO6W.js";import{T as oe}from"./index-BbsGW53p.js";import"./index-DRxWoPIf.js";import"./index-BC037qWw.js";import"./index-DeFNh6Jp.js";import"./row-CbKX7NA9.js";import"./index-BUe_r4_5.js";import"./Overflow-aWC-KCIQ.js";import"./PurePanel-BuBTzN3G.js";import"./useVariants-Dd3vmZmf.js";import"./index-wxIFWymk.js";import"./useLocale-WrgrvLJQ.js";import"./compact-item-DR52_Oht.js";import"./CheckOutlined-DL5js1cp.js";import"./SearchOutlined-DECFkpI7.js";import"./context-DZ0uDIsf.js";import"./EllipsisOutlined-gz3vguox.js";import"./Dropdown-BhJCOC9m.js";import"./iconUtil-DMDmVrIZ.js";import"./index-BSB5CEy1.js";import"./index-DzniCgZh.js";import"./TextArea-Bz2hpPvr.js";import"./index-C5fE5rqD.js";import"./index-BjEFqTht.js";import"./index-C1zwpvBp.js";import"./html2canvas.esm-CBrSDip1.js";import"./jspdf.es.min-BIQw-QNZ.js";const He=()=>{const r=q(),P=ee({query:"(max-width: 576px)"}),[g]=l.useForm(),[m]=l.useForm(),{pages:n,loading:x}=T(t=>t.pages),{groupPages:f,loading:p}=T(t=>t.groupPages),a=f==null?void 0:f.newData,[N,b]=s.useState(!1),[D,y]=s.useState(!1),[A,I]=s.useState(localStorage.getItem("drag")==="true"),F=s.useMemo(()=>{var t;return(t=n==null?void 0:n.newData)==null?void 0:t.map(c=>({...c,key:c._id}))},[n]),E=s.useMemo(()=>a==null?void 0:a.map(t=>({...t,key:t._id})),[a]),v=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,...d({dataIndex:"name",handleTableChange:({searchText:t,searchedColumn:c})=>{t?i(r,Y({[c]:t})):r(j({page:1,limit:localStorage.getItem("pageSize")||10}))}})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,...d({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(u.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...d({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...d({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(re,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&(a==null?void 0:a.length)>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&(a==null?void 0:a.length)>0?ie(t,a,"group"):null,...Array.isArray(a)&&(a==null?void 0:a.length)>0?ae("group",a==null?void 0:a.map(t=>({text:t.group,value:t._id}))):{}}],G=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...d({dataIndex:"group"})}],M=t=>{i(r,Z(t),()=>{b(!1),g.resetFields()})},B=t=>{i(r,H(t))},z=t=>{i(r,J(t))},L=t=>{i(r,K(t),()=>{y(!1),m.resetFields()})},_=t=>{i(r,U(t))},O=t=>{i(r,W(t))};return s.useEffect(()=>{x&&r(j({page:1,limit:localStorage.getItem("pageSize")||10}))},[]),s.useEffect(()=>{p===!0&&r(V())},[]),e.jsxs(te,{title:"Bài viết",header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[A?e.jsx(o,{onClick:()=>{I(!1),localStorage.setItem("drag","false")},children:e.jsx(u,{children:"Tắt sắp xếp"})}):e.jsx(o,{type:"primary",onClick:()=>{I(!0),localStorage.setItem("drag","true")},children:"Bật sắp xếp"}),e.jsx(o,{type:"primary",onClick:()=>y(!0),children:"Thêm nhóm"}),e.jsx(o,{type:"primary",onClick:()=>b(!0),children:"Thêm trang"}),e.jsx(o,{onClick:()=>le(F,"Pages.xlsx"),type:"primary",children:"Xuất file Excel"})]}),children:[e.jsx(k,{dragMode:A,Api:j,ApiPut:$,total:n==null?void 0:n.totalItems,loading:x,data:F,columns:v,onSave:B,onDelete:z,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Xem trang",children:e.jsx(X,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(ne,{size:22,color:"#006aff"})})}),e.jsx(h,{title:"Sao chép trang",children:e.jsx(u,{onClick:()=>i(r,Q(t._id)),children:e.jsx(se,{size:22,color:"#55ff00"})})}),P?e.jsx(e.Fragment,{children:e.jsx(h,{title:"Chỉnh sửa trang",children:e.jsx(u.Link,{onClick:()=>R("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(C,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx(h,{title:"Chỉnh sửa trang",children:e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(C,{size:22,color:"rgb(255 127 0)"})})})]})}),e.jsx(S,{title:"Thêm trang",centered:!0,open:N,onOk:()=>g.submit(),onCancel:()=>b(!1),confirmLoading:x,width:500,children:e.jsx(l,{form:g,name:"customForm",layout:"vertical",onFinish:M,children:e.jsx(l.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(w,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(S,{centered:!0,open:D,confirmLoading:p,onOk:()=>m.submit(),onCancel:()=>y(!1),footer:null,width:600,children:e.jsx(oe,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(l,{form:m,name:"customForm",layout:"vertical",onFinish:L,children:[e.jsx(l.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(w,{placeholder:"Nhập nhóm"})}),e.jsx(o,{type:"primary",loading:p,onClick:()=>m.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(k,{loading:p,data:E,isScroll:!1,columns:G,width:"10%",onSave:_,onDelete:O})})}]})})]})};export{He as default};
