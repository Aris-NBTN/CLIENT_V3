import{d as y,r as n,c as C,j as e,aS as l,E as T,t as F,k as S,V as E,aT as b}from"./index-xq1IhvnX.js";import{b7 as w}from"./Layout-xZ9rI-qc.js";import{E as N}from"./Table-D8rvhgRH.js";import{F as h,b as x,a as A}from"./Filter-Duh_CmDU.js";import{I as k}from"./Invoice-BOO8PTcy.js";import{e as v,a as D}from"./export-BaGtqBpA.js";import{i as g}from"./Format-BcvZhZH2.js";import{B as r,M as H}from"./index-BCPS-Hci.js";import"./index-fL_rF7-I.js";import"./EllipsisOutlined-rXpF71Wb.js";import"./Overflow-DfJmp3ND.js";import"./useVariants-BIfgDl13.js";import"./CheckOutlined-ElLJZnRB.js";import"./index-pcS8CXTc.js";import"./index-wfLKZGEA.js";import"./index-xq-K3yHD.js";import"./index-C0JrUhgO.js";import"./index-1JKPf1rL.js";import"./SearchOutlined-BGPSXXyr.js";import"./Table-idjmAEyf.js";import"./iconUtil-CgqHPw5u.js";import"./index-D4ydBNbd.js";import"./index-M41w23l8.js";import"./index-D5cKzEI1.js";import"./index-i_KdcLVM.js";import"./index-CMG4FALh.js";import"./index-BT3cHatH.js";import"./index-D-YQ6JWZ.js";import"./html2canvas.esm-CBrSDip1.js";import"./index-BeHqjPFW.js";const he=()=>{const{order:a,loading:c}=y(t=>t.order),[f,s]=n.useState(!1),[u,m]=n.useState(),o=C(),p=n.useRef(null),d=({searchText:t,searchedColumn:i})=>{t?E(o,b({[i]:t})):o(l({page:1,limit:localStorage.getItem("pageSize")||10}))},I=[{title:"Mã ĐH",dataIndex:"orderId",width:"7%",...h({dataIndex:"orderId",handleTableChange:d})},{title:"Tên",dataIndex:"name",width:"14%",...h({dataIndex:"name",handleTableChange:d})},{title:"Email",dataIndex:"email",width:"14%",...h({dataIndex:"email",handleTableChange:d})},{title:"Điện thoại",dataIndex:"phone",width:"10%",...h({dataIndex:"phone",handleTableChange:d})},{title:"Ngày đặt",dataIndex:"createdAt",width:"12%",...x({dataIndex:"createdAt"}),render:t=>g(t)},{title:"Ngày thanh toán",dataIndex:"updatedAt",width:"12%",...x({dataIndex:"updatedAt"}),render:t=>g(t)},{title:"Trạng thái",dataIndex:"status",width:"10%",...A("status",[{value:!0,text:"Đã thanh toán"},{value:!1,text:"Chưa thanh toán"}]),render:t=>t===!0?e.jsx("span",{className:"text-success",children:"Đã thanh toán"}):e.jsx("span",{className:"text-danger",children:"Chưa thanh toán"})},{title:e.jsx("div",{className:"flex justify-center",children:"Thông tin"}),dataIndex:"info",width:"8%",render:(t,i)=>e.jsx("div",{className:"flex justify-center",children:e.jsx(r,{type:"primary",ghost:!0,onClick:()=>{s(!0),m(i)},children:"Chi tiết"})})}],j=n.useMemo(()=>{var t;return(t=a==null?void 0:a.newData)==null?void 0:t.map(i=>({...i,key:i._id}))},[a]);return n.useEffect(()=>{c&&o(l({page:1,limit:localStorage.getItem("pageSize")||10}))},[]),e.jsxs(w,{header:e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center",children:e.jsx("h6",{className:"mb-0",children:"ĐƠN HÀNG"})})}),button:e.jsxs(e.Fragment,{children:[e.jsx(r,{onClick:()=>{T.delUnPaid().then(t=>{o(l({page:1,limit:localStorage.getItem("pageSize")||10})),F("data","Xóa Đơn Hàng Chưa Thanh Toán Thành Công!",t.message)}).catch(t=>S("data","Không Thể Xóa Đơn Hàng!",t.message))},type:"primary",children:"Xóa đơn hàng chưa thanh toán"}),e.jsx(r,{onClick:()=>v(a,"Order.xlsx"),type:"primary",children:"Xuất file Excel"})]}),children:[e.jsx(N,{dragMode:!1,Api:l,total:a==null?void 0:a.totalItems,loading:c,data:j,columns:I,colEdit:!1}),e.jsx(H,{centered:!0,open:f,onOk:()=>s(!1),onCancel:()=>{s(!1),m()},footer:e.jsxs(e.Fragment,{children:[e.jsx(r,{onClick:()=>{s(!1),m()},children:"Hủy"}),e.jsx(r,{type:"primary",onClick:()=>D(p),children:"Xuất file PDF"})]}),width:800,children:e.jsx("div",{ref:p,children:e.jsx(k,{info:u})})})]})};export{he as default};
