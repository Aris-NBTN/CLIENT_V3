import{r as S,j as D,H as k,cb as mn,bh as Ft,bg as bi,bG as Ne,b as vn,p as yn,h as bn,o as xn,t as Be}from"./index-CPBF7azd.js";import{l as wn}from"./lodash-A2PjbQZS.js";import{m as Vt}from"./customPageApi-3sZ_cIcQ.js";import{f as En}from"./fileApi-Ckv0JrL5.js";import{B as Z,M as Tn}from"./index-DyMsIEIg.js";import{I as Sn}from"./index-DjHjjRka.js";import"./useVariants-Ze9mRC4L.js";import"./SearchOutlined-B1l8Mw2x.js";/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function We(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),e.push.apply(e,i)}return e}function xi(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?We(Object(e),!0).forEach(function(i){Rn(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):We(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Cn(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function wi(n){var t=Cn(n,"string");return typeof t=="symbol"?t:t+""}function fe(n){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(n)}function Dn(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function He(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,wi(i.key),i)}}function _n(n,t,e){return t&&He(n.prototype,t),e&&He(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Rn(n,t,e){return t=wi(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Ei(n){return In(n)||Mn(n)||Pn(n)||On()}function In(n){if(Array.isArray(n))return pe(n)}function Mn(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pn(n,t){if(n){if(typeof n=="string")return pe(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pe(n,t)}}function pe(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function On(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ut=typeof window<"u"&&typeof window.document<"u",tt=Ut?window:{},_e=Ut&&tt.document.documentElement?"ontouchstart"in tt.document.documentElement:!1,Re=Ut?"PointerEvent"in tt:!1,H="cropper",Ie="all",Ti="crop",Si="move",Ci="zoom",st="e",ht="w",pt="s",et="n",wt="ne",Et="nw",Tt="se",St="sw",ge="".concat(H,"-crop"),je="".concat(H,"-disabled"),X="".concat(H,"-hidden"),Fe="".concat(H,"-hide"),Ln="".concat(H,"-invisible"),Bt="".concat(H,"-modal"),me="".concat(H,"-move"),_t="".concat(H,"Action"),zt="".concat(H,"Preview"),Me="crop",Di="move",_i="none",ve="crop",ye="cropend",be="cropmove",xe="cropstart",Ue="dblclick",kn=_e?"touchstart":"mousedown",An=_e?"touchmove":"mousemove",zn=_e?"touchend touchcancel":"mouseup",Ge=Re?"pointerdown":kn,Ye=Re?"pointermove":An,$e=Re?"pointerup pointercancel":zn,Xe="ready",qe="resize",Ve="wheel",we="zoom",Ke="image/jpeg",Nn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Bn=/^data:/,Wn=/^data:image\/jpeg;base64,/,Hn=/^img|canvas$/i,Ri=200,Ii=100,Qe={viewMode:0,dragMode:Me,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ri,minContainerHeight:Ii,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},jn='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Fn=Number.isNaN||tt.isNaN;function L(n){return typeof n=="number"&&!Fn(n)}var Ze=function(t){return t>0&&t<1/0};function Kt(n){return typeof n>"u"}function lt(n){return fe(n)==="object"&&n!==null}var Un=Object.prototype.hasOwnProperty;function gt(n){if(!lt(n))return!1;try{var t=n.constructor,e=t.prototype;return t&&e&&Un.call(e,"isPrototypeOf")}catch{return!1}}function $(n){return typeof n=="function"}var Gn=Array.prototype.slice;function Mi(n){return Array.from?Array.from(n):Gn.call(n)}function U(n,t){return n&&$(t)&&(Array.isArray(n)||L(n.length)?Mi(n).forEach(function(e,i){t.call(n,e,i,n)}):lt(n)&&Object.keys(n).forEach(function(e){t.call(n,n[e],e,n)})),n}var j=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];return lt(t)&&i.length>0&&i.forEach(function(r){lt(r)&&Object.keys(r).forEach(function(a){t[a]=r[a]})}),t},Yn=/\.\d*(?:0|9){12}\d*$/;function vt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Yn.test(n)?Math.round(n*t)/t:n}var $n=/^width|height|left|top|marginLeft|marginTop$/;function it(n,t){var e=n.style;U(t,function(i,o){$n.test(o)&&L(i)&&(i="".concat(i,"px")),e[o]=i})}function Xn(n,t){return n.classList?n.classList.contains(t):n.className.indexOf(t)>-1}function G(n,t){if(t){if(L(n.length)){U(n,function(i){G(i,t)});return}if(n.classList){n.classList.add(t);return}var e=n.className.trim();e?e.indexOf(t)<0&&(n.className="".concat(e," ").concat(t)):n.className=t}}function J(n,t){if(t){if(L(n.length)){U(n,function(e){J(e,t)});return}if(n.classList){n.classList.remove(t);return}n.className.indexOf(t)>=0&&(n.className=n.className.replace(t,""))}}function mt(n,t,e){if(t){if(L(n.length)){U(n,function(i){mt(i,t,e)});return}e?G(n,t):J(n,t)}}var qn=/([a-z\d])([A-Z])/g;function Pe(n){return n.replace(qn,"$1-$2").toLowerCase()}function Ee(n,t){return lt(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-".concat(Pe(t)))}function Rt(n,t,e){lt(e)?n[t]=e:n.dataset?n.dataset[t]=e:n.setAttribute("data-".concat(Pe(t)),e)}function Vn(n,t){if(lt(n[t]))try{delete n[t]}catch{n[t]=void 0}else if(n.dataset)try{delete n.dataset[t]}catch{n.dataset[t]=void 0}else n.removeAttribute("data-".concat(Pe(t)))}var Pi=/\s\s*/,Oi=function(){var n=!1;if(Ut){var t=!1,e=function(){},i=Object.defineProperty({},"once",{get:function(){return n=!0,t},set:function(r){t=r}});tt.addEventListener("test",e,i),tt.removeEventListener("test",e,i)}return n}();function K(n,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e;t.trim().split(Pi).forEach(function(r){if(!Oi){var a=n.listeners;a&&a[r]&&a[r][e]&&(o=a[r][e],delete a[r][e],Object.keys(a[r]).length===0&&delete a[r],Object.keys(a).length===0&&delete n.listeners)}n.removeEventListener(r,o,i)})}function V(n,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=e;t.trim().split(Pi).forEach(function(r){if(i.once&&!Oi){var a=n.listeners,h=a===void 0?{}:a;o=function(){delete h[r][e],n.removeEventListener(r,o,i);for(var m=arguments.length,c=new Array(m),d=0;d<m;d++)c[d]=arguments[d];e.apply(n,c)},h[r]||(h[r]={}),h[r][e]&&n.removeEventListener(r,h[r][e],i),h[r][e]=o,n.listeners=h}n.addEventListener(r,o,i)})}function yt(n,t,e){var i;return $(Event)&&$(CustomEvent)?i=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,e)),n.dispatchEvent(i)}function Li(n){var t=n.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Qt=tt.location,Kn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Je(n){var t=n.match(Kn);return t!==null&&(t[1]!==Qt.protocol||t[2]!==Qt.hostname||t[3]!==Qt.port)}function ti(n){var t="timestamp=".concat(new Date().getTime());return n+(n.indexOf("?")===-1?"?":"&")+t}function Dt(n){var t=n.rotate,e=n.scaleX,i=n.scaleY,o=n.translateX,r=n.translateY,a=[];L(o)&&o!==0&&a.push("translateX(".concat(o,"px)")),L(r)&&r!==0&&a.push("translateY(".concat(r,"px)")),L(t)&&t!==0&&a.push("rotate(".concat(t,"deg)")),L(e)&&e!==1&&a.push("scaleX(".concat(e,")")),L(i)&&i!==1&&a.push("scaleY(".concat(i,")"));var h=a.length?a.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function Qn(n){var t=xi({},n),e=0;return U(n,function(i,o){delete t[o],U(t,function(r){var a=Math.abs(i.startX-r.startX),h=Math.abs(i.startY-r.startY),l=Math.abs(i.endX-r.endX),m=Math.abs(i.endY-r.endY),c=Math.sqrt(a*a+h*h),d=Math.sqrt(l*l+m*m),y=(d-c)/c;Math.abs(y)>Math.abs(e)&&(e=y)})}),e}function Nt(n,t){var e=n.pageX,i=n.pageY,o={endX:e,endY:i};return t?o:xi({startX:e,startY:i},o)}function Zn(n){var t=0,e=0,i=0;return U(n,function(o){var r=o.startX,a=o.startY;t+=r,e+=a,i+=1}),t/=i,e/=i,{pageX:t,pageY:e}}function nt(n){var t=n.aspectRatio,e=n.height,i=n.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Ze(i),a=Ze(e);if(r&&a){var h=e*t;o==="contain"&&h>i||o==="cover"&&h<i?e=i/t:i=e*t}else r?e=i/t:a&&(i=e*t);return{width:i,height:e}}function Jn(n){var t=n.width,e=n.height,i=n.degree;if(i=Math.abs(i)%180,i===90)return{width:e,height:t};var o=i%90*Math.PI/180,r=Math.sin(o),a=Math.cos(o),h=t*a+e*r,l=t*r+e*a;return i>90?{width:l,height:h}:{width:h,height:l}}function tr(n,t,e,i){var o=t.aspectRatio,r=t.naturalWidth,a=t.naturalHeight,h=t.rotate,l=h===void 0?0:h,m=t.scaleX,c=m===void 0?1:m,d=t.scaleY,y=d===void 0?1:d,v=e.aspectRatio,u=e.naturalWidth,g=e.naturalHeight,p=i.fillColor,s=p===void 0?"transparent":p,f=i.imageSmoothingEnabled,b=f===void 0?!0:f,w=i.imageSmoothingQuality,E=w===void 0?"low":w,x=i.maxWidth,T=x===void 0?1/0:x,_=i.maxHeight,R=_===void 0?1/0:_,z=i.minWidth,A=z===void 0?0:z,W=i.minHeight,O=W===void 0?0:W,M=document.createElement("canvas"),P=M.getContext("2d"),N=nt({aspectRatio:v,width:T,height:R}),q=nt({aspectRatio:v,width:A,height:O},"cover"),Y=Math.min(N.width,Math.max(q.width,u)),rt=Math.min(N.height,Math.max(q.height,g)),ut=nt({aspectRatio:o,width:T,height:R}),Ot=nt({aspectRatio:o,width:A,height:O},"cover"),Lt=Math.min(ut.width,Math.max(Ot.width,r)),kt=Math.min(ut.height,Math.max(Ot.height,a)),$t=[-Lt/2,-kt/2,Lt,kt];return M.width=vt(Y),M.height=vt(rt),P.fillStyle=s,P.fillRect(0,0,Y,rt),P.save(),P.translate(Y/2,rt/2),P.rotate(l*Math.PI/180),P.scale(c,y),P.imageSmoothingEnabled=b,P.imageSmoothingQuality=E,P.drawImage.apply(P,[n].concat(Ei($t.map(function(dt){return Math.floor(vt(dt))})))),P.restore(),M}var ki=String.fromCharCode;function er(n,t,e){var i="";e+=t;for(var o=t;o<e;o+=1)i+=ki(n.getUint8(o));return i}var ir=/^data:.*,/;function nr(n){var t=n.replace(ir,""),e=atob(t),i=new ArrayBuffer(e.length),o=new Uint8Array(i);return U(o,function(r,a){o[a]=e.charCodeAt(a)}),i}function rr(n,t){for(var e=[],i=8192,o=new Uint8Array(n);o.length>0;)e.push(ki.apply(null,Mi(o.subarray(0,i)))),o=o.subarray(i);return"data:".concat(t,";base64,").concat(btoa(e.join("")))}function or(n){var t=new DataView(n),e;try{var i,o,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var a=t.byteLength,h=2;h+1<a;){if(t.getUint8(h)===255&&t.getUint8(h+1)===225){o=h;break}h+=1}if(o){var l=o+4,m=o+10;if(er(t,l,4)==="Exif"){var c=t.getUint16(m);if(i=c===18761,(i||c===19789)&&t.getUint16(m+2,i)===42){var d=t.getUint32(m+4,i);d>=8&&(r=m+d)}}}if(r){var y=t.getUint16(r,i),v,u;for(u=0;u<y;u+=1)if(v=r+u*12+2,t.getUint16(v,i)===274){v+=8,e=t.getUint16(v,i),t.setUint16(v,1,i);break}}}catch{e=1}return e}function ar(n){var t=0,e=1,i=1;switch(n){case 2:e=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,e=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:e,scaleY:i}}var sr={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,o=this.cropper,r=Number(e.minContainerWidth),a=Number(e.minContainerHeight);G(o,X),J(t,X);var h={width:Math.max(i.offsetWidth,r>=0?r:Ri),height:Math.max(i.offsetHeight,a>=0?a:Ii)};this.containerData=h,it(o,{width:h.width,height:h.height}),G(t,X),J(o,X)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,o=Math.abs(e.rotate)%180===90,r=o?e.naturalHeight:e.naturalWidth,a=o?e.naturalWidth:e.naturalHeight,h=r/a,l=t.width,m=t.height;t.height*h>t.width?i===3?l=t.height*h:m=t.width/h:i===3?m=t.width/h:l=t.height*h;var c={aspectRatio:h,naturalWidth:r,naturalHeight:a,width:l,height:m};this.canvasData=c,this.limited=i===1||i===2,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=j({},c)},limitCanvas:function(t,e){var i=this.options,o=this.containerData,r=this.canvasData,a=this.cropBoxData,h=i.viewMode,l=r.aspectRatio,m=this.cropped&&a;if(t){var c=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;h>1?(c=Math.max(c,o.width),d=Math.max(d,o.height),h===3&&(d*l>c?c=d*l:d=c/l)):h>0&&(c?c=Math.max(c,m?a.width:0):d?d=Math.max(d,m?a.height:0):m&&(c=a.width,d=a.height,d*l>c?c=d*l:d=c/l));var y=nt({aspectRatio:l,width:c,height:d});c=y.width,d=y.height,r.minWidth=c,r.minHeight=d,r.maxWidth=1/0,r.maxHeight=1/0}if(e)if(h>(m?0:1)){var v=o.width-r.width,u=o.height-r.height;r.minLeft=Math.min(0,v),r.minTop=Math.min(0,u),r.maxLeft=Math.max(0,v),r.maxTop=Math.max(0,u),m&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,h===2&&(r.width>=o.width&&(r.minLeft=Math.min(0,v),r.maxLeft=Math.max(0,v)),r.height>=o.height&&(r.minTop=Math.min(0,u),r.maxTop=Math.max(0,u))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height},renderCanvas:function(t,e){var i=this.canvasData,o=this.imageData;if(e){var r=Jn({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),a=r.width,h=r.height,l=i.width*(a/i.naturalWidth),m=i.height*(h/i.naturalHeight);i.left-=(l-i.width)/2,i.top-=(m-i.height)/2,i.width=l,i.height=m,i.aspectRatio=a/h,i.naturalWidth=a,i.naturalHeight=h,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,it(this.canvas,j({width:i.width,height:i.height},Dt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,o=i.naturalWidth*(e.width/e.naturalWidth),r=i.naturalHeight*(e.height/e.naturalHeight);j(i,{width:o,height:r,left:(e.width-o)/2,top:(e.height-r)/2}),it(this.image,j({width:i.width,height:i.height},Dt(j({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,r={width:e.width,height:e.height};i&&(e.height*i>e.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*o),r.height=Math.max(r.minHeight,r.height*o),r.left=e.left+(e.width-r.width)/2,r.top=e.top+(e.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=j({},r)},limitCropBox:function(t,e){var i=this.options,o=this.containerData,r=this.canvasData,a=this.cropBoxData,h=this.limited,l=i.aspectRatio;if(t){var m=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,d=h?Math.min(o.width,r.width,r.width+r.left,o.width-r.left):o.width,y=h?Math.min(o.height,r.height,r.height+r.top,o.height-r.top):o.height;m=Math.min(m,o.width),c=Math.min(c,o.height),l&&(m&&c?c*l>m?c=m/l:m=c*l:m?c=m/l:c&&(m=c*l),y*l>d?y=d/l:d=y*l),a.minWidth=Math.min(m,d),a.minHeight=Math.min(c,y),a.maxWidth=d,a.maxHeight=y}e&&(h?(a.minLeft=Math.max(0,r.left),a.minTop=Math.max(0,r.top),a.maxLeft=Math.min(o.width,r.left+r.width)-a.width,a.maxTop=Math.min(o.height,r.top+r.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=o.width-a.width,a.maxTop=o.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Rt(this.face,_t,i.width>=e.width&&i.height>=e.height?Si:Ie),it(this.cropBox,j({width:i.width,height:i.height},Dt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),yt(this.element,ve,this.getData())}},hr={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,o=e?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=o,a.alt=r,this.viewBox.appendChild(a),this.viewBoxImage=a,!!i){var h=i;typeof i=="string"?h=t.ownerDocument.querySelectorAll(i):i.querySelector&&(h=[i]),this.previews=h,U(h,function(l){var m=document.createElement("img");Rt(l,zt,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),e&&(m.crossOrigin=e),m.src=o,m.alt=r,m.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(m)})}},resetPreview:function(){U(this.previews,function(t){var e=Ee(t,zt);it(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Vn(t,zt)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,o=i.width,r=i.height,a=t.width,h=t.height,l=i.left-e.left-t.left,m=i.top-e.top-t.top;!this.cropped||this.disabled||(it(this.viewBoxImage,j({width:a,height:h},Dt(j({translateX:-l,translateY:-m},t)))),U(this.previews,function(c){var d=Ee(c,zt),y=d.width,v=d.height,u=y,g=v,p=1;o&&(p=y/o,g=r*p),r&&g>v&&(p=v/r,u=o*p,g=v),it(c,{width:u,height:g}),it(c.getElementsByTagName("img")[0],j({width:a*p,height:h*p},Dt(j({translateX:-l*p,translateY:-m*p},t))))}))}},cr={bind:function(){var t=this.element,e=this.options,i=this.cropper;$(e.cropstart)&&V(t,xe,e.cropstart),$(e.cropmove)&&V(t,be,e.cropmove),$(e.cropend)&&V(t,ye,e.cropend),$(e.crop)&&V(t,ve,e.crop),$(e.zoom)&&V(t,we,e.zoom),V(i,Ge,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&V(i,Ve,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&V(i,Ue,this.onDblclick=this.dblclick.bind(this)),V(t.ownerDocument,Ye,this.onCropMove=this.cropMove.bind(this)),V(t.ownerDocument,$e,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&V(window,qe,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;$(e.cropstart)&&K(t,xe,e.cropstart),$(e.cropmove)&&K(t,be,e.cropmove),$(e.cropend)&&K(t,ye,e.cropend),$(e.crop)&&K(t,ve,e.crop),$(e.zoom)&&K(t,we,e.zoom),K(i,Ge,this.onCropStart),e.zoomable&&e.zoomOnWheel&&K(i,Ve,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&K(i,Ue,this.onDblclick),K(t.ownerDocument,Ye,this.onCropMove),K(t.ownerDocument,$e,this.onCropEnd),e.responsive&&K(window,qe,this.onResize)}},lr={resize:function(){if(!this.disabled){var t=this.options,e=this.container,i=this.containerData,o=e.offsetWidth/i.width,r=e.offsetHeight/i.height,a=Math.abs(o-1)>Math.abs(r-1)?o:r;if(a!==1){var h,l;t.restore&&(h=this.getCanvasData(),l=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(U(h,function(m,c){h[c]=m*a})),this.setCropBoxData(U(l,function(m,c){l[c]=m*a})))}}},dblclick:function(){this.disabled||this.options.dragMode===_i||this.setDragMode(Xn(this.dragBox,ge)?Di:Me)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(L(e)&&e!==1||L(i)&&i!==0||t.ctrlKey))){var o=this.options,r=this.pointers,a;t.changedTouches?U(t.changedTouches,function(h){r[h.identifier]=Nt(h)}):r[t.pointerId||0]=Nt(t),Object.keys(r).length>1&&o.zoomable&&o.zoomOnTouch?a=Ci:a=Ee(t.target,_t),Nn.test(a)&&yt(this.element,xe,{originalEvent:t,action:a})!==!1&&(t.preventDefault(),this.action=a,this.cropping=!1,a===Ti&&(this.cropping=!0,G(this.dragBox,Bt)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var i=this.pointers;t.preventDefault(),yt(this.element,be,{originalEvent:t,action:e})!==!1&&(t.changedTouches?U(t.changedTouches,function(o){j(i[o.identifier]||{},Nt(o,!0))}):j(i[t.pointerId||0]||{},Nt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?U(t.changedTouches,function(o){delete i[o.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,mt(this.dragBox,Bt,this.cropped&&this.options.modal)),yt(this.element,ye,{originalEvent:t,action:e}))}}},ur={change:function(t){var e=this.options,i=this.canvasData,o=this.containerData,r=this.cropBoxData,a=this.pointers,h=this.action,l=e.aspectRatio,m=r.left,c=r.top,d=r.width,y=r.height,v=m+d,u=c+y,g=0,p=0,s=o.width,f=o.height,b=!0,w;!l&&t.shiftKey&&(l=d&&y?d/y:1),this.limited&&(g=r.minLeft,p=r.minTop,s=g+Math.min(o.width,i.width,i.left+i.width),f=p+Math.min(o.height,i.height,i.top+i.height));var E=a[Object.keys(a)[0]],x={x:E.endX-E.startX,y:E.endY-E.startY},T=function(R){switch(R){case st:v+x.x>s&&(x.x=s-v);break;case ht:m+x.x<g&&(x.x=g-m);break;case et:c+x.y<p&&(x.y=p-c);break;case pt:u+x.y>f&&(x.y=f-u);break}};switch(h){case Ie:m+=x.x,c+=x.y;break;case st:if(x.x>=0&&(v>=s||l&&(c<=p||u>=f))){b=!1;break}T(st),d+=x.x,d<0&&(h=ht,d=-d,m-=d),l&&(y=d/l,c+=(r.height-y)/2);break;case et:if(x.y<=0&&(c<=p||l&&(m<=g||v>=s))){b=!1;break}T(et),y-=x.y,c+=x.y,y<0&&(h=pt,y=-y,c-=y),l&&(d=y*l,m+=(r.width-d)/2);break;case ht:if(x.x<=0&&(m<=g||l&&(c<=p||u>=f))){b=!1;break}T(ht),d-=x.x,m+=x.x,d<0&&(h=st,d=-d,m-=d),l&&(y=d/l,c+=(r.height-y)/2);break;case pt:if(x.y>=0&&(u>=f||l&&(m<=g||v>=s))){b=!1;break}T(pt),y+=x.y,y<0&&(h=et,y=-y,c-=y),l&&(d=y*l,m+=(r.width-d)/2);break;case wt:if(l){if(x.y<=0&&(c<=p||v>=s)){b=!1;break}T(et),y-=x.y,c+=x.y,d=y*l}else T(et),T(st),x.x>=0?v<s?d+=x.x:x.y<=0&&c<=p&&(b=!1):d+=x.x,x.y<=0?c>p&&(y-=x.y,c+=x.y):(y-=x.y,c+=x.y);d<0&&y<0?(h=St,y=-y,d=-d,c-=y,m-=d):d<0?(h=Et,d=-d,m-=d):y<0&&(h=Tt,y=-y,c-=y);break;case Et:if(l){if(x.y<=0&&(c<=p||m<=g)){b=!1;break}T(et),y-=x.y,c+=x.y,d=y*l,m+=r.width-d}else T(et),T(ht),x.x<=0?m>g?(d-=x.x,m+=x.x):x.y<=0&&c<=p&&(b=!1):(d-=x.x,m+=x.x),x.y<=0?c>p&&(y-=x.y,c+=x.y):(y-=x.y,c+=x.y);d<0&&y<0?(h=Tt,y=-y,d=-d,c-=y,m-=d):d<0?(h=wt,d=-d,m-=d):y<0&&(h=St,y=-y,c-=y);break;case St:if(l){if(x.x<=0&&(m<=g||u>=f)){b=!1;break}T(ht),d-=x.x,m+=x.x,y=d/l}else T(pt),T(ht),x.x<=0?m>g?(d-=x.x,m+=x.x):x.y>=0&&u>=f&&(b=!1):(d-=x.x,m+=x.x),x.y>=0?u<f&&(y+=x.y):y+=x.y;d<0&&y<0?(h=wt,y=-y,d=-d,c-=y,m-=d):d<0?(h=Tt,d=-d,m-=d):y<0&&(h=Et,y=-y,c-=y);break;case Tt:if(l){if(x.x>=0&&(v>=s||u>=f)){b=!1;break}T(st),d+=x.x,y=d/l}else T(pt),T(st),x.x>=0?v<s?d+=x.x:x.y>=0&&u>=f&&(b=!1):d+=x.x,x.y>=0?u<f&&(y+=x.y):y+=x.y;d<0&&y<0?(h=Et,y=-y,d=-d,c-=y,m-=d):d<0?(h=St,d=-d,m-=d):y<0&&(h=wt,y=-y,c-=y);break;case Si:this.move(x.x,x.y),b=!1;break;case Ci:this.zoom(Qn(a),t),b=!1;break;case Ti:if(!x.x||!x.y){b=!1;break}w=Li(this.cropper),m=E.startX-w.left,c=E.startY-w.top,d=r.minWidth,y=r.minHeight,x.x>0?h=x.y>0?Tt:wt:x.x<0&&(m-=d,h=x.y>0?St:Et),x.y<0&&(c-=y),this.cropped||(J(this.cropBox,X),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(r.width=d,r.height=y,r.left=m,r.top=c,this.action=h,this.renderCropBox()),U(a,function(_){_.startX=_.endX,_.startY=_.endY})}},dr={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&G(this.dragBox,Bt),J(this.cropBox,X),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),J(this.dragBox,Bt),G(this.cropBox,X)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,U(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,J(this.cropper,je)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,G(this.cropper,je)),this},destroy:function(){var t=this.element;return t[H]?(t[H]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,o=i.left,r=i.top;return this.moveTo(Kt(t)?t:o+Number(t),Kt(e)?e:r+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(L(t)&&(i.left=t,o=!0),L(e)&&(i.top=e,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var o=this.options,r=this.canvasData,a=r.width,h=r.height,l=r.naturalWidth,m=r.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&o.zoomable){var c=l*t,d=m*t;if(yt(this.element,we,{ratio:t,oldRatio:a/l,originalEvent:i})===!1)return this;if(i){var y=this.pointers,v=Li(this.cropper),u=y&&Object.keys(y).length?Zn(y):{pageX:i.pageX,pageY:i.pageY};r.left-=(c-a)*((u.pageX-v.left-r.left)/a),r.top-=(d-h)*((u.pageY-v.top-r.top)/h)}else gt(e)&&L(e.x)&&L(e.y)?(r.left-=(c-a)*((e.x-r.left)/a),r.top-=(d-h)*((e.y-r.top)/h)):(r.left-=(c-a)/2,r.top-=(d-h)/2);r.width=c,r.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),L(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,L(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(L(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(L(t)&&(i.scaleX=t,o=!0),L(e)&&(i.scaleY=e,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,i=this.imageData,o=this.canvasData,r=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var h=i.width/i.naturalWidth;if(U(a,function(c,d){a[d]=c/h}),t){var l=Math.round(a.y+a.height),m=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=m-a.x,a.height=l-a.y}}else a={x:0,y:0,width:0,height:0};return e.rotatable&&(a.rotate=i.rotate||0),e.scalable&&(a.scaleX=i.scaleX||1,a.scaleY=i.scaleY||1),a},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,r={};if(this.ready&&!this.disabled&&gt(t)){var a=!1;e.rotatable&&L(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,a=!0),e.scalable&&(L(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,a=!0),L(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var h=i.width/i.naturalWidth;L(t.x)&&(r.left=t.x*h+o.left),L(t.y)&&(r.top=t.y*h+o.top),L(t.width)&&(r.width=t.width*h),L(t.height)&&(r.height=t.height*h),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&U(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&gt(t)&&(L(t.left)&&(e.left=t.left),L(t.top)&&(e.top=t.top),L(t.width)?(e.width=t.width,e.height=t.width/i):L(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,i=this.options.aspectRatio,o,r;return this.ready&&this.cropped&&!this.disabled&&gt(t)&&(L(t.left)&&(e.left=t.left),L(t.top)&&(e.top=t.top),L(t.width)&&t.width!==e.width&&(o=!0,e.width=t.width),L(t.height)&&t.height!==e.height&&(r=!0,e.height=t.height),i&&(o?e.height=e.width/i:r&&(e.width=e.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=tr(this.image,this.imageData,e,t);if(!this.cropped)return i;var o=this.getData(t.rounded),r=o.x,a=o.y,h=o.width,l=o.height,m=i.width/Math.floor(e.naturalWidth);m!==1&&(r*=m,a*=m,h*=m,l*=m);var c=h/l,d=nt({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),y=nt({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),v=nt({aspectRatio:c,width:t.width||(m!==1?i.width:h),height:t.height||(m!==1?i.height:l)}),u=v.width,g=v.height;u=Math.min(d.width,Math.max(y.width,u)),g=Math.min(d.height,Math.max(y.height,g));var p=document.createElement("canvas"),s=p.getContext("2d");p.width=vt(u),p.height=vt(g),s.fillStyle=t.fillColor||"transparent",s.fillRect(0,0,u,g);var f=t.imageSmoothingEnabled,b=f===void 0?!0:f,w=t.imageSmoothingQuality;s.imageSmoothingEnabled=b,w&&(s.imageSmoothingQuality=w);var E=i.width,x=i.height,T=r,_=a,R,z,A,W,O,M;T<=-h||T>E?(T=0,R=0,A=0,O=0):T<=0?(A=-T,T=0,R=Math.min(E,h+T),O=R):T<=E&&(A=0,R=Math.min(h,E-T),O=R),R<=0||_<=-l||_>x?(_=0,z=0,W=0,M=0):_<=0?(W=-_,_=0,z=Math.min(x,l+_),M=z):_<=x&&(W=0,z=Math.min(l,x-_),M=z);var P=[T,_,R,z];if(O>0&&M>0){var N=u/h;P.push(A*N,W*N,O*N,M*N)}return s.drawImage.apply(s,[i].concat(Ei(P.map(function(q){return Math.floor(vt(q))})))),p},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!Kt(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var r=t===Me,a=e.movable&&t===Di;t=r||a?t:_i,e.dragMode=t,Rt(i,_t,t),mt(i,ge,r),mt(i,me,a),e.cropBoxMovable||(Rt(o,_t,t),mt(o,ge,r),mt(o,me,a))}return this}},fr=tt.Cropper,Ai=function(){function n(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Dn(this,n),!t||!Hn.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=j({},Qe,gt(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return _n(n,[{key:"init",value:function(){var e=this.element,i=e.tagName.toLowerCase(),o;if(!e[H]){if(e[H]=this,i==="img"){if(this.isImg=!0,o=e.getAttribute("src")||"",this.originalUrl=o,!o)return;o=e.src}else i==="canvas"&&window.HTMLCanvasElement&&(o=e.toDataURL());this.load(o)}}},{key:"load",value:function(e){var i=this;if(e){this.url=e,this.imageData={};var o=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Bn.test(e)){Wn.test(e)?this.read(nr(e)):this.clone();return}var a=new XMLHttpRequest,h=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=h,a.onerror=h,a.ontimeout=h,a.onprogress=function(){a.getResponseHeader("content-type")!==Ke&&a.abort()},a.onload=function(){i.read(a.response)},a.onloadend=function(){i.reloading=!1,i.xhr=null},r.checkCrossOrigin&&Je(e)&&o.crossOrigin&&(e=ti(e)),a.open("GET",e,!0),a.responseType="arraybuffer",a.withCredentials=o.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(e){var i=this.options,o=this.imageData,r=or(e),a=0,h=1,l=1;if(r>1){this.url=rr(e,Ke);var m=ar(r);a=m.rotate,h=m.scaleX,l=m.scaleY}i.rotatable&&(o.rotate=a),i.scalable&&(o.scaleX=h,o.scaleY=l),this.clone()}},{key:"clone",value:function(){var e=this.element,i=this.url,o=e.crossOrigin,r=i;this.options.checkCrossOrigin&&Je(i)&&(o||(o="anonymous"),r=ti(i)),this.crossOrigin=o,this.crossOriginUrl=r;var a=document.createElement("img");o&&(a.crossOrigin=o),a.src=r||i,a.alt=e.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),G(a,Fe),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var e=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var o=tt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(tt.navigator.userAgent),r=function(m,c){j(e.imageData,{naturalWidth:m,naturalHeight:c,aspectRatio:m/c}),e.initialImageData=j({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(i.naturalWidth&&!o){r(i.naturalWidth,i.naturalHeight);return}var a=document.createElement("img"),h=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){r(a.width,a.height),o||h.removeChild(a)},a.src=i.src,o||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",h.appendChild(a))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,i=this.options,o=this.image,r=e.parentNode,a=document.createElement("div");a.innerHTML=jn;var h=a.querySelector(".".concat(H,"-container")),l=h.querySelector(".".concat(H,"-canvas")),m=h.querySelector(".".concat(H,"-drag-box")),c=h.querySelector(".".concat(H,"-crop-box")),d=c.querySelector(".".concat(H,"-face"));this.container=r,this.cropper=h,this.canvas=l,this.dragBox=m,this.cropBox=c,this.viewBox=h.querySelector(".".concat(H,"-view-box")),this.face=d,l.appendChild(o),G(e,X),r.insertBefore(h,e.nextSibling),J(o,Fe),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,G(c,X),i.guides||G(c.getElementsByClassName("".concat(H,"-dashed")),X),i.center||G(c.getElementsByClassName("".concat(H,"-center")),X),i.background&&G(h,"".concat(H,"-bg")),i.highlight||G(d,Ln),i.cropBoxMovable&&(G(d,me),Rt(d,_t,Ie)),i.cropBoxResizable||(G(c.getElementsByClassName("".concat(H,"-line")),X),G(c.getElementsByClassName("".concat(H,"-point")),X)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),$(i.ready)&&V(e,Xe,i.ready,{once:!0}),yt(e,Xe)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),J(this.element,X)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=fr,n}},{key:"setDefaults",value:function(e){j(Qe,gt(e)&&e)}}])}();j(Ai.prototype,sr,hr,cr,lr,ur,dr);function Oe(n,t=[]){let e=[];function i(r,a){const h=S.createContext(a),l=e.length;e=[...e,a];function m(d){const{scope:y,children:v,...u}=d,g=(y==null?void 0:y[n][l])||h,p=S.useMemo(()=>u,Object.values(u));return D.jsx(g.Provider,{value:p,children:v})}function c(d,y){const v=(y==null?void 0:y[n][l])||h,u=S.useContext(v);if(u)return u;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${r}\``)}return m.displayName=r+"Provider",[m,c]}const o=()=>{const r=e.map(a=>S.createContext(a));return function(h){const l=(h==null?void 0:h[n])||r;return S.useMemo(()=>({[`__scope${n}`]:{...h,[n]:l}}),[h,l])}};return o.scopeName=n,[i,pr(o,...t)]}function pr(...n){const t=n[0];if(n.length===1)return t;const e=()=>{const i=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(r){const a=i.reduce((h,{useScope:l,scopeName:m})=>{const d=l(r)[`__scope${m}`];return{...h,...d}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return e.scopeName=t.scopeName,e}function gr(n,t){typeof n=="function"?n(t):n!=null&&(n.current=t)}function zi(...n){return t=>n.forEach(e=>gr(e,t))}function Te(...n){return S.useCallback(zi(...n),n)}var Wt=S.forwardRef((n,t)=>{const{children:e,...i}=n,o=S.Children.toArray(e),r=o.find(vr);if(r){const a=r.props.children,h=o.map(l=>l===r?S.Children.count(a)>1?S.Children.only(null):S.isValidElement(a)?a.props.children:null:l);return D.jsx(Se,{...i,ref:t,children:S.isValidElement(a)?S.cloneElement(a,void 0,h):null})}return D.jsx(Se,{...i,ref:t,children:e})});Wt.displayName="Slot";var Se=S.forwardRef((n,t)=>{const{children:e,...i}=n;if(S.isValidElement(e)){const o=br(e);return S.cloneElement(e,{...yr(i,e.props),ref:t?zi(t,o):o})}return S.Children.count(e)>1?S.Children.only(null):null});Se.displayName="SlotClone";var mr=({children:n})=>D.jsx(D.Fragment,{children:n});function vr(n){return S.isValidElement(n)&&n.type===mr}function yr(n,t){const e={...t};for(const i in t){const o=n[i],r=t[i];/^on[A-Z]/.test(i)?o&&r?e[i]=(...h)=>{r(...h),o(...h)}:o&&(e[i]=o):i==="style"?e[i]={...o,...r}:i==="className"&&(e[i]=[o,r].filter(Boolean).join(" "))}return{...n,...e}}function br(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?n.props.ref:n.props.ref||n.ref)}var xr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],It=xr.reduce((n,t)=>{const e=S.forwardRef((i,o)=>{const{asChild:r,...a}=i,h=r?Wt:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(h,{...a,ref:o})});return e.displayName=`Primitive.${t}`,{...n,[t]:e}},{});function ct(n,t,{checkForDefaultPrevented:e=!0}={}){return function(o){if(n==null||n(o),e===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function wr(n){const t=n+"CollectionProvider",[e,i]=Oe(t),[o,r]=e(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:u,children:g}=v,p=k.useRef(null),s=k.useRef(new Map).current;return D.jsx(o,{scope:u,itemMap:s,collectionRef:p,children:g})};a.displayName=t;const h=n+"CollectionSlot",l=k.forwardRef((v,u)=>{const{scope:g,children:p}=v,s=r(h,g),f=Te(u,s.collectionRef);return D.jsx(Wt,{ref:f,children:p})});l.displayName=h;const m=n+"CollectionItemSlot",c="data-radix-collection-item",d=k.forwardRef((v,u)=>{const{scope:g,children:p,...s}=v,f=k.useRef(null),b=Te(u,f),w=r(m,g);return k.useEffect(()=>(w.itemMap.set(f,{ref:f,...s}),()=>void w.itemMap.delete(f))),D.jsx(Wt,{[c]:"",ref:b,children:p})});d.displayName=m;function y(v){const u=r(n+"CollectionConsumer",v);return k.useCallback(()=>{const p=u.collectionRef.current;if(!p)return[];const s=Array.from(p.querySelectorAll(`[${c}]`));return Array.from(u.itemMap.values()).sort((w,E)=>s.indexOf(w.ref.current)-s.indexOf(E.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:a,Slot:l,ItemSlot:d},y,i]}var Er=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},Tr=mn.useId||(()=>{}),Sr=0;function Cr(n){const[t,e]=S.useState(Tr());return Er(()=>{e(i=>i??String(Sr++))},[n]),t?`radix-${t}`:""}function Le(n){const t=S.useRef(n);return S.useEffect(()=>{t.current=n}),S.useMemo(()=>(...e)=>{var i;return(i=t.current)==null?void 0:i.call(t,...e)},[])}function Gt({prop:n,defaultProp:t,onChange:e=()=>{}}){const[i,o]=Dr({defaultProp:t,onChange:e}),r=n!==void 0,a=r?n:i,h=Le(e),l=S.useCallback(m=>{if(r){const d=typeof m=="function"?m(n):m;d!==n&&h(d)}else o(m)},[r,n,o,h]);return[a,l]}function Dr({defaultProp:n,onChange:t}){const e=S.useState(n),[i]=e,o=S.useRef(i),r=Le(t);return S.useEffect(()=>{o.current!==i&&(r(i),o.current=i)},[i,o,r]),e}var _r=S.createContext(void 0);function Ni(n){const t=S.useContext(_r);return n||t||"ltr"}var Zt="rovingFocusGroup.onEntryFocus",Rr={bubbles:!1,cancelable:!0},Yt="RovingFocusGroup",[Ce,Bi,Ir]=wr(Yt),[Mr,Wi]=Oe(Yt,[Ir]),[Pr,Or]=Mr(Yt),Hi=S.forwardRef((n,t)=>D.jsx(Ce.Provider,{scope:n.__scopeRovingFocusGroup,children:D.jsx(Ce.Slot,{scope:n.__scopeRovingFocusGroup,children:D.jsx(Lr,{...n,ref:t})})}));Hi.displayName=Yt;var Lr=S.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:e,orientation:i,loop:o=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:l,onEntryFocus:m,preventScrollOnEntryFocus:c=!1,...d}=n,y=S.useRef(null),v=Te(t,y),u=Ni(r),[g=null,p]=Gt({prop:a,defaultProp:h,onChange:l}),[s,f]=S.useState(!1),b=Le(m),w=Bi(e),E=S.useRef(!1),[x,T]=S.useState(0);return S.useEffect(()=>{const _=y.current;if(_)return _.addEventListener(Zt,b),()=>_.removeEventListener(Zt,b)},[b]),D.jsx(Pr,{scope:e,orientation:i,dir:u,loop:o,currentTabStopId:g,onItemFocus:S.useCallback(_=>p(_),[p]),onItemShiftTab:S.useCallback(()=>f(!0),[]),onFocusableItemAdd:S.useCallback(()=>T(_=>_+1),[]),onFocusableItemRemove:S.useCallback(()=>T(_=>_-1),[]),children:D.jsx(It.div,{tabIndex:s||x===0?-1:0,"data-orientation":i,...d,ref:v,style:{outline:"none",...n.style},onMouseDown:ct(n.onMouseDown,()=>{E.current=!0}),onFocus:ct(n.onFocus,_=>{const R=!E.current;if(_.target===_.currentTarget&&R&&!s){const z=new CustomEvent(Zt,Rr);if(_.currentTarget.dispatchEvent(z),!z.defaultPrevented){const A=w().filter(N=>N.focusable),W=A.find(N=>N.active),O=A.find(N=>N.id===g),P=[W,O,...A].filter(Boolean).map(N=>N.ref.current);Ui(P,c)}}E.current=!1}),onBlur:ct(n.onBlur,()=>f(!1))})})}),ji="RovingFocusGroupItem",Fi=S.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:e,focusable:i=!0,active:o=!1,tabStopId:r,...a}=n,h=Cr(),l=r||h,m=Or(ji,e),c=m.currentTabStopId===l,d=Bi(e),{onFocusableItemAdd:y,onFocusableItemRemove:v}=m;return S.useEffect(()=>{if(i)return y(),()=>v()},[i,y,v]),D.jsx(Ce.ItemSlot,{scope:e,id:l,focusable:i,active:o,children:D.jsx(It.span,{tabIndex:c?0:-1,"data-orientation":m.orientation,...a,ref:t,onMouseDown:ct(n.onMouseDown,u=>{i?m.onItemFocus(l):u.preventDefault()}),onFocus:ct(n.onFocus,()=>m.onItemFocus(l)),onKeyDown:ct(n.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){m.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const g=zr(u,m.orientation,m.dir);if(g!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let s=d().filter(f=>f.focusable).map(f=>f.ref.current);if(g==="last")s.reverse();else if(g==="prev"||g==="next"){g==="prev"&&s.reverse();const f=s.indexOf(u.currentTarget);s=m.loop?Nr(s,f+1):s.slice(f+1)}setTimeout(()=>Ui(s))}})})})});Fi.displayName=ji;var kr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ar(n,t){return t!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function zr(n,t,e){const i=Ar(n.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return kr[i]}function Ui(n,t=!1){const e=document.activeElement;for(const i of n)if(i===e||(i.focus({preventScroll:t}),document.activeElement!==e))return}function Nr(n,t){return n.map((e,i)=>n[(t+i)%n.length])}var Br=Hi,Wr=Fi,Hr="Toggle",Gi=S.forwardRef((n,t)=>{const{pressed:e,defaultPressed:i=!1,onPressedChange:o,...r}=n,[a=!1,h]=Gt({prop:e,onChange:o,defaultProp:i});return D.jsx(It.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":n.disabled?"":void 0,...r,ref:t,onClick:ct(n.onClick,()=>{n.disabled||h(!a)})})});Gi.displayName=Hr;var xt="ToggleGroup",[Yi,Co]=Oe(xt,[Wi]),$i=Wi(),ke=k.forwardRef((n,t)=>{const{type:e,...i}=n;if(e==="single"){const o=i;return D.jsx(jr,{...o,ref:t})}if(e==="multiple"){const o=i;return D.jsx(Fr,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${xt}\``)});ke.displayName=xt;var[Xi,qi]=Yi(xt),jr=k.forwardRef((n,t)=>{const{value:e,defaultValue:i,onValueChange:o=()=>{},...r}=n,[a,h]=Gt({prop:e,defaultProp:i,onChange:o});return D.jsx(Xi,{scope:n.__scopeToggleGroup,type:"single",value:a?[a]:[],onItemActivate:h,onItemDeactivate:k.useCallback(()=>h(""),[h]),children:D.jsx(Vi,{...r,ref:t})})}),Fr=k.forwardRef((n,t)=>{const{value:e,defaultValue:i,onValueChange:o=()=>{},...r}=n,[a=[],h]=Gt({prop:e,defaultProp:i,onChange:o}),l=k.useCallback(c=>h((d=[])=>[...d,c]),[h]),m=k.useCallback(c=>h((d=[])=>d.filter(y=>y!==c)),[h]);return D.jsx(Xi,{scope:n.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:m,children:D.jsx(Vi,{...r,ref:t})})});ke.displayName=xt;var[Ur,Gr]=Yi(xt),Vi=k.forwardRef((n,t)=>{const{__scopeToggleGroup:e,disabled:i=!1,rovingFocus:o=!0,orientation:r,dir:a,loop:h=!0,...l}=n,m=$i(e),c=Ni(a),d={role:"group",dir:c,...l};return D.jsx(Ur,{scope:e,rovingFocus:o,disabled:i,children:o?D.jsx(Br,{asChild:!0,...m,orientation:r,dir:c,loop:h,children:D.jsx(It.div,{...d,ref:t})}):D.jsx(It.div,{...d,ref:t})})}),Ht="ToggleGroupItem",Ki=k.forwardRef((n,t)=>{const e=qi(Ht,n.__scopeToggleGroup),i=Gr(Ht,n.__scopeToggleGroup),o=$i(n.__scopeToggleGroup),r=e.value.includes(n.value),a=i.disabled||n.disabled,h={...n,pressed:r,disabled:a},l=k.useRef(null);return i.rovingFocus?D.jsx(Wr,{asChild:!0,...o,focusable:!a,active:r,ref:l,children:D.jsx(ei,{...h,ref:t})}):D.jsx(ei,{...h,ref:t})});Ki.displayName=Ht;var ei=k.forwardRef((n,t)=>{const{__scopeToggleGroup:e,value:i,...o}=n,r=qi(Ht,e),a={role:"radio","aria-checked":n.pressed,"aria-pressed":void 0},h=r.type==="single"?a:void 0;return D.jsx(Gi,{...h,...o,ref:t,onPressedChange:l=>{l?r.onItemActivate(i):r.onItemDeactivate(i)}})}),Yr=ke,$r=Ki,Qi={exports:{}},Jt={exports:{}};/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */var ii;function Xr(){return ii||(ii=1,function(n){(function(t,e){n.exports?n.exports=e():t.getSize=e()})(window,function(){function e(v){var u=parseFloat(v),g=v.indexOf("%")==-1&&!isNaN(u);return g&&u}function i(){}var o=typeof console>"u"?i:function(v){console.error(v)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=r.length;function h(){for(var v={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},u=0;u<a;u++){var g=r[u];v[g]=0}return v}function l(v){var u=getComputedStyle(v);return u||o("Style returned "+u+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),u}var m=!1,c;function d(){if(!m){m=!0;var v=document.createElement("div");v.style.width="200px",v.style.padding="1px 2px 3px 4px",v.style.borderStyle="solid",v.style.borderWidth="1px 2px 3px 4px",v.style.boxSizing="border-box";var u=document.body||document.documentElement;u.appendChild(v);var g=l(v);c=Math.round(e(g.width))==200,y.isBoxSizeOuter=c,u.removeChild(v)}}function y(v){if(d(),typeof v=="string"&&(v=document.querySelector(v)),!(!v||typeof v!="object"||!v.nodeType)){var u=l(v);if(u.display=="none")return h();var g={};g.width=v.offsetWidth,g.height=v.offsetHeight;for(var p=g.isBorderBox=u.boxSizing=="border-box",s=0;s<a;s++){var f=r[s],b=u[f],w=parseFloat(b);g[f]=isNaN(w)?0:w}var E=g.paddingLeft+g.paddingRight,x=g.paddingTop+g.paddingBottom,T=g.marginLeft+g.marginRight,_=g.marginTop+g.marginBottom,R=g.borderLeftWidth+g.borderRightWidth,z=g.borderTopWidth+g.borderBottomWidth,A=p&&c,W=e(u.width);W!==!1&&(g.width=W+(A?0:E+R));var O=e(u.height);return O!==!1&&(g.height=O+(A?0:x+z)),g.innerWidth=g.width-(E+R),g.innerHeight=g.height-(x+z),g.outerWidth=g.width+T,g.outerHeight=g.height+_,g}}return y})}(Jt)),Jt.exports}var te={exports:{}},ee={exports:{}},ni;function Zi(){return ni||(ni=1,function(n){(function(t,e){n.exports?n.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:Ft,function(){function t(){}var e=t.prototype;return e.on=function(i,o){if(!(!i||!o)){var r=this._events=this._events||{},a=r[i]=r[i]||[];return a.indexOf(o)==-1&&a.push(o),this}},e.once=function(i,o){if(!(!i||!o)){this.on(i,o);var r=this._onceEvents=this._onceEvents||{},a=r[i]=r[i]||{};return a[o]=!0,this}},e.off=function(i,o){var r=this._events&&this._events[i];if(!(!r||!r.length)){var a=r.indexOf(o);return a!=-1&&r.splice(a,1),this}},e.emitEvent=function(i,o){var r=this._events&&this._events[i];if(!(!r||!r.length)){r=r.slice(0),o=o||[];for(var a=this._onceEvents&&this._onceEvents[i],h=0;h<r.length;h++){var l=r[h],m=a&&a[l];m&&(this.off(i,l),delete a[l]),l.apply(this,o)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t})}(ee)),ee.exports}var ie={exports:{}};/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */var ri;function Ji(){return ri||(ri=1,function(n){(function(t,e){n.exports?n.exports=e():t.getSize=e()})(window,function(){function e(v){var u=parseFloat(v),g=v.indexOf("%")==-1&&!isNaN(u);return g&&u}function i(){}var o=typeof console>"u"?i:function(v){console.error(v)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=r.length;function h(){for(var v={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},u=0;u<a;u++){var g=r[u];v[g]=0}return v}function l(v){var u=getComputedStyle(v);return u||o("Style returned "+u+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),u}var m=!1,c;function d(){if(!m){m=!0;var v=document.createElement("div");v.style.width="200px",v.style.padding="1px 2px 3px 4px",v.style.borderStyle="solid",v.style.borderWidth="1px 2px 3px 4px",v.style.boxSizing="border-box";var u=document.body||document.documentElement;u.appendChild(v);var g=l(v);c=Math.round(e(g.width))==200,y.isBoxSizeOuter=c,u.removeChild(v)}}function y(v){if(d(),typeof v=="string"&&(v=document.querySelector(v)),!(!v||typeof v!="object"||!v.nodeType)){var u=l(v);if(u.display=="none")return h();var g={};g.width=v.offsetWidth,g.height=v.offsetHeight;for(var p=g.isBorderBox=u.boxSizing=="border-box",s=0;s<a;s++){var f=r[s],b=u[f],w=parseFloat(b);g[f]=isNaN(w)?0:w}var E=g.paddingLeft+g.paddingRight,x=g.paddingTop+g.paddingBottom,T=g.marginLeft+g.marginRight,_=g.marginTop+g.marginBottom,R=g.borderLeftWidth+g.borderRightWidth,z=g.borderTopWidth+g.borderBottomWidth,A=p&&c,W=e(u.width);W!==!1&&(g.width=W+(A?0:E+R));var O=e(u.height);return O!==!1&&(g.height=O+(A?0:x+z)),g.innerWidth=g.width-(E+R),g.innerHeight=g.height-(x+z),g.outerWidth=g.width+T,g.outerHeight=g.height+_,g}}return y})}(ie)),ie.exports}var ne={exports:{}},re={exports:{}},oi;function qr(){return oi||(oi=1,function(n){(function(t,e){n.exports?n.exports=e():t.matchesSelector=e()})(window,function(){var e=function(){var i=window.Element.prototype;if(i.matches)return"matches";if(i.matchesSelector)return"matchesSelector";for(var o=["webkit","moz","ms","o"],r=0;r<o.length;r++){var a=o[r],h=a+"MatchesSelector";if(i[h])return h}}();return function(o,r){return o[e](r)}})}(re)),re.exports}var ai;function Vr(){return ai||(ai=1,function(n){(function(t,e){n.exports?n.exports=e(t,qr()):t.fizzyUIUtils=e(t,t.matchesSelector)})(window,function(e,i){var o={};o.extend=function(h,l){for(var m in l)h[m]=l[m];return h},o.modulo=function(h,l){return(h%l+l)%l};var r=Array.prototype.slice;o.makeArray=function(h){if(Array.isArray(h))return h;if(h==null)return[];var l=typeof h=="object"&&typeof h.length=="number";return l?r.call(h):[h]},o.removeFrom=function(h,l){var m=h.indexOf(l);m!=-1&&h.splice(m,1)},o.getParent=function(h,l){for(;h.parentNode&&h!=document.body;)if(h=h.parentNode,i(h,l))return h},o.getQueryElement=function(h){return typeof h=="string"?document.querySelector(h):h},o.handleEvent=function(h){var l="on"+h.type;this[l]&&this[l](h)},o.filterFindElements=function(h,l){h=o.makeArray(h);var m=[];return h.forEach(function(c){if(c instanceof HTMLElement){if(!l){m.push(c);return}i(c,l)&&m.push(c);for(var d=c.querySelectorAll(l),y=0;y<d.length;y++)m.push(d[y])}}),m},o.debounceMethod=function(h,l,m){m=m||100;var c=h.prototype[l],d=l+"Timeout";h.prototype[l]=function(){var y=this[d];clearTimeout(y);var v=arguments,u=this;this[d]=setTimeout(function(){c.apply(u,v),delete u[d]},m)}},o.docReady=function(h){var l=document.readyState;l=="complete"||l=="interactive"?setTimeout(h):document.addEventListener("DOMContentLoaded",h)},o.toDashed=function(h){return h.replace(/(.)([A-Z])/g,function(l,m,c){return m+"-"+c}).toLowerCase()};var a=e.console;return o.htmlInit=function(h,l){o.docReady(function(){var m=o.toDashed(l),c="data-"+m,d=document.querySelectorAll("["+c+"]"),y=document.querySelectorAll(".js-"+m),v=o.makeArray(d).concat(o.makeArray(y)),u=c+"-options",g=e.jQuery;v.forEach(function(p){var s=p.getAttribute(c)||p.getAttribute(u),f;try{f=s&&JSON.parse(s)}catch(w){a&&a.error("Error parsing "+c+" on "+p.className+": "+w);return}var b=new h(p,f);g&&g.data(p,l,b)})})},o})}(ne)),ne.exports}var oe={exports:{}},si;function Kr(){return si||(si=1,function(n){(function(t,e){n.exports?n.exports=e(Zi(),Ji()):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))})(window,function(e,i){function o(p){for(var s in p)return!1;return s=null,!0}var r=document.documentElement.style,a=typeof r.transition=="string"?"transition":"WebkitTransition",h=typeof r.transform=="string"?"transform":"WebkitTransform",l={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],m={transform:h,transition:a,transitionDuration:a+"Duration",transitionProperty:a+"Property",transitionDelay:a+"Delay"};function c(p,s){p&&(this.element=p,this.layout=s,this.position={x:0,y:0},this._create())}var d=c.prototype=Object.create(e.prototype);d.constructor=c,d._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},d.handleEvent=function(p){var s="on"+p.type;this[s]&&this[s](p)},d.getSize=function(){this.size=i(this.element)},d.css=function(p){var s=this.element.style;for(var f in p){var b=m[f]||f;s[b]=p[f]}},d.getPosition=function(){var p=getComputedStyle(this.element),s=this.layout._getOption("originLeft"),f=this.layout._getOption("originTop"),b=p[s?"left":"right"],w=p[f?"top":"bottom"],E=parseFloat(b),x=parseFloat(w),T=this.layout.size;b.indexOf("%")!=-1&&(E=E/100*T.width),w.indexOf("%")!=-1&&(x=x/100*T.height),E=isNaN(E)?0:E,x=isNaN(x)?0:x,E-=s?T.paddingLeft:T.paddingRight,x-=f?T.paddingTop:T.paddingBottom,this.position.x=E,this.position.y=x},d.layoutPosition=function(){var p=this.layout.size,s={},f=this.layout._getOption("originLeft"),b=this.layout._getOption("originTop"),w=f?"paddingLeft":"paddingRight",E=f?"left":"right",x=f?"right":"left",T=this.position.x+p[w];s[E]=this.getXValue(T),s[x]="";var _=b?"paddingTop":"paddingBottom",R=b?"top":"bottom",z=b?"bottom":"top",A=this.position.y+p[_];s[R]=this.getYValue(A),s[z]="",this.css(s),this.emitEvent("layout",[this])},d.getXValue=function(p){var s=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!s?p/this.layout.size.width*100+"%":p+"px"},d.getYValue=function(p){var s=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&s?p/this.layout.size.height*100+"%":p+"px"},d._transitionTo=function(p,s){this.getPosition();var f=this.position.x,b=this.position.y,w=p==this.position.x&&s==this.position.y;if(this.setPosition(p,s),w&&!this.isTransitioning){this.layoutPosition();return}var E=p-f,x=s-b,T={};T.transform=this.getTranslate(E,x),this.transition({to:T,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},d.getTranslate=function(p,s){var f=this.layout._getOption("originLeft"),b=this.layout._getOption("originTop");return p=f?p:-p,s=b?s:-s,"translate3d("+p+"px, "+s+"px, 0)"},d.goTo=function(p,s){this.setPosition(p,s),this.layoutPosition()},d.moveTo=d._transitionTo,d.setPosition=function(p,s){this.position.x=parseFloat(p),this.position.y=parseFloat(s)},d._nonTransition=function(p){this.css(p.to),p.isCleaning&&this._removeStyles(p.to);for(var s in p.onTransitionEnd)p.onTransitionEnd[s].call(this)},d.transition=function(p){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(p);return}var s=this._transn;for(var f in p.onTransitionEnd)s.onEnd[f]=p.onTransitionEnd[f];for(f in p.to)s.ingProperties[f]=!0,p.isCleaning&&(s.clean[f]=!0);p.from&&(this.css(p.from),this.element.offsetHeight),this.enableTransition(p.to),this.css(p.to),this.isTransitioning=!0};function y(p){return p.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}var v="opacity,"+y(h);d.enableTransition=function(){if(!this.isTransitioning){var p=this.layout.options.transitionDuration;p=typeof p=="number"?p+"ms":p,this.css({transitionProperty:v,transitionDuration:p,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(l,this,!1)}},d.onwebkitTransitionEnd=function(p){this.ontransitionend(p)},d.onotransitionend=function(p){this.ontransitionend(p)};var u={"-webkit-transform":"transform"};d.ontransitionend=function(p){if(p.target===this.element){var s=this._transn,f=u[p.propertyName]||p.propertyName;if(delete s.ingProperties[f],o(s.ingProperties)&&this.disableTransition(),f in s.clean&&(this.element.style[p.propertyName]="",delete s.clean[f]),f in s.onEnd){var b=s.onEnd[f];b.call(this),delete s.onEnd[f]}this.emitEvent("transitionEnd",[this])}},d.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},d._removeStyles=function(p){var s={};for(var f in p)s[f]="";this.css(s)};var g={transitionProperty:"",transitionDuration:"",transitionDelay:""};return d.removeTransitionStyles=function(){this.css(g)},d.stagger=function(p){p=isNaN(p)?0:p,this.staggerDelay=p+"ms"},d.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},d.remove=function(){if(!a||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},d.reveal=function(){delete this.isHidden,this.css({display:""});var p=this.layout.options,s={},f=this.getHideRevealTransitionEndProperty("visibleStyle");s[f]=this.onRevealTransitionEnd,this.transition({from:p.hiddenStyle,to:p.visibleStyle,isCleaning:!0,onTransitionEnd:s})},d.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},d.getHideRevealTransitionEndProperty=function(p){var s=this.layout.options[p];if(s.opacity)return"opacity";for(var f in s)return f},d.hide=function(){this.isHidden=!0,this.css({display:""});var p=this.layout.options,s={},f=this.getHideRevealTransitionEndProperty("hiddenStyle");s[f]=this.onHideTransitionEnd,this.transition({from:p.visibleStyle,to:p.hiddenStyle,isCleaning:!0,onTransitionEnd:s})},d.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},d.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},c})}(oe)),oe.exports}/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */var hi;function tn(){return hi||(hi=1,function(n){(function(t,e){n.exports?n.exports=e(t,Zi(),Ji(),Vr(),Kr()):t.Outlayer=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,t.Outlayer.Item)})(window,function(e,i,o,r,a){var h=e.console,l=e.jQuery,m=function(){},c=0,d={};function y(s,f){var b=r.getQueryElement(s);if(!b){h&&h.error("Bad element for "+this.constructor.namespace+": "+(b||s));return}this.element=b,l&&(this.$element=l(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(f);var w=++c;this.element.outlayerGUID=w,d[w]=this,this._create();var E=this._getOption("initLayout");E&&this.layout()}y.namespace="outlayer",y.Item=a,y.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var v=y.prototype;r.extend(v,i.prototype),v.option=function(s){r.extend(this.options,s)},v._getOption=function(s){var f=this.constructor.compatOptions[s];return f&&this.options[f]!==void 0?this.options[f]:this.options[s]},y.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},v._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),r.extend(this.element.style,this.options.containerStyle);var s=this._getOption("resize");s&&this.bindResize()},v.reloadItems=function(){this.items=this._itemize(this.element.children)},v._itemize=function(s){for(var f=this._filterFindItemElements(s),b=this.constructor.Item,w=[],E=0;E<f.length;E++){var x=f[E],T=new b(x,this);w.push(T)}return w},v._filterFindItemElements=function(s){return r.filterFindElements(s,this.options.itemSelector)},v.getItemElements=function(){return this.items.map(function(s){return s.element})},v.layout=function(){this._resetLayout(),this._manageStamps();var s=this._getOption("layoutInstant"),f=s!==void 0?s:!this._isLayoutInited;this.layoutItems(this.items,f),this._isLayoutInited=!0},v._init=v.layout,v._resetLayout=function(){this.getSize()},v.getSize=function(){this.size=o(this.element)},v._getMeasurement=function(s,f){var b=this.options[s],w;b?(typeof b=="string"?w=this.element.querySelector(b):b instanceof HTMLElement&&(w=b),this[s]=w?o(w)[f]:b):this[s]=0},v.layoutItems=function(s,f){s=this._getItemsForLayout(s),this._layoutItems(s,f),this._postLayout()},v._getItemsForLayout=function(s){return s.filter(function(f){return!f.isIgnored})},v._layoutItems=function(s,f){if(this._emitCompleteOnItems("layout",s),!(!s||!s.length)){var b=[];s.forEach(function(w){var E=this._getItemLayoutPosition(w);E.item=w,E.isInstant=f||w.isLayoutInstant,b.push(E)},this),this._processLayoutQueue(b)}},v._getItemLayoutPosition=function(){return{x:0,y:0}},v._processLayoutQueue=function(s){this.updateStagger(),s.forEach(function(f,b){this._positionItem(f.item,f.x,f.y,f.isInstant,b)},this)},v.updateStagger=function(){var s=this.options.stagger;if(s==null){this.stagger=0;return}return this.stagger=p(s),this.stagger},v._positionItem=function(s,f,b,w,E){w?s.goTo(f,b):(s.stagger(E*this.stagger),s.moveTo(f,b))},v._postLayout=function(){this.resizeContainer()},v.resizeContainer=function(){var s=this._getOption("resizeContainer");if(s){var f=this._getContainerSize();f&&(this._setContainerMeasure(f.width,!0),this._setContainerMeasure(f.height,!1))}},v._getContainerSize=m,v._setContainerMeasure=function(s,f){if(s!==void 0){var b=this.size;b.isBorderBox&&(s+=f?b.paddingLeft+b.paddingRight+b.borderLeftWidth+b.borderRightWidth:b.paddingBottom+b.paddingTop+b.borderTopWidth+b.borderBottomWidth),s=Math.max(s,0),this.element.style[f?"width":"height"]=s+"px"}},v._emitCompleteOnItems=function(s,f){var b=this;function w(){b.dispatchEvent(s+"Complete",null,[f])}var E=f.length;if(!f||!E){w();return}var x=0;function T(){x++,x==E&&w()}f.forEach(function(_){_.once(s,T)})},v.dispatchEvent=function(s,f,b){var w=f?[f].concat(b):b;if(this.emitEvent(s,w),l)if(this.$element=this.$element||l(this.element),f){var E=l.Event(f);E.type=s,this.$element.trigger(E,b)}else this.$element.trigger(s,b)},v.ignore=function(s){var f=this.getItem(s);f&&(f.isIgnored=!0)},v.unignore=function(s){var f=this.getItem(s);f&&delete f.isIgnored},v.stamp=function(s){s=this._find(s),s&&(this.stamps=this.stamps.concat(s),s.forEach(this.ignore,this))},v.unstamp=function(s){s=this._find(s),s&&s.forEach(function(f){r.removeFrom(this.stamps,f),this.unignore(f)},this)},v._find=function(s){if(s)return typeof s=="string"&&(s=this.element.querySelectorAll(s)),s=r.makeArray(s),s},v._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},v._getBoundingRect=function(){var s=this.element.getBoundingClientRect(),f=this.size;this._boundingRect={left:s.left+f.paddingLeft+f.borderLeftWidth,top:s.top+f.paddingTop+f.borderTopWidth,right:s.right-(f.paddingRight+f.borderRightWidth),bottom:s.bottom-(f.paddingBottom+f.borderBottomWidth)}},v._manageStamp=m,v._getElementOffset=function(s){var f=s.getBoundingClientRect(),b=this._boundingRect,w=o(s),E={left:f.left-b.left-w.marginLeft,top:f.top-b.top-w.marginTop,right:b.right-f.right-w.marginRight,bottom:b.bottom-f.bottom-w.marginBottom};return E},v.handleEvent=r.handleEvent,v.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},v.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},v.onresize=function(){this.resize()},r.debounceMethod(y,"onresize",100),v.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},v.needsResizeLayout=function(){var s=o(this.element),f=this.size&&s;return f&&s.innerWidth!==this.size.innerWidth},v.addItems=function(s){var f=this._itemize(s);return f.length&&(this.items=this.items.concat(f)),f},v.appended=function(s){var f=this.addItems(s);f.length&&(this.layoutItems(f,!0),this.reveal(f))},v.prepended=function(s){var f=this._itemize(s);if(f.length){var b=this.items.slice(0);this.items=f.concat(b),this._resetLayout(),this._manageStamps(),this.layoutItems(f,!0),this.reveal(f),this.layoutItems(b)}},v.reveal=function(s){if(this._emitCompleteOnItems("reveal",s),!(!s||!s.length)){var f=this.updateStagger();s.forEach(function(b,w){b.stagger(w*f),b.reveal()})}},v.hide=function(s){if(this._emitCompleteOnItems("hide",s),!(!s||!s.length)){var f=this.updateStagger();s.forEach(function(b,w){b.stagger(w*f),b.hide()})}},v.revealItemElements=function(s){var f=this.getItems(s);this.reveal(f)},v.hideItemElements=function(s){var f=this.getItems(s);this.hide(f)},v.getItem=function(s){for(var f=0;f<this.items.length;f++){var b=this.items[f];if(b.element==s)return b}},v.getItems=function(s){s=r.makeArray(s);var f=[];return s.forEach(function(b){var w=this.getItem(b);w&&f.push(w)},this),f},v.remove=function(s){var f=this.getItems(s);this._emitCompleteOnItems("remove",f),!(!f||!f.length)&&f.forEach(function(b){b.remove(),r.removeFrom(this.items,b)},this)},v.destroy=function(){var s=this.element.style;s.height="",s.position="",s.width="",this.items.forEach(function(b){b.destroy()}),this.unbindResize();var f=this.element.outlayerGUID;delete d[f],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},y.data=function(s){s=r.getQueryElement(s);var f=s&&s.outlayerGUID;return f&&d[f]},y.create=function(s,f){var b=u(y);return b.defaults=r.extend({},y.defaults),r.extend(b.defaults,f),b.compatOptions=r.extend({},y.compatOptions),b.namespace=s,b.data=y.data,b.Item=u(a),r.htmlInit(b,s),l&&l.bridget&&l.bridget(s,b),b};function u(s){function f(){s.apply(this,arguments)}return f.prototype=Object.create(s.prototype),f.prototype.constructor=f,f}var g={ms:1,s:1e3};function p(s){if(typeof s=="number")return s;var f=s.match(/(^\d*\.?\d*)(\w*)/),b=f&&f[1],w=f&&f[2];if(!b.length)return 0;b=parseFloat(b);var E=g[w]||1;return b*E}return y.Item=a,y})}(te)),te.exports}var ae={exports:{}},ci;function Ae(){return ci||(ci=1,function(n){(function(t,e){n.exports?n.exports=e():(t.Packery=t.Packery||{},t.Packery.Rect=e())})(window,function(){function e(o){for(var r in e.defaults)this[r]=e.defaults[r];for(r in o)this[r]=o[r]}e.defaults={x:0,y:0,width:0,height:0};var i=e.prototype;return i.contains=function(o){var r=o.width||0,a=o.height||0;return this.x<=o.x&&this.y<=o.y&&this.x+this.width>=o.x+r&&this.y+this.height>=o.y+a},i.overlaps=function(o){var r=this.x+this.width,a=this.y+this.height,h=o.x+o.width,l=o.y+o.height;return this.x<h&&r>o.x&&this.y<l&&a>o.y},i.getMaximalFreeRects=function(o){if(!this.overlaps(o))return!1;var r=[],a,h=this.x+this.width,l=this.y+this.height,m=o.x+o.width,c=o.y+o.height;return this.y<o.y&&(a=new e({x:this.x,y:this.y,width:this.width,height:o.y-this.y}),r.push(a)),h>m&&(a=new e({x:m,y:this.y,width:h-m,height:this.height}),r.push(a)),l>c&&(a=new e({x:this.x,y:c,width:this.width,height:l-c}),r.push(a)),this.x<o.x&&(a=new e({x:this.x,y:this.y,width:o.x-this.x,height:this.height}),r.push(a)),r},i.canFit=function(o){return this.width>=o.width&&this.height>=o.height},e})}(ae)),ae.exports}var se={exports:{}},li;function Qr(){return li||(li=1,function(n){(function(t,e){if(n.exports)n.exports=e(Ae());else{var i=t.Packery=t.Packery||{};i.Packer=e(i.Rect)}})(window,function(e){function i(a,h,l){this.width=a||0,this.height=h||0,this.sortDirection=l||"downwardLeftToRight",this.reset()}var o=i.prototype;o.reset=function(){this.spaces=[];var a=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(a),this.sorter=r[this.sortDirection]||r.downwardLeftToRight},o.pack=function(a){for(var h=0;h<this.spaces.length;h++){var l=this.spaces[h];if(l.canFit(a)){this.placeInSpace(a,l);break}}},o.columnPack=function(a){for(var h=0;h<this.spaces.length;h++){var l=this.spaces[h],m=l.x<=a.x&&l.x+l.width>=a.x+a.width&&l.height>=a.height-.01;if(m){a.y=l.y,this.placed(a);break}}},o.rowPack=function(a){for(var h=0;h<this.spaces.length;h++){var l=this.spaces[h],m=l.y<=a.y&&l.y+l.height>=a.y+a.height&&l.width>=a.width-.01;if(m){a.x=l.x,this.placed(a);break}}},o.placeInSpace=function(a,h){a.x=h.x,a.y=h.y,this.placed(a)},o.placed=function(a){for(var h=[],l=0;l<this.spaces.length;l++){var m=this.spaces[l],c=m.getMaximalFreeRects(a);c?h.push.apply(h,c):h.push(m)}this.spaces=h,this.mergeSortSpaces()},o.mergeSortSpaces=function(){i.mergeRects(this.spaces),this.spaces.sort(this.sorter)},o.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},i.mergeRects=function(a){var h=0,l=a[h];t:for(;l;){for(var m=0,c=a[h+m];c;){if(c==l)m++;else if(c.contains(l)){a.splice(h,1),l=a[h];continue t}else l.contains(c)?a.splice(h+m,1):m++;c=a[h+m]}h++,l=a[h]}return a};var r={downwardLeftToRight:function(a,h){return a.y-h.y||a.x-h.x},rightwardTopToBottom:function(a,h){return a.x-h.x||a.y-h.y}};return i})}(se)),se.exports}var he={exports:{}},ui;function Zr(){return ui||(ui=1,function(n){(function(t,e){n.exports?n.exports=e(tn(),Ae()):t.Packery.Item=e(t.Outlayer,t.Packery.Rect)})(window,function(e,i){var o=document.documentElement.style,r=typeof o.transform=="string"?"transform":"WebkitTransform",a=function(){e.Item.apply(this,arguments)},h=a.prototype=Object.create(e.Item.prototype),l=h._create;h._create=function(){l.call(this),this.rect=new i};var m=h.moveTo;return h.moveTo=function(c,d){var y=Math.abs(this.position.x-c),v=Math.abs(this.position.y-d),u=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&y<1&&v<1;if(u){this.goTo(c,d);return}m.apply(this,arguments)},h.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&r&&(this.element.style[r]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},h.disablePlacing=function(){this.isPlacing=!1},h.removeElem=function(){var c=this.element.parentNode;c&&c.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},h.showDropPlaceholder=function(){var c=this.dropPlaceholder;c||(c=this.dropPlaceholder=document.createElement("div"),c.className="packery-drop-placeholder",c.style.position="absolute"),c.style.width=this.size.width+"px",c.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(c)},h.positionDropPlaceholder=function(){this.dropPlaceholder.style[r]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},h.hideDropPlaceholder=function(){var c=this.dropPlaceholder.parentNode;c&&c.removeChild(this.dropPlaceholder)},a})}(he)),he.exports}/*!
 * Packery v2.1.2
 * Gapless, draggable grid layouts
 *
 * Licensed GPLv3 for open source use
 * or Packery Commercial License for commercial use
 *
 * http://packery.metafizzy.co
 * Copyright 2013-2018 Metafizzy
 */(function(n){(function(t,e){n.exports?n.exports=e(Xr(),tn(),Ae(),Qr(),Zr()):t.Packery=e(t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)})(window,function(e,i,o,r,a){o.prototype.canFit=function(u){return this.width>=u.width-1&&this.height>=u.height-1};var h=i.create("packery");h.Item=a;var l=h.prototype;l._create=function(){i.prototype._create.call(this),this.packer=new r,this.shiftPacker=new r,this.isEnabled=!0,this.dragItemCount=0;var u=this;this.handleDraggabilly={dragStart:function(){u.itemDragStart(this.element)},dragMove:function(){u.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){u.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(p,s){s&&u.itemDragStart(p.currentTarget)},drag:function(p,s){s&&u.itemDragMove(p.currentTarget,s.position.left,s.position.top)},stop:function(p,s){s&&u.itemDragEnd(p.currentTarget)}}},l._resetLayout=function(){this.getSize(),this._getMeasurements();var u,g,p;this._getOption("horizontal")?(u=1/0,g=this.size.innerHeight+this.gutter,p="rightwardTopToBottom"):(u=this.size.innerWidth+this.gutter,g=1/0,p="downwardLeftToRight"),this.packer.width=this.shiftPacker.width=u,this.packer.height=this.shiftPacker.height=g,this.packer.sortDirection=this.shiftPacker.sortDirection=p,this.packer.reset(),this.maxY=0,this.maxX=0},l._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},l._getItemLayoutPosition=function(u){if(this._setRectSize(u.element,u.rect),this.isShifting||this.dragItemCount>0){var g=this._getPackMethod();this.packer[g](u.rect)}else this.packer.pack(u.rect);return this._setMaxXY(u.rect),u.rect},l.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},l._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},l._setMaxXY=function(u){this.maxX=Math.max(u.x+u.width,this.maxX),this.maxY=Math.max(u.y+u.height,this.maxY)},l._setRectSize=function(u,g){var p=e(u),s=p.outerWidth,f=p.outerHeight;(s||f)&&(s=this._applyGridGutter(s,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),g.width=Math.min(s,this.packer.width),g.height=Math.min(f,this.packer.height)},l._applyGridGutter=function(u,g){if(!g)return u+this.gutter;g+=this.gutter;var p=u%g,s=p&&p<1?"round":"ceil";return u=Math[s](u/g)*g,u},l._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},l._manageStamp=function(u){var g=this.getItem(u),p;if(g&&g.isPlacing)p=g.rect;else{var s=this._getElementOffset(u);p=new o({x:this._getOption("originLeft")?s.left:s.right,y:this._getOption("originTop")?s.top:s.bottom})}this._setRectSize(u,p),this.packer.placed(p),this._setMaxXY(p)};function m(u,g){return u.position.y-g.position.y||u.position.x-g.position.x}function c(u,g){return u.position.x-g.position.x||u.position.y-g.position.y}l.sortItemsByPosition=function(){var u=this._getOption("horizontal")?c:m;this.items.sort(u)},l.fit=function(u,g,p){var s=this.getItem(u);s&&(this.stamp(s.element),s.enablePlacing(),this.updateShiftTargets(s),g=g===void 0?s.rect.x:g,p=p===void 0?s.rect.y:p,this.shift(s,g,p),this._bindFitEvents(s),s.moveTo(s.rect.x,s.rect.y),this.shiftLayout(),this.unstamp(s.element),this.sortItemsByPosition(),s.disablePlacing())},l._bindFitEvents=function(u){var g=this,p=0;function s(){p++,p==2&&g.dispatchEvent("fitComplete",null,[u])}u.once("layout",s),this.once("layoutComplete",s)},l.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},l.needsResizeLayout=function(){var u=e(this.element),g=this._getOption("horizontal")?"innerHeight":"innerWidth";return u[g]!=this.size[g]},l.resizeShiftPercentLayout=function(){var u=this._getItemsForLayout(this.items),g=this._getOption("horizontal"),p=g?"y":"x",s=g?"height":"width",f=g?"rowHeight":"columnWidth",b=g?"innerHeight":"innerWidth",w=this[f];if(w=w&&w+this.gutter,w){this._getMeasurements();var E=this[f]+this.gutter;u.forEach(function(_){var R=Math.round(_.rect[p]/w);_.rect[p]=R*E})}else{var x=e(this.element)[b]+this.gutter,T=this.packer[s];u.forEach(function(_){_.rect[p]=_.rect[p]/T*x})}this.shiftLayout()},l.itemDragStart=function(u){if(this.isEnabled){this.stamp(u);var g=this.getItem(u);g&&(g.enablePlacing(),g.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(g))}},l.updateShiftTargets=function(u){this.shiftPacker.reset(),this._getBoundingRect();var g=this._getOption("originLeft"),p=this._getOption("originTop");this.stamps.forEach(function(O){var M=this.getItem(O);if(!(M&&M.isPlacing)){var P=this._getElementOffset(O),N=new o({x:g?P.left:P.right,y:p?P.top:P.bottom});this._setRectSize(O,N),this.shiftPacker.placed(N)}},this);var s=this._getOption("horizontal"),f=s?"rowHeight":"columnWidth",b=s?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var w,E=this[f];if(E=E&&E+this.gutter,E){var x=Math.ceil(u.rect[b]/E),T=Math.floor((this.shiftPacker[b]+this.gutter)/E);w=(T-x)*E;for(var _=0;_<T;_++){var R=s?0:_*E,z=s?_*E:0;this._addShiftTarget(R,z,w)}}else w=this.shiftPacker[b]+this.gutter-u.rect[b],this._addShiftTarget(0,0,w);var A=this._getItemsForLayout(this.items),W=this._getPackMethod();A.forEach(function(O){var M=O.rect;this._setRectSize(O.element,M),this.shiftPacker[W](M),this._addShiftTarget(M.x,M.y,w);var P=s?M.x+M.width:M.x,N=s?M.y:M.y+M.height;if(this._addShiftTarget(P,N,w),E)for(var q=Math.round(M[b]/E),Y=1;Y<q;Y++){var rt=s?P:M.x+E*Y,ut=s?M.y+E*Y:N;this._addShiftTarget(rt,ut,w)}},this)},l._addShiftTarget=function(u,g,p){var s=this._getOption("horizontal")?g:u;if(!(s!==0&&s>p)){var f=u+","+g,b=this.shiftTargetKeys.indexOf(f)!=-1;b||(this.shiftTargetKeys.push(f),this.shiftTargets.push({x:u,y:g}))}},l.shift=function(u,g,p){var s,f=1/0,b={x:g,y:p};this.shiftTargets.forEach(function(w){var E=d(w,b);E<f&&(s=w,f=E)}),u.rect.x=s.x,u.rect.y=s.y};function d(u,g){var p=g.x-u.x,s=g.y-u.y;return Math.sqrt(p*p+s*s)}var y=120;l.itemDragMove=function(u,g,p){var s=this.isEnabled&&this.getItem(u);if(!s)return;g-=this.size.paddingLeft,p-=this.size.paddingTop;var f=this;function b(){f.shift(s,g,p),s.positionDropPlaceholder(),f.layout()}var w=new Date,E=this._itemDragTime&&w-this._itemDragTime<y;E?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(b,y)):(b(),this._itemDragTime=w)},l.itemDragEnd=function(u){var g=this.isEnabled&&this.getItem(u);if(!g)return;clearTimeout(this.dragTimeout),g.element.classList.add("is-positioning-post-drag");var p=0,s=this;function f(){p++,p==2&&(g.element.classList.remove("is-positioning-post-drag"),g.hideDropPlaceholder(),s.dispatchEvent("dragItemPositioned",null,[g]))}g.once("layout",f),this.once("layoutComplete",f),g.moveTo(g.rect.x,g.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),g.disablePlacing(),this.unstamp(g.element)},l.bindDraggabillyEvents=function(u){this._bindDraggabillyEvents(u,"on")},l.unbindDraggabillyEvents=function(u){this._bindDraggabillyEvents(u,"off")},l._bindDraggabillyEvents=function(u,g){var p=this.handleDraggabilly;u[g]("dragStart",p.dragStart),u[g]("dragMove",p.dragMove),u[g]("dragEnd",p.dragEnd)},l.bindUIDraggableEvents=function(u){this._bindUIDraggableEvents(u,"on")},l.unbindUIDraggableEvents=function(u){this._bindUIDraggableEvents(u,"off")},l._bindUIDraggableEvents=function(u,g){var p=this.handleUIDraggable;u[g]("dragstart",p.start)[g]("drag",p.drag)[g]("dragstop",p.stop)};var v=l.destroy;return l.destroy=function(){v.apply(this,arguments),this.isEnabled=!1},h.Rect=o,h.Packer=r,h})})(Qi);var Jr=Qi.exports;const to=bi(Jr);var en={exports:{}},ce={exports:{}};/*!
 * Infinite Scroll v2.0.4
 * measure size of elements
 * MIT license
 */var di;function eo(){return di||(di=1,function(n){(function(t,e){n.exports?n.exports=e():t.getSize=e()})(window,function(){function e(a){let h=parseFloat(a);return a.indexOf("%")==-1&&!isNaN(h)&&h}let i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function o(){let a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return i.forEach(h=>{a[h]=0}),a}function r(a){if(typeof a=="string"&&(a=document.querySelector(a)),!(a&&typeof a=="object"&&a.nodeType))return;let l=getComputedStyle(a);if(l.display=="none")return o();let m={};m.width=a.offsetWidth,m.height=a.offsetHeight;let c=m.isBorderBox=l.boxSizing=="border-box";i.forEach(b=>{let w=l[b],E=parseFloat(w);m[b]=isNaN(E)?0:E});let d=m.paddingLeft+m.paddingRight,y=m.paddingTop+m.paddingBottom,v=m.marginLeft+m.marginRight,u=m.marginTop+m.marginBottom,g=m.borderLeftWidth+m.borderRightWidth,p=m.borderTopWidth+m.borderBottomWidth,s=e(l.width);s!==!1&&(m.width=s+(c?0:d+g));let f=e(l.height);return f!==!1&&(m.height=f+(c?0:y+p)),m.innerWidth=m.width-(d+g),m.innerHeight=m.height-(y+p),m.outerWidth=m.width+v,m.outerHeight=m.height+u,m}return r})}(ce)),ce.exports}var le={exports:{}},ue={exports:{}},fi;function io(){return fi||(fi=1,function(n){(function(t,e){n.exports?n.exports=e():t.EvEmitter=e()})(typeof window<"u"?window:Ft,function(){function t(){}let e=t.prototype;return e.on=function(i,o){if(!i||!o)return this;let r=this._events=this._events||{},a=r[i]=r[i]||[];return a.includes(o)||a.push(o),this},e.once=function(i,o){if(!i||!o)return this;this.on(i,o);let r=this._onceEvents=this._onceEvents||{},a=r[i]=r[i]||{};return a[o]=!0,this},e.off=function(i,o){let r=this._events&&this._events[i];if(!r||!r.length)return this;let a=r.indexOf(o);return a!=-1&&r.splice(a,1),this},e.emitEvent=function(i,o){let r=this._events&&this._events[i];if(!r||!r.length)return this;r=r.slice(0),o=o||[];let a=this._onceEvents&&this._onceEvents[i];for(let h of r)a&&a[h]&&(this.off(i,h),delete a[h]),h.apply(this,o);return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t})}(ue)),ue.exports}/*!
 * Unidragger v3.0.1
 * Draggable base class
 * MIT license
 */var pi;function no(){return pi||(pi=1,function(n){(function(t,e){n.exports?n.exports=e(t,io()):t.Unidragger=e(t,t.EvEmitter)})(typeof window<"u"?window:Ft,function(e,i){function o(){}let r=o.prototype=Object.create(i.prototype);r.handleEvent=function(c){let d="on"+c.type;this[d]&&this[d](c)};let a,h;"ontouchstart"in e?(a="touchstart",h=["touchmove","touchend","touchcancel"]):e.PointerEvent?(a="pointerdown",h=["pointermove","pointerup","pointercancel"]):(a="mousedown",h=["mousemove","mouseup"]),r.touchActionValue="none",r.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},r.unbindHandles=function(){this._bindHandles("removeEventListener","")},r._bindHandles=function(c,d){this.handles.forEach(y=>{y[c](a,this),y[c]("click",this),e.PointerEvent&&(y.style.touchAction=d)})},r.bindActivePointerEvents=function(){h.forEach(c=>{e.addEventListener(c,this)})},r.unbindActivePointerEvents=function(){h.forEach(c=>{e.removeEventListener(c,this)})},r.withPointer=function(c,d){d.pointerId===this.pointerIdentifier&&this[c](d,d)},r.withTouch=function(c,d){let y;for(let v of d.changedTouches)v.identifier===this.pointerIdentifier&&(y=v);y&&this[c](d,y)},r.onmousedown=function(c){this.pointerDown(c,c)},r.ontouchstart=function(c){this.pointerDown(c,c.changedTouches[0])},r.onpointerdown=function(c){this.pointerDown(c,c)};const l=["TEXTAREA","INPUT","SELECT","OPTION"],m=["radio","checkbox","button","submit","image","file"];return r.pointerDown=function(c,d){let y=l.includes(c.target.nodeName),v=m.includes(c.target.type),u=!y||v;!this.isPointerDown&&!c.button&&u&&(this.isPointerDown=!0,this.pointerIdentifier=d.pointerId!==void 0?d.pointerId:d.identifier,this.pointerDownPointer={pageX:d.pageX,pageY:d.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[c,d]))},r.onmousemove=function(c){this.pointerMove(c,c)},r.onpointermove=function(c){this.withPointer("pointerMove",c)},r.ontouchmove=function(c){this.withTouch("pointerMove",c)},r.pointerMove=function(c,d){let y={x:d.pageX-this.pointerDownPointer.pageX,y:d.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[c,d,y]),!this.isDragging&&this.hasDragStarted(y)&&this.dragStart(c,d),this.isDragging&&this.dragMove(c,d,y)},r.hasDragStarted=function(c){return Math.abs(c.x)>3||Math.abs(c.y)>3},r.dragStart=function(c,d){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[c,d])},r.dragMove=function(c,d,y){this.emitEvent("dragMove",[c,d,y])},r.onmouseup=function(c){this.pointerUp(c,c)},r.onpointerup=function(c){this.withPointer("pointerUp",c)},r.ontouchend=function(c){this.withTouch("pointerUp",c)},r.pointerUp=function(c,d){this.pointerDone(),this.emitEvent("pointerUp",[c,d]),this.isDragging?this.dragEnd(c,d):this.staticClick(c,d)},r.dragEnd=function(c,d){this.isDragging=!1,setTimeout(()=>delete this.isPreventingClicks),this.emitEvent("dragEnd",[c,d])},r.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},r.onpointercancel=function(c){this.withPointer("pointerCancel",c)},r.ontouchcancel=function(c){this.withTouch("pointerCancel",c)},r.pointerCancel=function(c,d){this.pointerDone(),this.emitEvent("pointerCancel",[c,d])},r.onclick=function(c){this.isPreventingClicks&&c.preventDefault()},r.staticClick=function(c,d){let y=c.type==="mouseup";y&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[c,d]),y&&(this.isIgnoringMouseUp=!0,setTimeout(()=>{delete this.isIgnoringMouseUp},400)))},o})}(le)),le.exports}/*!
 * Draggabilly v3.0.0
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(n){(function(t,e){n.exports?n.exports=e(t,eo(),no()):t.Draggabilly=e(t,t.getSize,t.Unidragger)})(typeof window<"u"?window:Ft,function(e,i,o){function r(){}let a=e.jQuery;function h(u,g){this.element=typeof u=="string"?document.querySelector(u):u,a&&(this.$element=a(this.element)),this.options={},this.option(g),this._create()}let l=h.prototype=Object.create(o.prototype);l.option=function(u){this.options={...this.options,...u}};const m=["relative","absolute","fixed"];l._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition={...this.position};let u=getComputedStyle(this.element);m.includes(u.position)||(this.element.style.position="relative"),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.setHandles(),this.enable()},l.setHandles=function(){let{handle:u}=this.options;typeof u=="string"?this.handles=this.element.querySelectorAll(u):typeof u=="object"&&u.length?this.handles=u:u instanceof HTMLElement?this.handles=[u]:this.handles=[this.element]};const c=["dragStart","dragMove","dragEnd"];let d=l.emitEvent;l.emitEvent=function(u,g){if(!this.isEnabled&&c.includes(u))return;d.call(this,u,g);let s=e.jQuery;if(!s||!this.$element)return;let f,b=g;g&&g[0]instanceof Event&&([f,...b]=g);let E=s.Event(f);E.type=u,this.$element.trigger(E,b)},l._getPosition=function(){let u=getComputedStyle(this.element),g=this._getPositionCoord(u.left,"width"),p=this._getPositionCoord(u.top,"height");this.position.x=isNaN(g)?0:g,this.position.y=isNaN(p)?0:p,this._addTransformPosition(u)},l._getPositionCoord=function(u,g){if(u.includes("%")){let p=i(this.element.parentNode);return p?parseFloat(u)/100*p[g]:0}return parseInt(u,10)},l._addTransformPosition=function(u){let g=u.transform;if(!g.startsWith("matrix"))return;let p=g.split(","),s=g.startsWith("matrix3d")?12:4,f=parseInt(p[s],10),b=parseInt(p[s+1],10);this.position.x+=f,this.position.y+=b},l.handlePointerDown=function(u,g){this.isEnabled&&(this.pointerDownPointer={pageX:g.pageX,pageY:g.pageY},u.preventDefault(),document.activeElement.blur(),this.bindActivePointerEvents(u),this.element.classList.add("is-pointer-down"))},l.handleDragStart=function(){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.animate())},l.measureContainment=function(){let u=this.getContainer();if(!u)return;let g=i(this.element),p=i(u),{borderLeftWidth:s,borderRightWidth:f,borderTopWidth:b,borderBottomWidth:w}=p,E=this.element.getBoundingClientRect(),x=u.getBoundingClientRect(),T=s+f,_=b+w,R=this.relativeStartPosition={x:E.left-(x.left+s),y:E.top-(x.top+b)};this.containSize={width:p.width-T-R.x-g.width,height:p.height-_-R.y-g.height}},l.getContainer=function(){let u=this.options.containment;return u?u instanceof HTMLElement?u:typeof u=="string"?document.querySelector(u):this.element.parentNode:void 0},l.handleDragMove=function(u,g,p){if(!this.isEnabled)return;let s=p.x,f=p.y,b=this.options.grid,w=b&&b[0],E=b&&b[1];s=y(s,w),f=y(f,E),s=this.containDrag("x",s,w),f=this.containDrag("y",f,E),s=this.options.axis=="y"?0:s,f=this.options.axis=="x"?0:f,this.position.x=this.startPosition.x+s,this.position.y=this.startPosition.y+f,this.dragPoint.x=s,this.dragPoint.y=f};function y(u,g,p){return g?(p=p||"round",Math[p](u/g)*g):u}l.containDrag=function(u,g,p){if(!this.options.containment)return g;let s=u=="x"?"width":"height",f=this.relativeStartPosition[u],b=y(-f,p,"ceil"),w=this.containSize[s];return w=y(w,p,"floor"),Math.max(b,Math.min(w,g))},l.handlePointerUp=function(){this.element.classList.remove("is-pointer-down")},l.handleDragEnd=function(){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"))},l.animate=function(){this.isDragging&&(this.positionDrag(),requestAnimationFrame(()=>this.animate()))},l.setLeftTop=function(){let{x:u,y:g}=this.position;this.element.style.left=`${u}px`,this.element.style.top=`${g}px`},l.positionDrag=function(){let{x:u,y:g}=this.dragPoint;this.element.style.transform=`translate3d(${u}px, ${g}px, 0)`},l.setPosition=function(u,g){this.position.x=u,this.position.y=g,this.setLeftTop()},l.enable=function(){this.isEnabled||(this.isEnabled=!0,this.bindHandles())},l.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.isDragging&&this.dragEnd(),this.unbindHandles())};const v=["transform","left","top","position"];return l.destroy=function(){this.disable(),v.forEach(u=>{this.element.style[u]=""}),this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},l._init=r,a&&a.bridget&&a.bridget("draggabilly",h),h})})(en);var ro=en.exports;const gi=bi(ro);function nn(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]&&(e=nn(n[t]))&&(i&&(i+=" "),i+=e);else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function bt(){for(var n,t,e=0,i="";e<arguments.length;)(n=arguments[e++])&&(t=nn(n))&&(i&&(i+=" "),i+=t);return i}var rn=S.createContext({}),on=()=>S.useContext(rn),an=n=>k.createElement(rn.Provider,{...n});function oo(){let n=new Map;return{on(t,e){return n.has(t)?n.get(t).add(e):n.set(t,new Set([e])),this},off(t,e){return n.has(t)&&n.get(t).delete(e),this},emit(t,e){return n.has(t)&&n.get(t).forEach(i=>{i(e)}),this}}}var jt=oo(),sn=()=>S.useRef(new Map).current,ao=()=>{},mi=["resize","contextmenu","click","scroll","blur"],De={show({event:n,id:t,props:e,position:i}){n.preventDefault&&n.preventDefault(),jt.emit(0).emit(t,{event:n.nativeEvent||n,props:e,position:i})},hideAll(){jt.emit(0)}};function so(n){return{show(t){De.show({...n,...t})},hideAll(){De.hideAll()}}}function ho(){let n=new Map,t,e,i,o,r=!1;function a(p){o=Array.from(p.values()),t=-1,i=!0}function h(){o[t].node.focus()}let l=()=>t>=0&&o[t].isSubmenu,m=()=>Array.from(o[t].submenuRefTracker.values());function c(){return t===-1?(d(),!1):!0}function d(){t+1<o.length?t++:t+1===o.length&&(t=0),r&&u(),h()}function y(){t===-1||t===0?t=o.length-1:t-1<o.length&&t--,r&&u(),h()}function v(){if(c()&&l()){let p=m(),{node:s,setSubmenuPosition:f}=o[t];return n.set(s,{isRoot:i,focusedIndex:t,parentNode:e||s,items:o}),f(),s.classList.add("contexify_submenu-isOpen"),e=s,p.length>0?(t=0,o=p):r=!0,i=!1,h(),!0}return!1}function u(){if(c()&&!i){let p=n.get(e);e.classList.remove("contexify_submenu-isOpen"),o=p.items,e=p.parentNode,p.isRoot&&(i=!0,n.clear()),r||(t=p.focusedIndex,h())}}function g(p){function s(f){for(let b of f)b.isSubmenu&&b.submenuRefTracker&&s(Array.from(b.submenuRefTracker.values())),b.keyMatcher&&b.keyMatcher(p)}s(o)}return{init:a,moveDown:d,moveUp:y,openSubmenu:v,closeSubmenu:u,matchKeys:g}}function Mt(n){return typeof n=="function"}function vi(n){return typeof n=="string"}function hn(n,t){return S.Children.map(S.Children.toArray(n).filter(Boolean),e=>S.cloneElement(e,t))}function co(n){let t={x:n.clientX,y:n.clientY},e=n.changedTouches;return e&&(t.x=e[0].clientX,t.y=e[0].clientY),(!t.x||t.x<0)&&(t.x=0),(!t.y||t.y<0)&&(t.y=0),t}function Pt(n,t){return Mt(n)?n(t):n}function lo(n,t){return{...n,...Mt(t)?t(n):t}}var uo=({id:n,theme:t,style:e,className:i,children:o,animation:r="fade",preventDefaultOnKeydown:a=!0,disableBoundariesCheck:h=!1,onVisibilityChange:l,...m})=>{let[c,d]=S.useReducer(lo,{x:0,y:0,visible:!1,triggerEvent:{},propsFromTrigger:null,willLeave:!1}),y=S.useRef(null),v=sn(),[u]=S.useState(()=>ho()),g=S.useRef(),p=S.useRef();S.useEffect(()=>(jt.on(n,f).on(0,b),()=>{jt.off(n,f).off(0,b)}),[n,r,h]),S.useEffect(()=>{c.visible?u.init(v):v.clear()},[c.visible,u,v]);function s(O,M){if(y.current&&!h){let{innerWidth:P,innerHeight:N}=window,{offsetWidth:q,offsetHeight:Y}=y.current;O+q>P&&(O-=O+q-P),M+Y>N&&(M-=M+Y-N)}return{x:O,y:M}}S.useEffect(()=>{c.visible&&d(s(c.x,c.y))},[c.visible]),S.useEffect(()=>{function O(P){a&&P.preventDefault()}function M(P){switch(P.key){case"Enter":case" ":u.openSubmenu()||b();break;case"Escape":b();break;case"ArrowUp":O(P),u.moveUp();break;case"ArrowDown":O(P),u.moveDown();break;case"ArrowRight":O(P),u.openSubmenu();break;case"ArrowLeft":O(P),u.closeSubmenu();break;default:u.matchKeys(P);break}}if(c.visible){window.addEventListener("keydown",M);for(let P of mi)window.addEventListener(P,b)}return()=>{window.removeEventListener("keydown",M);for(let P of mi)window.removeEventListener(P,b)}},[c.visible,u,a]);function f({event:O,props:M,position:P}){O.stopPropagation();let N=P||co(O),{x:q,y:Y}=s(N.x,N.y);Ne.flushSync(()=>{d({visible:!0,willLeave:!1,x:q,y:Y,triggerEvent:O,propsFromTrigger:M})}),clearTimeout(p.current),!g.current&&Mt(l)&&(l(!0),g.current=!0)}function b(O){O!=null&&(O.button===2||O.ctrlKey)&&O.type!=="contextmenu"||(r&&(vi(r)||"exit"in r&&r.exit)?d(M=>({willLeave:M.visible})):d(M=>({visible:M.visible?!1:M.visible})),p.current=setTimeout(()=>{Mt(l)&&l(!1),g.current=!1}))}function w(){c.willLeave&&c.visible&&Ne.flushSync(()=>d({visible:!1,willLeave:!1}))}function E(){return vi(r)?bt({[`contexify_willEnter-${r}`]:x&&!A,[`contexify_willLeave-${r} contexify_willLeave-'disabled'`]:x&&A}):r&&"enter"in r&&"exit"in r?bt({[`contexify_willEnter-${r.enter}`]:r.enter&&x&&!A,[`contexify_willLeave-${r.exit} contexify_willLeave-'disabled'`]:r.exit&&x&&A}):null}let{visible:x,triggerEvent:T,propsFromTrigger:_,x:R,y:z,willLeave:A}=c,W=bt("contexify",i,{[`contexify_theme-${t}`]:t},E());return k.createElement(an,{value:v},x&&k.createElement("div",{...m,className:W,onAnimationEnd:w,style:{...e,left:R,top:z,opacity:1},ref:y,role:"menu"},hn(o,{propsFromTrigger:_,triggerEvent:T})))},Ct=({id:n,children:t,className:e,style:i,triggerEvent:o,data:r,propsFromTrigger:a,keyMatcher:h,onClick:l=ao,disabled:m=!1,hidden:c=!1,closeOnClick:d=!0,handlerEvent:y="onClick",...v})=>{let u=S.useRef(),g=on(),p={id:n,data:r,triggerEvent:o,props:a},s=Pt(m,p),f=Pt(c,p);function b(T){p.event=T,T.stopPropagation(),s||(d?w():l(p))}function w(){let T=u.current;T.focus(),T.addEventListener("animationend",()=>setTimeout(De.hideAll),{once:!0}),T.classList.add("contexify_item-feedback"),l(p)}function E(T){T&&!s&&(u.current=T,g.set(T,{node:T,isSubmenu:!1,keyMatcher:!s&&Mt(h)&&(_=>{h(_)&&(_.stopPropagation(),_.preventDefault(),p.event=_,w())})}))}function x(T){(T.key==="Enter"||T.key===" ")&&(T.stopPropagation(),p.event=T,w())}return f?null:k.createElement("div",{...v,[y]:b,className:bt("contexify_item",e,{"contexify_item-disabled":s}),style:i,onKeyDown:x,ref:E,tabIndex:-1,role:"menuitem","aria-disabled":s},k.createElement("div",{className:"contexify_itemContent"},t))},yi=({triggerEvent:n,data:t,propsFromTrigger:e,hidden:i=!1})=>Pt(i,{data:t,triggerEvent:n,props:e})?null:k.createElement("div",{className:"contexify_separator"}),fo=()=>k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},k.createElement("polyline",{points:"9 18 15 12 9 6"})),po=({className:n,...t})=>k.createElement("div",{className:bt("contexify_rightSlot",n),...t}),go=({arrow:n,children:t,disabled:e=!1,hidden:i=!1,label:o,className:r,triggerEvent:a,propsFromTrigger:h,style:l,...m})=>{let c=on(),d=sn(),y=S.useRef(null),v={triggerEvent:a,props:h},u=Pt(e,v),g=Pt(i,v);function p(){let b=y.current;if(b){let w="contexify_submenu-bottom",E="contexify_submenu-right";b.classList.remove(w,E);let x=b.getBoundingClientRect();x.right>window.innerWidth&&b.classList.add(E),x.bottom>window.innerHeight&&b.classList.add(w)}}function s(b){b&&!u&&c.set(b,{node:b,isSubmenu:!0,submenuRefTracker:d,setSubmenuPosition:p})}if(g)return null;let f=bt("contexify_item",r,{"contexify_item-disabled":u});return k.createElement(an,{value:d},k.createElement("div",{...m,className:f,ref:s,tabIndex:-1,role:"menuitem","aria-haspopup":!0,"aria-disabled":u,onMouseEnter:p,onTouchStart:p},k.createElement("div",{className:"contexify_itemContent",onClick:b=>b.stopPropagation()},o,k.createElement(po,null,n||k.createElement(fo,null))),k.createElement("div",{className:"contexify contexify_submenu",ref:y,style:l},hn(t,{propsFromTrigger:h,triggerEvent:a}))))};const de=(n,t,e,i,o)=>{if(e){const r={"1/1":[1,2,3],"1/2":[1,2,3],"2/1":[2,4,6],"2/3":[2,4,6],"3/1":[3,6,9],"3/2":[3,6,9]},a=i.map(h=>{if(h===e){const l=r[n][t-1];return{...h,width:l}}return h});o(a)}},mo=(n,t)=>{const e=[{value:1,string:[1,1]},{value:.5,string:[1,2]},{value:.3333333333333333,string:[1,3]},{value:2,string:[2,1]},{value:.6666666666666666,string:[2,3]},{value:3,string:[3,1]},{value:1.5,string:[3,2]}],i=n/t;let o=e[0],r=Math.abs(i-o.value);for(let a=1;a<e.length;a++){const h=Math.abs(i-e[a].value);h<r&&(r=h,o=e[a])}return o.string},Do=()=>{const n=vn(),{show:t}=so({id:"menu"}),[e,i]=S.useState(null),[o,r]=S.useState([]),[a,h]=S.useState([]),[l,m]=S.useState(0),[c,d]=S.useState([]),[y,v]=S.useState([]),[u,g]=S.useState(1),[p,s]=S.useState(!1),[f,b]=S.useState(!1),[w,E]=S.useState([]),x=S.useRef(null),T=S.useRef(null),_=S.useRef(null),R=S.useRef(null),z=S.useRef(null),A=S.useRef([]),[W,O]=S.useState(!1),M=[{value:"1/1",label:"Left aligned",ratio:[1,1]},{value:"1/2",label:"Center aligned",ratio:[1,2]},{value:"1/3",label:"Center aligned",ratio:[1,3]},{value:"2/1",label:"Center aligned",ratio:[2,1]},{value:"2/3",label:"Center aligned",ratio:[2,3]},{value:"3/1",label:"Center aligned",ratio:[3,1]},{value:"3/2",label:"Right aligned",ratio:[3,2]}],P=(C,I)=>{C.preventDefault(),i(I),t({event:C})},N=C=>{const B=Array.from(C.target.files).map(F=>URL.createObjectURL(F));h(B),m(0),s(!0),b(!1),d([])},q=C=>{const{naturalWidth:I,naturalHeight:B}=C.target;g(mo(I,B))},Y=()=>{if(T.current){const C=T.current.getCroppedCanvas().toDataURL();d([...c,C]),v([...y,`${u[0]}/${u[1]}`]),l<a.length-1&&(l===a.length-2&&b(!0),m(l+1))}},rt=()=>{l>0&&(m(l-1),b(!1),d(c.slice(0,-1)))},ut=()=>{const C=T.current.getCroppedCanvas().toDataURL();d([...c,C]),v([...y,`${u[0]}/${u[1]}`]),s(!1),setTimeout(()=>{h([]),v([])},500)},Ot=()=>{if(T.current){T.current.setCropBoxData({top:0,height:T.current.getCanvasData().height});let C=T.current.getData();T.current.setData({x:C.x/2,y:C.y/2})}},Lt=C=>{if(e){let I=document.getElementById(C);R.current.remove(I)}},kt=wn.debounce(dt,1e3),$t=(C,I,B)=>{const F=document.createElement("div"),Q=document.createElement("img"),ft=`${Math.random().toString(36).substring(7)}`;Q.src=C,F.style.aspectRatio=I,F.id=ft,F.className=`grid-item grid-item--width${B}`,F.appendChild(Q);var ot={imgSrc:C,aspectRatio:I,width:B,idImg:ft};return Q.addEventListener("contextmenu",at=>{P(at,ot)}),F};function dt(){const C=[];R.current.getItemElements().forEach((I,B)=>{const F=I.querySelector(".order-number");F&&(F.textContent=B+1);const Q=I.querySelector("img").getAttribute("src"),ft=I.getAttribute("id"),ot=I.classList[I.classList.length-1],at=I.getAttribute("style").match(/aspect-ratio:\s*(\d+)\s*\/\s*(\d+)/),Xt=at?`${at[1]}/${at[2]}`:"N/A";C.push({idImg:ft,imgSrc:Q,width:parseInt(ot.replace("grid-item--width","")),aspectRatio:Xt})})}const cn=(C,I)=>{if(R.current){const B=new gi(C);R.current.bindDraggabillyEvents(B),C.appendChild(I)}},ln=(C,I,B)=>{const F=$t(C,I,B),Q=document.createElement("div");return Q.className="order-number",cn(F,Q),F},un=async()=>{const C=[];await Promise.all(R.current.getItemElements().map(async(I,B)=>{var ze;const F=I.querySelector("img").getAttribute("src"),Q=I.getAttribute("id"),ft=I.classList[I.classList.length-1],ot=I.getAttribute("style").match(/aspect-ratio:\s*(\d+)\s*\/\s*(\d+)/),at=ot?`${ot[1]}/${ot[2]}`:"N/A",Xt=(ze=I==null?void 0:I.querySelector("input"))==null?void 0:ze.value;if(C.push({idImg:Q,imgSrc:F,width:parseInt(ft.replace("grid-item--width","")),aspectRatio:at,link:Xt||""}),F.startsWith("data:image"))try{console.log(F);const qt=await En.fileBase64({base64:F,folder:n.pathname.split("/").pop()});C[B].imgSrc=`${bn}/uploads/${qt.file}`}catch(qt){console.error("Error converting base64 to URL:",qt)}})),xn("mas","Đang cập nhật..."),Vt.updateMasonry(n.pathname.split("/").pop(),{img:C}).then(()=>{Be("mas","Cập nhật thành công"),setTimeout(()=>{window.location.reload()},500)}).catch(I=>{I.response.status===404&&Vt.addMasonry(n.pathname.split("/").pop()).then(()=>Be("Tạo mới thành công"))})},dn=(C,I)=>{const B=[...o];B[C].link=I,r(B)},fn=()=>{A.current=[]},pn=()=>{R.current.getItemElements().forEach((C,I)=>{const B=new gi(C);R.current.bindDraggabillyEvents(B),A.current[I]=B})},gn=()=>{A.current.forEach(C=>{C&&C.disable()})},At=()=>{O(!W),W?gn():(fn(),pn())};return S.useEffect(()=>{Vt.getSingleMasonry(n.pathname.split("/").pop()).then(C=>{C!=null&&C.img&&r(C==null?void 0:C.img),r(C==null?void 0:C.img)})},[]),S.useEffect(()=>{yn.get().then(C=>{E(C)})},[]),S.useEffect(()=>{const C={itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!1};R.current=new to(z.current,C),R.current.getItemElements().forEach(I=>{if(I.querySelector(".order-number"))return;const F=document.createElement("div");F.className="order-number",I.appendChild(F)}),R.current.on("layoutComplete",dt),R.current.on("dragItemPositioned",()=>{dt(),setTimeout(()=>{},0)})},[o]),S.useEffect(()=>{if(c.length>0&&c.length===a.length){const C=c.map((I,B)=>ln(I,y[B],y[B][0]));C.forEach(I=>{z.current.insertBefore(I,z.current.firstChild)}),R.current.on("layoutComplete",dt),R.current.prepended(C),R.current.on("dragItemPositioned",()=>{kt(),setTimeout(()=>{},0)})}},[c]),S.useEffect(()=>(a.length>0&&x.current&&(T.current&&T.current.destroy(),T.current=new Ai(x.current,{aspectRatio:u[0]/u[1],viewMode:1,zoomOnTouch:!1,zoomOnWheel:!1})),()=>{T.current&&T.current.destroy()}),[l,u]),D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"!h-full",children:[D.jsxs("div",{className:"flex justify-center items-center gap-2 my-2",children:[D.jsx(Z,{onClick:()=>_.current.click(),children:"Thêm ảnh"}),D.jsx(Z,{type:"primary",onClick:At,children:W?"Chặn sắp xếp":"Bật sắp xếp"}),D.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:N,ref:_}),a.length>0&&D.jsxs(D.Fragment,{children:[D.jsxs(Z,{onClick:()=>s(!0),children:[D.jsx("i",{className:"fa-duotone fa-crop fs-5 me-2"}),"Xem Ảnh Crop"]}),D.jsx(Tn,{title:D.jsxs("div",{className:"flex justify-between items-center mb-3",children:[D.jsx("h4",{className:"mb-0",children:"Cắt ảnh theo tỉ lệ"}),D.jsx(Yr,{className:"ToggleGroup",type:"single",value:`${u[0]}/${u[1]}`,"aria-label":"Text alignment",children:M.map((C,I)=>D.jsx($r,{className:"ToggleGroupItem",value:C.value,"aria-label":C.label,onClick:()=>g(C.ratio),children:C.value},I))}),D.jsxs(Z,{onClick:Ot,children:[D.jsx("i",{className:"fa-duotone fa-crop-simple fs-5 me-2"}),"Tự động cắt ảnh"]})]}),centered:!0,open:p,width:1e3,closeIcon:null,footer:[D.jsx(Z,{danger:!0,onClick:()=>s(!1),children:" Thoát "},"exit"),D.jsx(Z,{type:"dashed",onClick:rt,disabled:l===0,children:"Trở về"},"back"),D.jsx(Z,{type:"dashed",onClick:Y,disabled:f||a.length===1,children:"Tiếp theo"},"next"),D.jsx(Z,{type:"primary",onClick:ut,disabled:!(f||a.length===1),children:" Tải lên"},"upload")],children:D.jsx("div",{className:"col-12 w-100 h-100",children:D.jsx("img",{className:"w-100",style:{height:"500px"},ref:x,src:a[l],alt:"To be cropped",onLoad:q})})})]}),D.jsx(Z,{onClick:()=>{R.current.layout()},type:"primary",children:"Layout lại"}),D.jsx(Z,{onClick:()=>{un()},type:"primary",children:"Lưu thay đổi"})]}),D.jsx("div",{style:{height:600,overflow:"scroll",paddingBottom:50},children:D.jsxs("div",{className:"grid",ref:z,children:[D.jsx("div",{className:"grid-sizer"}),o==null?void 0:o.map((C,I)=>D.jsxs("div",{id:C==null?void 0:C._id,className:`grid-item grid-item--width${C.width}`,style:{aspectRatio:C.aspectRatio},children:[D.jsx("img",{className:"relative",src:C.imgSrc,onContextMenu:B=>P(B,C)}),D.jsx(Sn,{className:"bg-dark text-white absolute bottom-0 end-0",style:{width:"100%"},value:C==null?void 0:C.link,id:C==null?void 0:C.idImg,placeholder:"Nhập đường dẫn trang",onChange:B=>dn(I,B.target.value)})]},I))]})})]}),D.jsxs(uo,{id:"menu",children:[D.jsxs(go,{label:"Thay đổi kích thước",children:[D.jsx(Ct,{onClick:()=>{de(e.aspectRatio,1,e,o,r),setTimeout(()=>{W&&At()},0)},children:"Size 1"}),D.jsx(Ct,{onClick:()=>{de(e.aspectRatio,2,e,o,r),setTimeout(()=>{W&&At()},0)},children:"Size 2"}),D.jsx(Ct,{onClick:()=>{de(e.aspectRatio,3,e,o,r),setTimeout(()=>{W&&At()},0)},children:"Size 3"})]}),D.jsx(yi,{}),D.jsxs(Ct,{children:["Aspect-Ratio: ",e==null?void 0:e.aspectRatio]}),D.jsx(yi,{}),D.jsx(Ct,{onClick:()=>{Lt(e==null?void 0:e._id)},children:"Xóa ảnh"})]})]})};export{Do as default};
