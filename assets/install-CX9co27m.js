import{N as J,m as A,bd as Wr,F as G,af as H,r as _t,be as Wa,ag as K,x as ht,a6 as X,aJ as $t,bf as zr,bg as za,bh as Ha,bi as ze,bj as Za,bk as Ya,bl as te,ah as V,A as ut,k as Kt,a2 as we,bm as Xa,g as Z,bn as Ua,E as Ce,bo as Le,bp as $a,bq as Ka,br as He,d as q,bs as qa,bt as ja,Q as rt,J as j,bu as Ja,bv as Qa,bw as tn,bx as en,by as Hr,bz as F,bA as Ie,bB as rn,_ as R,bC as an,bD as nn,p as bt,aB as on,bE as Ze,bF as sn,bG as At,bH as ln,bI as $,bJ as fe,bK as Zr,bL as Yr,bM as Ft,bN as Ye,bO as un,j as de,bP as cn,bQ as Xr,bR as Ur,bS as $r,bT as Kr,bU as qr,bV as jr,bW as vn,bX as hn,bY as fn,bZ as dn,b_ as gn,b$ as pn,c0 as mn,c1 as yn,c2 as Xe,c3 as xn,c4 as ge,c5 as pe,B as Ht,ab as Jr,X as _n,W as Ue,c6 as me,U as Te,c7 as bn,C as st,c8 as An,aQ as Sn,aS as Mn,i as Dn,c9 as ct,ca as Mt,Z as wn,u as Vt,G as Dt,cb as Zt,cc as Yt,cd as Cn,aP as Ln,a8 as Pe,aG as Oe,aa as In,h as Lt,ce as Tn,cf as Qr,cg as $e,ch as ta,ci as Xt,V as Ee,R as It,cj as Pn,ck as On,a7 as En,cl as kn,at as Nn,au as Rn,v as vt,cm as Bn,cn as Gn,a1 as Fn,co as Vn,ac as ea,cp as Wn,al as Ke,cq as qe,aZ as ke,b3 as ra,aR as zn,b as aa,cr as je,cs as Hn,t as Ut,aU as Zn,s as Yn,a_ as Je,a$ as Xn,aX as Un,aM as $n,ct as Kn,aW as qn,aV as jn,cu as Jn}from"./Layout-DXWOGTyT.js";function pt(r){return r==null?0:r.length||1}function Qe(r){return r}var Qn=function(){function r(t,e,a,n,i,o){this._old=t,this._new=e,this._oldKeyGetter=a||Qe,this._newKeyGetter=n||Qe,this.context=i,this._diffModeMultiple=o==="multiple"}return r.prototype.add=function(t){return this._add=t,this},r.prototype.update=function(t){return this._update=t,this},r.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},r.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},r.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},r.prototype.remove=function(t){return this._remove=t,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var t=this._old,e=this._new,a={},n=new Array(t.length),i=new Array(e.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(e,a,i,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=n[o],l=a[s],u=pt(l);if(u>1){var c=l.shift();l.length===1&&(a[s]=l[0]),this._update&&this._update(c,o)}else u===1?(a[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(i,a)},r.prototype._executeMultiple=function(){var t=this._old,e=this._new,a={},n={},i=[],o=[];this._initIndexMap(t,a,i,"_oldKeyGetter"),this._initIndexMap(e,n,o,"_newKeyGetter");for(var s=0;s<i.length;s++){var l=i[s],u=a[l],c=n[l],v=pt(u),f=pt(c);if(v>1&&f===1)this._updateManyToOne&&this._updateManyToOne(c,u),n[l]=null;else if(v===1&&f>1)this._updateOneToMany&&this._updateOneToMany(c,u),n[l]=null;else if(v===1&&f===1)this._update&&this._update(c,u),n[l]=null;else if(v>1&&f>1)this._updateManyToMany&&this._updateManyToMany(c,u),n[l]=null;else if(v>1)for(var h=0;h<v;h++)this._remove&&this._remove(u[h]);else this._remove&&this._remove(u)}this._performRestAdd(o,n)},r.prototype._performRestAdd=function(t,e){for(var a=0;a<t.length;a++){var n=t[a],i=e[n],o=pt(i);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(i[s]);else o===1&&this._add&&this._add(i);e[n]=null}},r.prototype._initIndexMap=function(t,e,a,n){for(var i=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[n](t[o],o);if(i||(a[o]=s),!!e){var l=e[s],u=pt(l);u===0?(e[s]=o,i&&a.push(s)):u===1?e[s]=[l,o]:l.push(o)}}},r}(),ti=function(){function r(t,e){this._encode=t,this._schema=e}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function ei(r,t){var e={},a=e.encode={},n=J(),i=[],o=[],s={};A(r.dimensions,function(f){var h=r.getDimensionInfo(f),d=h.coordDim;if(d){var g=h.coordDimIndex;ee(a,d)[g]=f,h.isExtraCoord||(n.set(d,1),ai(h.type)&&(i[0]=f),ee(s,d)[g]=r.getDimensionIndex(h.name)),h.defaultTooltip&&o.push(f)}Wr.each(function(p,m){var y=ee(a,m),x=h.otherDims[m];x!=null&&x!==!1&&(y[x]=h.name)})});var l=[],u={};n.each(function(f,h){var d=a[h];u[h]=d[0],l=l.concat(d)}),e.dataDimsOnCoord=l,e.dataDimIndicesOnCoord=G(l,function(f){return r.getDimensionInfo(f).storeDimIndex}),e.encodeFirstDimNotExtra=u;var c=a.label;c&&c.length&&(i=c.slice());var v=a.tooltip;return v&&v.length?o=v.slice():o.length||(o=i.slice()),a.defaultedLabel=i,a.defaultedTooltip=o,e.userOutput=new ti(s,t),e}function ee(r,t){return r.hasOwnProperty(t)||(r[t]=[]),r[t]}function ri(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function ai(r){return!(r==="ordinal"||r==="time")}var Wt=function(){function r(t){this.otherDims={},t!=null&&H(this,t)}return r}(),ni=ht(),ii={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},na=function(){function r(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=sa(this.source)))},r.prototype.getSourceDimensionIndex=function(t){return _t(this._dimNameMap.get(t),-1)},r.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},r.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=Wa(this.source),a=!la(t),n="",i=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,c=void 0,v=this.dimensions[s];if(v&&v.storeDimIndex===o)l=e?v.name:null,u=v.type,c=v.ordinalMeta,s++;else{var f=this.getSourceDimension(o);f&&(l=e?f.name:null,u=f.type)}i.push({property:l,type:u,ordinalMeta:c}),e&&l!=null&&(!v||!v.isCalculationCoord)&&(n+=a?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),n+="$",n+=ii[u]||"f",c&&(n+=c.uid),n+="$"}var h=this.source,d=[h.seriesLayoutBy,h.startIndex,n].join("$$");return{dimensions:i,hash:d}},r.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,a=0;e<this._fullDimCount;e++){var n=void 0,i=this.dimensions[a];if(i&&i.storeDimIndex===e)i.isCalculationCoord||(n=i.name),a++;else{var o=this.getSourceDimension(e);o&&(n=o.name)}t.push(n)}return t},r.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function ia(r){return r instanceof na}function oa(r){for(var t=J(),e=0;e<(r||[]).length;e++){var a=r[e],n=K(a)?a.name:a;n!=null&&t.get(n)==null&&t.set(n,e)}return t}function sa(r){var t=ni(r);return t.dimNameMap||(t.dimNameMap=oa(r.dimensionsDefine))}function la(r){return r>30}var mt=K,et=G,oi=typeof Int32Array>"u"?Array:Int32Array,si="e\0\0",tr=-1,li=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],ui=["_approximateExtent"],er,Tt,yt,xt,re,Pt,ae,ci=function(){function r(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var a,n=!1;ia(t)?(a=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,a=t),a=a||["x","y"];for(var i={},o=[],s={},l=!1,u={},c=0;c<a.length;c++){var v=a[c],f=X(v)?new Wt({name:v}):v instanceof Wt?v:new Wt(v),h=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=h,f.coordDimIndex=0);var d=f.otherDims=f.otherDims||{};o.push(h),i[h]=f,u[h]!=null&&(l=!0),f.createInvertedIndices&&(s[h]=[]),d.itemName===0&&(this._nameDimIdx=c),d.itemId===0&&(this._idDimIdx=c),n&&(f.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=i,this._initGetDimensionInfo(l),this.hostModel=e,this._invertedIndicesMap=s,this._dimOmitted){var g=this._dimIdxToName=J();A(o,function(p){g.set(i[p].storeDimIndex,p)})}}return r.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var a=this._dimIdxToName.get(e);if(a!=null)return a;var n=this._schema.getSourceDimension(e);if(n)return n.name},r.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var a=this._getDimInfo(t);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},r.prototype._recognizeDimIndex=function(t){if($t(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},r.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},r.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},r.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(a){return e.hasOwnProperty(a)?e[a]:void 0}:function(a){return e[a]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(t,e){var a=this._dimSummary;if(e==null)return a.encodeFirstDimNotExtra[t];var n=a.encode[t];return n?n[e]:null},r.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,a=e.encode[t];return(a||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(t,e,a){var n=this,i;if(t instanceof ze&&(i=t),!i){var o=this.dimensions,s=zr(t)||za(t)?new Ha(t,o.length):t;i=new ze;var l=et(o,function(u){return{type:n._dimInfos[u].type,property:u}});i.initData(s,l,a)}this._store=i,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=ei(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},r.prototype.appendValues=function(t,e){var a=this._store.appendValues(t,e.length),n=a.start,i=a.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var s=n;s<i;s++){var l=s-n;this._nameList[s]=e[l],o&&ae(this,s)}},r.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,a=0;a<e.length;a++){var n=this._dimInfos[e[a]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Za&&!t.fillStorage},r.prototype._doInit=function(t,e){if(!(t>=e)){var a=this._store,n=a.getProvider();this._updateOrdinalMeta();var i=this._nameList,o=this._idList,s=n.getSource().sourceFormat,l=s===Le;if(l&&!n.pure)for(var u=[],c=t;c<e;c++){var v=n.getItem(c,u);if(!this.hasItemOption&&Ya(v)&&(this.hasItemOption=!0),v){var f=v.name;i[c]==null&&f!=null&&(i[c]=te(f,null));var h=v.id;o[c]==null&&h!=null&&(o[c]=te(h,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<e;c++)ae(this,c);er(this)}},r.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},r.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},r.prototype.setCalculationInfo=function(t,e){mt(t)?H(this._calculationInfo,t):this._calculationInfo[t]=e},r.prototype.getName=function(t){var e=this.getRawIndex(t),a=this._nameList[e];return a==null&&this._nameDimIdx!=null&&(a=yt(this,this._nameDimIdx,e)),a==null&&(a=""),a},r.prototype._getCategory=function(t,e){var a=this._store.get(t,e),n=this._store.getOrdinalMeta(t);return n?n.categories[a]:a},r.prototype.getId=function(t){return Tt(this,this.getRawIndex(t))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(t,e){var a=this._store,n=this._dimInfos[t];if(n)return a.get(n.storeDimIndex,e)},r.prototype.getByRawIndex=function(t,e){var a=this._store,n=this._dimInfos[t];if(n)return a.getByRawIndex(n.storeDimIndex,e)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},r.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},r.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},r.prototype.getValues=function(t,e){var a=this,n=this._store;return V(t)?n.getValues(et(t,function(i){return a._getStoreDimIndex(i)}),e):n.getValues(t)},r.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,a=0,n=e.length;a<n;a++)if(isNaN(this._store.get(e[a],t)))return!1;return!0},r.prototype.indexOfName=function(t){for(var e=0,a=this._store.count();e<a;e++)if(this.getName(e)===t)return e;return-1},r.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},r.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},r.prototype.rawIndexOf=function(t,e){var a=t&&this._invertedIndicesMap[t],n=a[e];return n==null||isNaN(n)?tr:n},r.prototype.indicesOfNearest=function(t,e,a){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,a)},r.prototype.each=function(t,e,a){Z(t)&&(a=e,e=t,t=[]);var n=a||this,i=et(xt(t),this._getStoreDimIndex,this);this._store.each(i,n?ut(e,n):e)},r.prototype.filterSelf=function(t,e,a){Z(t)&&(a=e,e=t,t=[]);var n=a||this,i=et(xt(t),this._getStoreDimIndex,this);return this._store=this._store.filter(i,n?ut(e,n):e),this},r.prototype.selectRange=function(t){var e=this,a={},n=Kt(t);return A(n,function(i){var o=e._getStoreDimIndex(i);a[o]=t[i]}),this._store=this._store.selectRange(a),this},r.prototype.mapArray=function(t,e,a){Z(t)&&(a=e,e=t,t=[]),a=a||this;var n=[];return this.each(t,function(){n.push(e&&e.apply(this,arguments))},a),n},r.prototype.map=function(t,e,a,n){var i=a||n||this,o=et(xt(t),this._getStoreDimIndex,this),s=Pt(this);return s._store=this._store.map(o,i?ut(e,i):e),s},r.prototype.modify=function(t,e,a,n){var i=a||n||this,o=et(xt(t),this._getStoreDimIndex,this);this._store.modify(o,i?ut(e,i):e)},r.prototype.downSample=function(t,e,a,n){var i=Pt(this);return i._store=this._store.downSample(this._getStoreDimIndex(t),e,a,n),i},r.prototype.lttbDownSample=function(t,e){var a=Pt(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),a},r.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},r.prototype.getItemModel=function(t){var e=this.hostModel,a=this.getRawDataItem(t);return new we(a,e,e&&e.ecModel)},r.prototype.diff=function(t){var e=this;return new Qn(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(a){return Tt(t,a)},function(a){return Tt(e,a)})},r.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},r.prototype.setVisual=function(t,e){this._visual=this._visual||{},mt(t)?H(this._visual,t):this._visual[t]=e},r.prototype.getItemVisual=function(t,e){var a=this._itemVisuals[t],n=a&&a[e];return n??this.getVisual(e)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(t,e){var a=this._itemVisuals,n=a[t];n||(n=a[t]={});var i=n[e];return i==null&&(i=this.getVisual(e),V(i)?i=i.slice():mt(i)&&(i=H({},i)),n[e]=i),i},r.prototype.setItemVisual=function(t,e,a){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,mt(e)?H(n,e):n[e]=a},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(t,e){mt(t)?H(this._layout,t):this._layout[t]=e},r.prototype.getLayout=function(t){return this._layout[t]},r.prototype.getItemLayout=function(t){return this._itemLayouts[t]},r.prototype.setItemLayout=function(t,e,a){this._itemLayouts[t]=a?H(this._itemLayouts[t]||{},e):e},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(t,e){var a=this.hostModel&&this.hostModel.seriesIndex;Xa(a,this.dataType,t,e),this._graphicEls[t]=e},r.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},r.prototype.eachItemGraphicEl=function(t,e){A(this._graphicEls,function(a,n){a&&t&&t.call(e,a,n)})},r.prototype.cloneShallow=function(t){return t||(t=new r(this._schema?this._schema:et(this.dimensions,this._getDimInfo,this),this.hostModel)),re(t,this),t._store=this._store,t},r.prototype.wrapMethod=function(t,e){var a=this[t];Z(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=a.apply(this,arguments);return e.apply(this,[n].concat(Ua(arguments)))})},r.internalField=function(){er=function(t){var e=t._invertedIndicesMap;A(e,function(a,n){var i=t._dimInfos[n],o=i.ordinalMeta,s=t._store;if(o){a=e[n]=new oi(o.categories.length);for(var l=0;l<a.length;l++)a[l]=tr;for(var l=0;l<s.count();l++)a[s.get(i.storeDimIndex,l)]=l}})},yt=function(t,e,a){return te(t._getCategory(e,a),null)},Tt=function(t,e){var a=t._idList[e];return a==null&&t._idDimIdx!=null&&(a=yt(t,t._idDimIdx,e)),a==null&&(a=si+e),a},xt=function(t){return V(t)||(t=t!=null?[t]:[]),t},Pt=function(t){var e=new r(t._schema?t._schema:et(t.dimensions,t._getDimInfo,t),t.hostModel);return re(e,t),e},re=function(t,e){A(li.concat(e.__wrappedMethods||[]),function(a){e.hasOwnProperty(a)&&(t[a]=e[a])}),t.__wrappedMethods=e.__wrappedMethods,A(ui,function(a){t[a]=Ce(e[a])}),t._calculationInfo=H({},e._calculationInfo)},ae=function(t,e){var a=t._nameList,n=t._idList,i=t._nameDimIdx,o=t._idDimIdx,s=a[e],l=n[e];if(s==null&&i!=null&&(a[e]=s=yt(t,i,e)),l==null&&o!=null&&(n[e]=l=yt(t,o,e)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),n[e]=l}}}(),r}();function vi(r,t){zr(r)||(r=$a(r)),t=t||{};var e=t.coordDimensions||[],a=t.dimensionsDefine||r.dimensionsDefine||[],n=J(),i=[],o=fi(r,e,a,t.dimensionsCount),s=t.canOmitUnusedDimensions&&la(o),l=a===r.dimensionsDefine,u=l?sa(r):oa(a),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(r,o));for(var v=J(c),f=new Ka(o),h=0;h<f.length;h++)f[h]=-1;function d(P){var w=f[P];if(w<0){var b=a[P],C=K(b)?b:{name:b},S=new Wt,E=C.name;E!=null&&u.get(E)!=null&&(S.name=S.displayName=E),C.type!=null&&(S.type=C.type),C.displayName!=null&&(S.displayName=C.displayName);var T=i.length;return f[P]=T,S.storeDimIndex=P,i.push(S),S}return i[w]}if(!s)for(var h=0;h<o;h++)d(h);v.each(function(P,w){var b=He(P).slice();if(b.length===1&&!X(b[0])&&b[0]<0){v.set(w,!1);return}var C=v.set(w,[]);A(b,function(S,E){var T=X(S)?u.get(S):S;T!=null&&T<o&&(C[E]=T,p(d(T),w,E))})});var g=0;A(e,function(P){var w,b,C,S;if(X(P))w=P,S={};else{S=P,w=S.name;var E=S.ordinalMeta;S.ordinalMeta=null,S=H({},S),S.ordinalMeta=E,b=S.dimsDef,C=S.otherDims,S.name=S.coordDim=S.coordDimIndex=S.dimsDef=S.otherDims=null}var T=v.get(w);if(T!==!1){if(T=He(T),!T.length)for(var B=0;B<(b&&b.length||1);B++){for(;g<o&&d(g).coordDim!=null;)g++;g<o&&T.push(g++)}A(T,function(W,O){var k=d(W);if(l&&S.type!=null&&(k.type=S.type),p(q(k,S),w,O),k.name==null&&b){var N=b[O];!K(N)&&(N={name:N}),k.name=k.displayName=N.name,k.defaultTooltip=N.defaultTooltip}C&&q(k.otherDims,C)})}});function p(P,w,b){Wr.get(w)!=null?P.otherDims[w]=b:(P.coordDim=w,P.coordDimIndex=b,n.set(w,!0))}var m=t.generateCoord,y=t.generateCoordCount,x=y!=null;y=m?y||1:0;var _=m||"value";function M(P){P.name==null&&(P.name=P.coordDim)}if(s)A(i,function(P){M(P)}),i.sort(function(P,w){return P.storeDimIndex-w.storeDimIndex});else for(var L=0;L<o;L++){var D=d(L),I=D.coordDim;I==null&&(D.coordDim=di(_,n,x),D.coordDimIndex=0,(!m||y<=0)&&(D.isExtraCoord=!0),y--),M(D),D.type==null&&(qa(r,L)===ja.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return hi(i),new na({source:r,dimensions:i,fullDimensionCount:o,dimensionOmitted:s})}function hi(r){for(var t=J(),e=0;e<r.length;e++){var a=r[e],n=a.name,i=t.get(n)||0;i>0&&(a.name=n+(i-1)),i++,t.set(n,i)}}function fi(r,t,e,a){var n=Math.max(r.dimensionsDetectedCount||1,t.length,e.length,a||0);return A(t,function(i){var o;K(i)&&(o=i.dimsDef)&&(n=Math.max(n,o.length))}),n}function di(r,t,e){if(e||t.hasKey(r)){for(var a=0;t.hasKey(r+a);)a++;r+=a}return t.set(r,!0),r}var gi=function(){function r(t){this.coordSysDims=[],this.axisMap=J(),this.categoryAxisMap=J(),this.coordSysName=t}return r}();function pi(r){var t=r.get("coordinateSystem"),e=new gi(t),a=mi[t];if(a)return a(r,e,e.axisMap,e.categoryAxisMap),e}var mi={cartesian2d:function(r,t,e,a){var n=r.getReferringComponents("xAxis",rt).models[0],i=r.getReferringComponents("yAxis",rt).models[0];t.coordSysDims=["x","y"],e.set("x",n),e.set("y",i),lt(n)&&(a.set("x",n),t.firstCategoryDimIndex=0),lt(i)&&(a.set("y",i),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(r,t,e,a){var n=r.getReferringComponents("singleAxis",rt).models[0];t.coordSysDims=["single"],e.set("single",n),lt(n)&&(a.set("single",n),t.firstCategoryDimIndex=0)},polar:function(r,t,e,a){var n=r.getReferringComponents("polar",rt).models[0],i=n.findAxisModel("radiusAxis"),o=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",i),e.set("angle",o),lt(i)&&(a.set("radius",i),t.firstCategoryDimIndex=0),lt(o)&&(a.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(r,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(r,t,e,a){var n=r.ecModel,i=n.getComponent("parallel",r.get("parallelIndex")),o=t.coordSysDims=i.dimensions.slice();A(i.parallelAxisIndex,function(s,l){var u=n.getComponent("parallelAxis",s),c=o[l];e.set(c,u),lt(u)&&(a.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function lt(r){return r.get("type")==="category"}function yi(r,t,e){e=e||{};var a=e.byIndex,n=e.stackedCoordDimension,i,o,s;xi(t)?i=t:(o=t.schema,i=o.dimensions,s=t.store);var l=!!(r&&r.get("stack")),u,c,v,f;if(A(i,function(y,x){X(y)&&(i[x]=y={name:y}),l&&!y.isExtraCoord&&(!a&&!u&&y.ordinalMeta&&(u=y),!c&&y.type!=="ordinal"&&y.type!=="time"&&(!n||n===y.coordDim)&&(c=y))}),c&&!a&&!u&&(a=!0),c){v="__\0ecstackresult_"+r.id,f="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var h=c.coordDim,d=c.type,g=0;A(i,function(y){y.coordDim===h&&g++});var p={name:v,coordDim:h,coordDimIndex:g,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},m={name:f,coordDim:f,coordDimIndex:g+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(s&&(p.storeDimIndex=s.ensureCalculationDimension(f,d),m.storeDimIndex=s.ensureCalculationDimension(v,d)),o.appendCalculationDimension(p),o.appendCalculationDimension(m)):(i.push(p),i.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:a,stackedOverDimension:f,stackResultDimension:v}}function xi(r){return!ia(r.schema)}function ua(r,t){return!!t&&t===r.getCalculationInfo("stackedDimension")}function _i(r,t){return ua(r,t)?r.getCalculationInfo("stackResultDimension"):t}function bi(r,t){var e=r.get("coordinateSystem"),a=tn.get(e),n;return t&&t.coordSysDims&&(n=G(t.coordSysDims,function(i){var o={name:i},s=t.axisMap.get(i);if(s){var l=s.get("type");o.type=ri(l)}return o})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),n}function Ai(r,t,e){var a,n;return e&&A(r,function(i,o){var s=i.coordDim,l=e.categoryAxisMap.get(s);l&&(a==null&&(a=o),i.ordinalMeta=l.getOrdinalMeta(),t&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(n=!0)}),!n&&a!=null&&(r[a].otherDims.itemName=0),a}function ca(r,t,e){e=e||{};var a=t.getSourceManager(),n,i=!1;n=a.getSource(),i=n.sourceFormat===Le;var o=pi(t),s=bi(t,o),l=e.useEncodeDefaulter,u=Z(l)?l:l?j(Ja,s,t):null,c={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!i},v=vi(n,c),f=Ai(v.dimensions,e.createInvertedIndices,o),h=i?null:a.getSharedDataStore(v),d=yi(t,{schema:v,store:h}),g=new ci(v,t);g.setCalculationInfo(d);var p=f!=null&&Si(n)?function(m,y,x,_){return _===f?x:this.defaultDimValueGetter(m,y,x,_)}:null;return g.hasItemOption=!1,g.initData(i?n:h,null,p),g}function Si(r){if(r.sourceFormat===Le){var t=Mi(r.data||[]);return!V(Qa(t))}}function Mi(r){for(var t=0;t<r.length&&r[t]==null;)t++;return r[t]}var Q=function(){function r(t){this._setting=t||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(t){return this._setting[t]},r.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},r.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(t,e){var a=this._extent;isNaN(t)||(a[0]=t),isNaN(e)||(a[1]=e)},r.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(t){this._isBlank=t},r}();en(Q);var Di=0,ye=function(){function r(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Di}return r.createByAxisModel=function(t){var e=t.option,a=e.data,n=a&&G(a,wi);return new r({categories:n,needCollect:!n,deduplication:e.dedplication!==!1})},r.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},r.prototype.parseAndCollect=function(t){var e,a=this._needCollect;if(!X(t)&&!a)return t;if(a&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var n=this._getOrCreateMap();return e=n.get(t),e==null&&(a?(e=this.categories.length,this.categories[e]=t,n.set(t,e)):e=NaN),e},r.prototype._getOrCreateMap=function(){return this._map||(this._map=J(this.categories))},r}();function wi(r){return K(r)&&r.value!=null?r.value:r+""}function xe(r){return r.type==="interval"||r.type==="log"}function Ci(r,t,e,a){var n={},i=r[1]-r[0],o=n.interval=Hr(i/t);e!=null&&o<e&&(o=n.interval=e),a!=null&&o>a&&(o=n.interval=a);var s=n.intervalPrecision=va(o),l=n.niceTickExtent=[F(Math.ceil(r[0]/o)*o,s),F(Math.floor(r[1]/o)*o,s)];return Li(l,r),n}function ne(r){var t=Math.pow(10,rn(r)),e=r/t;return e?e===2?e=3:e===3?e=5:e*=2:e=1,F(e*t)}function va(r){return Ie(r)+2}function rr(r,t,e){r[t]=Math.max(Math.min(r[t],e[1]),e[0])}function Li(r,t){!isFinite(r[0])&&(r[0]=t[0]),!isFinite(r[1])&&(r[1]=t[1]),rr(r,0,t),rr(r,1,t),r[0]>r[1]&&(r[0]=r[1])}function qt(r,t){return r>=t[0]&&r<=t[1]}function jt(r,t){return t[1]===t[0]?.5:(r-t[0])/(t[1]-t[0])}function Jt(r,t){return r*(t[1]-t[0])+t[0]}var Ne=function(r){R(t,r);function t(e){var a=r.call(this,e)||this;a.type="ordinal";var n=a.getSetting("ordinalMeta");return n||(n=new ye({})),V(n)&&(n=new ye({categories:G(n,function(i){return K(i)?i.value:i})})),a._ordinalMeta=n,a._extent=a.getSetting("extent")||[0,n.categories.length-1],a}return t.prototype.parse=function(e){return e==null?NaN:X(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return e=this.parse(e),qt(e,this._extent)&&this._ordinalMeta.categories[e]!=null},t.prototype.normalize=function(e){return e=this._getTickNumber(this.parse(e)),jt(e,this._extent)},t.prototype.scale=function(e){return e=Math.round(Jt(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],a=this._extent,n=a[0];n<=a[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(e==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,a.length);o<l;++o){var u=a[o];n[o]=u,i[u]=o}for(var c=0;o<s;++o){for(;i[c]!=null;)c++;n.push(c),i[c]=o}},t.prototype._getTickNumber=function(e){var a=this._ticksByOrdinalNumber;return a&&e>=0&&e<a.length?a[e]:e},t.prototype.getRawOrdinalNumber=function(e){var a=this._ordinalNumbersByTick;return a&&e>=0&&e<a.length?a[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var a=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[a];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,a){this.unionExtent(e.getApproximateExtent(a))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Q);Q.registerClass(Ne);var it=F,ft=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return qt(e,this._extent)},t.prototype.normalize=function(e){return jt(e,this._extent)},t.prototype.scale=function(e){return Jt(e,this._extent)},t.prototype.setExtent=function(e,a){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(a)||(n[1]=parseFloat(a))},t.prototype.unionExtent=function(e){var a=this._extent;e[0]<a[0]&&(a[0]=e[0]),e[1]>a[1]&&(a[1]=e[1]),this.setExtent(a[0],a[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=va(e)},t.prototype.getTicks=function(e){var a=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,s=[];if(!a)return s;var l=1e4;n[0]<i[0]&&(e?s.push({value:it(i[0]-a,o)}):s.push({value:n[0]}));for(var u=i[0];u<=i[1]&&(s.push({value:u}),u=it(u+a,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:i[1];return n[1]>c&&(e?s.push({value:it(c+a,o)}):s.push({value:n[1]})),s},t.prototype.getMinorTicks=function(e){for(var a=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<a.length;o++){for(var s=a[o],l=a[o-1],u=0,c=[],v=s.value-l.value,f=v/e;u<e-1;){var h=it(l.value+(u+1)*f);h>i[0]&&h<i[1]&&c.push(h),u++}n.push(c)}return n},t.prototype.getLabel=function(e,a){if(e==null)return"";var n=a&&a.precision;n==null?n=Ie(e.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=it(e.value,n,!0);return an(i)},t.prototype.calcNiceTicks=function(e,a,n){e=e||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var s=Ci(i,e,a,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var n=Math.abs(a[0]);e.fixMax||(a[1]+=n/2),a[0]-=n/2}else a[1]=1;var i=a[1]-a[0];isFinite(i)||(a[0]=0,a[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(a[0]=it(Math.floor(a[0]/o)*o)),e.fixMax||(a[1]=it(Math.ceil(a[1]/o)*o))},t.prototype.setNiceExtent=function(e,a){this._niceExtent=[e,a]},t.type="interval",t}(Q);Q.registerClass(ft);var ha=typeof Float32Array<"u",Ii=ha?Float32Array:Array;function ie(r){return V(r)?ha?new Float32Array(r):r:new Ii(r)}var Ti="__ec_stack_";function Re(r){return r.get("stack")||Ti+r.seriesIndex}function Be(r){return r.dim+r.index}function fa(r,t){var e=[];return t.eachSeriesByType(r,function(a){ga(a)&&e.push(a)}),e}function Pi(r){var t={};A(r,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var v=l.getData(),f=c.dim+"_"+c.index,h=v.getDimensionIndex(v.mapDimension(c.dim)),d=v.getStore(),g=0,p=d.count();g<p;++g){var m=d.get(h,g);t[f]?t[f].push(m):t[f]=[m]}});var e={};for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];if(n){n.sort(function(l,u){return l-u});for(var i=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(i=i===null?s:Math.min(i,s))}e[a]=i}}return e}function da(r){var t=Pi(r),e=[];return A(r,function(a){var n=a.coordinateSystem,i=n.getBaseAxis(),o=i.getExtent(),s;if(i.type==="category")s=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var l=i.dim+"_"+i.index,u=t[l],c=Math.abs(o[1]-o[0]),v=i.scale.getExtent(),f=Math.abs(v[1]-v[0]);s=u?c/f*u:c}else{var h=a.getData();s=Math.abs(o[1]-o[0])/h.count()}var d=bt(a.get("barWidth"),s),g=bt(a.get("barMaxWidth"),s),p=bt(a.get("barMinWidth")||(pa(a)?.5:1),s),m=a.get("barGap"),y=a.get("barCategoryGap");e.push({bandWidth:s,barWidth:d,barMaxWidth:g,barMinWidth:p,barGap:m,barCategoryGap:y,axisKey:Be(i),stackId:Re(a)})}),Oi(e)}function Oi(r){var t={};A(r,function(a,n){var i=a.axisKey,o=a.bandWidth,s=t[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[i]=s;var u=a.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=a.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var v=a.barMaxWidth;v&&(l[u].maxWidth=v);var f=a.barMinWidth;f&&(l[u].minWidth=f);var h=a.barGap;h!=null&&(s.gap=h);var d=a.barCategoryGap;d!=null&&(s.categoryGap=d)});var e={};return A(t,function(a,n){e[n]={};var i=a.stacks,o=a.bandWidth,s=a.categoryGap;if(s==null){var l=Kt(i).length;s=Math.max(35-l*4,15)+"%"}var u=bt(s,o),c=bt(a.gap,1),v=a.remainedWidth,f=a.autoWidthCount,h=(v-u)/(f+(f-1)*c);h=Math.max(h,0),A(i,function(m){var y=m.maxWidth,x=m.minWidth;if(m.width){var _=m.width;y&&(_=Math.min(_,y)),x&&(_=Math.max(_,x)),m.width=_,v-=_+c*_,f--}else{var _=h;y&&y<_&&(_=Math.min(y,v)),x&&x>_&&(_=x),_!==h&&(m.width=_,v-=_+c*_,f--)}}),h=(v-u)/(f+(f-1)*c),h=Math.max(h,0);var d=0,g;A(i,function(m,y){m.width||(m.width=h),g=m,d+=m.width*(1+c)}),g&&(d-=g.width*c);var p=-d/2;A(i,function(m,y){e[n][y]=e[n][y]||{bandWidth:o,offset:p,width:m.width},p+=m.width*(1+c)})}),e}function Ei(r,t,e){if(r&&t){var a=r[Be(t)];return a!=null&&e!=null?a[Re(e)]:a}}function ki(r,t){var e=fa(r,t),a=da(e);A(e,function(n){var i=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),l=Re(n),u=a[Be(s)][l],c=u.offset,v=u.width;i.setLayout({bandWidth:u.bandWidth,offset:c,size:v})})}function Ni(r){return{seriesType:r,plan:nn(),reset:function(t){if(ga(t)){var e=t.getData(),a=t.coordinateSystem,n=a.getBaseAxis(),i=a.getOtherAxis(n),o=e.getDimensionIndex(e.mapDimension(i.dim)),s=e.getDimensionIndex(e.mapDimension(n.dim)),l=t.get("showBackground",!0),u=e.mapDimension(i.dim),c=e.getCalculationInfo("stackResultDimension"),v=ua(e,u)&&!!e.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),h=Ri(n,i),d=pa(t),g=t.get("barMinHeight")||0,p=c&&e.getDimensionIndex(c),m=e.getLayout("size"),y=e.getLayout("offset");return{progress:function(x,_){for(var M=x.count,L=d&&ie(M*3),D=d&&l&&ie(M*3),I=d&&ie(M),P=a.master.getRect(),w=f?P.width:P.height,b,C=_.getStore(),S=0;(b=x.next())!=null;){var E=C.get(v?p:o,b),T=C.get(s,b),B=h,W=void 0;v&&(W=+E-C.get(o,b));var O=void 0,k=void 0,N=void 0,z=void 0;if(f){var gt=a.dataToPoint([E,T]);if(v){var Qt=a.dataToPoint([W,T]);B=Qt[0]}O=B,k=gt[1]+y,N=gt[0]-B,z=m,Math.abs(N)<g&&(N=(N<0?-1:1)*g)}else{var gt=a.dataToPoint([T,E]);if(v){var Qt=a.dataToPoint([T,W]);B=Qt[1]}O=gt[0]+y,k=B,N=m,z=gt[1]-B,Math.abs(z)<g&&(z=(z<=0?-1:1)*g)}d?(L[S]=O,L[S+1]=k,L[S+2]=f?N:z,D&&(D[S]=f?P.x:O,D[S+1]=f?k:P.y,D[S+2]=w),I[b]=b):_.setItemLayout(b,{x:O,y:k,width:N,height:z}),S+=3}d&&_.setLayout({largePoints:L,largeDataIndices:I,largeBackgroundPoints:D,valueAxisHorizontal:f})}}}}}}function ga(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function pa(r){return r.pipelineContext&&r.pipelineContext.large}function Ri(r,t){var e=t.model.get("startValue");return e||(e=0),t.toGlobalCoord(t.dataToCoord(t.type==="log"?e>0?e:1:e))}var Bi=function(r,t,e,a){for(;e<a;){var n=e+a>>>1;r[n][1]<t?e=n+1:a=n}return e},ma=function(r){R(t,r);function t(e){var a=r.call(this,e)||this;return a.type="time",a}return t.prototype.getLabel=function(e){var a=this.getSetting("useUTC");return on(e.value,Ze[sn(At(this._minLevelUnit))]||Ze.second,a,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,a,n){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return ln(e,a,n,o,i)},t.prototype.getTicks=function(){var e=this._interval,a=this._extent,n=[];if(!e)return n;n.push({value:a[0],level:0});var i=this.getSetting("useUTC"),o=Zi(this._minLevelUnit,this._approxInterval,i,a);return n=n.concat(o),n.push({value:a[1],level:0}),n},t.prototype.calcNiceExtent=function(e){var a=this._extent;if(a[0]===a[1]&&(a[0]-=$,a[1]+=$),a[1]===-1/0&&a[0]===1/0){var n=new Date;a[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),a[0]=a[1]-$}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,a,n){e=e||10;var i=this._extent,o=i[1]-i[0];this._approxInterval=o/e,a!=null&&this._approxInterval<a&&(this._approxInterval=a),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=Ot.length,l=Math.min(Bi(Ot,this._approxInterval,0,s),s-1);this._interval=Ot[l][1],this._minLevelUnit=Ot[Math.max(l-1,0)][0]},t.prototype.parse=function(e){return $t(e)?e:+fe(e)},t.prototype.contain=function(e){return qt(this.parse(e),this._extent)},t.prototype.normalize=function(e){return jt(this.parse(e),this._extent)},t.prototype.scale=function(e){return Jt(e,this._extent)},t.type="time",t}(ft),Ot=[["second",Zr],["minute",Yr],["hour",Ft],["quarter-day",Ft*6],["half-day",Ft*12],["day",$*1.2],["half-week",$*3.5],["week",$*7],["month",$*31],["quarter",$*95],["half-year",Ye/2],["year",Ye]];function Gi(r,t,e,a){var n=fe(t),i=fe(e),o=function(d){return Xe(n,d,a)===Xe(i,d,a)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},v=function(){return c()&&o("minute")},f=function(){return v()&&o("second")},h=function(){return f()&&o("millisecond")};switch(r){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return v();case"second":return f();case"millisecond":return h()}}function Fi(r,t){return r/=$,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function Vi(r){var t=30*$;return r/=t,r>6?6:r>3?3:r>2?2:1}function Wi(r){return r/=Ft,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function ar(r,t){return r/=t?Yr:Zr,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function zi(r){return Hr(r)}function Hi(r,t,e){var a=new Date(r);switch(At(t)){case"year":case"month":a[jr(e)](0);case"day":a[qr(e)](1);case"hour":a[Kr(e)](0);case"minute":a[$r(e)](0);case"second":a[Xr(e)](0),a[Ur(e)](0)}return a.getTime()}function Zi(r,t,e,a){var n=1e4,i=cn,o=0;function s(w,b,C,S,E,T,B){for(var W=new Date(b),O=b,k=W[S]();O<C&&O<=a[1];)B.push({value:O}),k+=w,W[E](k),O=W.getTime();B.push({value:O,notAdd:!0})}function l(w,b,C){var S=[],E=!b.length;if(!Gi(At(w),a[0],a[1],e)){E&&(b=[{value:Hi(new Date(a[0]),w,e)},{value:a[1]}]);for(var T=0;T<b.length-1;T++){var B=b[T].value,W=b[T+1].value;if(B!==W){var O=void 0,k=void 0,N=void 0,z=!1;switch(w){case"year":O=Math.max(1,Math.round(t/$/365)),k=mn(e),N=yn(e);break;case"half-year":case"quarter":case"month":O=Vi(t),k=pn(e),N=jr(e);break;case"week":case"half-week":case"day":O=Fi(t),k=gn(e),N=qr(e),z=!0;break;case"half-day":case"quarter-day":case"hour":O=Wi(t),k=dn(e),N=Kr(e);break;case"minute":O=ar(t,!0),k=fn(e),N=$r(e);break;case"second":O=ar(t,!1),k=hn(e),N=Xr(e);break;case"millisecond":O=zi(t),k=vn(e),N=Ur(e);break}s(O,B,W,k,N,z,S),w==="year"&&C.length>1&&T===0&&C.unshift({value:C[0].value-O})}}for(var T=0;T<S.length;T++)C.push(S[T]);return S}}for(var u=[],c=[],v=0,f=0,h=0;h<i.length&&o++<n;++h){var d=At(i[h]);if(un(i[h])){l(i[h],u[u.length-1]||[],c);var g=i[h+1]?At(i[h+1]):null;if(d!==g){if(c.length){f=v,c.sort(function(w,b){return w.value-b.value});for(var p=[],m=0;m<c.length;++m){var y=c[m].value;(m===0||c[m-1].value!==y)&&(p.push(c[m]),y>=a[0]&&y<=a[1]&&v++)}var x=(a[1]-a[0])/t;if(v>x*1.5&&f>x/1.5||(u.push(p),v>x||r===i[h]))break}c=[]}}}for(var _=de(G(u,function(w){return de(w,function(b){return b.value>=a[0]&&b.value<=a[1]&&!b.notAdd})}),function(w){return w.length>0}),M=[],L=_.length-1,h=0;h<_.length;++h)for(var D=_[h],I=0;I<D.length;++I)M.push({value:D[I].value,level:L-h});M.sort(function(w,b){return w.value-b.value});for(var P=[],h=0;h<M.length;++h)(h===0||M[h].value!==M[h-1].value)&&P.push(M[h]);return P}Q.registerClass(ma);var nr=Q.prototype,St=ft.prototype,Yi=F,Xi=Math.floor,Ui=Math.ceil,Et=Math.pow,U=Math.log,Ge=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new ft,e._interval=0,e}return t.prototype.getTicks=function(e){var a=this._originalScale,n=this._extent,i=a.getExtent(),o=St.getTicks.call(this,e);return G(o,function(s){var l=s.value,u=F(Et(this.base,l));return u=l===n[0]&&this._fixMin?kt(u,i[0]):u,u=l===n[1]&&this._fixMax?kt(u,i[1]):u,{value:u}},this)},t.prototype.setExtent=function(e,a){var n=U(this.base);e=U(Math.max(0,e))/n,a=U(Math.max(0,a))/n,St.setExtent.call(this,e,a)},t.prototype.getExtent=function(){var e=this.base,a=nr.getExtent.call(this);a[0]=Et(e,a[0]),a[1]=Et(e,a[1]);var n=this._originalScale,i=n.getExtent();return this._fixMin&&(a[0]=kt(a[0],i[0])),this._fixMax&&(a[1]=kt(a[1],i[1])),a},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var a=this.base;e[0]=U(e[0])/U(a),e[1]=U(e[1])/U(a),nr.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,a){this.unionExtent(e.getApproximateExtent(a))},t.prototype.calcNiceTicks=function(e){e=e||10;var a=this._extent,n=a[1]-a[0];if(!(n===1/0||n<=0)){var i=xn(n),o=e/n*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[F(Ui(a[0]/i)*i),F(Xi(a[1]/i)*i)];this._interval=i,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){St.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return e=U(e)/U(this.base),qt(e,this._extent)},t.prototype.normalize=function(e){return e=U(e)/U(this.base),jt(e,this._extent)},t.prototype.scale=function(e){return e=Jt(e,this._extent),Et(this.base,e)},t.type="log",t}(Q),ya=Ge.prototype;ya.getMinorTicks=St.getMinorTicks;ya.getLabel=St.getLabel;function kt(r,t){return Yi(r,Ie(t))}Q.registerClass(Ge);var $i=function(){function r(t,e,a){this._prepareParams(t,e,a)}return r.prototype._prepareParams=function(t,e,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&e.getNeedCrossZero&&e.getNeedCrossZero();var i=e.get("min",!0);i==null&&(i=e.get("startValue",!0));var o=this._modelMinRaw=i;Z(o)?this._modelMinNum=Nt(t,o({min:a[0],max:a[1]})):o!=="dataMin"&&(this._modelMinNum=Nt(t,o));var s=this._modelMaxRaw=e.get("max",!0);if(Z(s)?this._modelMaxNum=Nt(t,s({min:a[0],max:a[1]})):s!=="dataMax"&&(this._modelMaxNum=Nt(t,s)),n)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),u=V(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ge(u[0],1),ge(u[1],1)]}},r.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,a=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,o=t?null:a-e||Math.abs(e),s=this._modelMinRaw==="dataMin"?e:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?n?0:NaN:e-i[0]*o),l==null&&(l=t?n?n-1:NaN:a+i[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var v=pe(s)||pe(l)||t&&!n;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var f=this._determinedMin,h=this._determinedMax;return f!=null&&(s=f,u=!0),h!=null&&(l=h,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:v}},r.prototype.modifyDataMinMax=function(t,e){this[qi[t]]=e},r.prototype.setDeterminedMinMax=function(t,e){var a=Ki[t];this[a]=e},r.prototype.freeze=function(){this.frozen=!0},r}(),Ki={min:"_determinedMin",max:"_determinedMax"},qi={min:"_dataMin",max:"_dataMax"};function ji(r,t,e){var a=r.rawExtentInfo;return a||(a=new $i(r,t,e),r.rawExtentInfo=a,a)}function Nt(r,t){return t==null?null:pe(t)?NaN:r.parse(t)}function xa(r,t){var e=r.type,a=ji(r,t,r.getExtent()).calculate();r.setBlank(a.isBlank);var n=a.min,i=a.max,o=t.ecModel;if(o&&e==="time"){var s=fa("bar",o),l=!1;if(A(s,function(v){l=l||v.getBaseAxis()===t.axis}),l){var u=da(s),c=Ji(n,i,t,u);n=c.min,i=c.max}}return{extent:[n,i],fixMin:a.minFixed,fixMax:a.maxFixed}}function Ji(r,t,e,a){var n=e.axis.getExtent(),i=n[1]-n[0],o=Ei(a,e.axis);if(o===void 0)return{min:r,max:t};var s=1/0;A(o,function(h){s=Math.min(h.offset,s)});var l=-1/0;A(o,function(h){l=Math.max(h.offset+h.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-r,v=1-(s+l)/i,f=c/v-c;return t+=f*(l/u),r-=f*(s/u),{min:r,max:t}}function ir(r,t){var e=t,a=xa(r,e),n=a.extent,i=e.get("splitNumber");r instanceof Ge&&(r.base=e.get("logBase"));var o=r.type,s=e.get("interval"),l=o==="interval"||o==="time";r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:i,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:l?e.get("minInterval"):null,maxInterval:l?e.get("maxInterval"):null}),s!=null&&r.setInterval&&r.setInterval(s)}function Qi(r,t){if(t=t||r.get("type"),t)switch(t){case"category":return new Ne({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new ma({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(Q.getClass(t)||ft)}}function to(r){var t=r.scale.getExtent(),e=t[0],a=t[1];return!(e>0&&a>0||e<0&&a<0)}function dt(r){var t=r.getLabelModel().get("formatter"),e=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(a){return function(n,i){return r.scale.getFormattedLabel(n,i,a)}}(t):X(t)?function(a){return function(n){var i=r.scale.getLabel(n),o=a.replace("{value}",i??"");return o}}(t):Z(t)?function(a){return function(n,i){return e!=null&&(i=n.value-e),a(_a(r,n),i,n.level!=null?{level:n.level}:null)}}(t):function(a){return r.scale.getLabel(a)}}function _a(r,t){return r.type==="category"?r.scale.getLabel(t):t.value}function eo(r){var t=r.model,e=r.scale;if(!(!t.get(["axisLabel","show"])||e.isBlank())){var a,n,i=e.getExtent();e instanceof Ne?n=e.count():(a=e.getTicks(),n=a.length);var o=r.getLabelModel(),s=dt(r),l,u=1;n>40&&(u=Math.ceil(n/40));for(var c=0;c<n;c+=u){var v=a?a[c]:{value:i[0]+c},f=s(v,c),h=o.getTextRect(f),d=ro(h,o.get("rotate")||0);l?l.union(d):l=d}return l}}function ro(r,t){var e=t*Math.PI/180,a=r.width,n=r.height,i=a*Math.abs(Math.cos(e))+Math.abs(n*Math.sin(e)),o=a*Math.abs(Math.sin(e))+Math.abs(n*Math.cos(e)),s=new Ht(r.x,r.y,i,o);return s}function Fe(r){var t=r.get("interval");return t??"auto"}function ba(r){return r.type==="category"&&Fe(r.getLabelModel())===0}function Aa(r,t){var e={};return A(r.mapDimensionsAll(t),function(a){e[_i(r,a)]=!0}),Kt(e)}function Us(r,t,e){t&&A(Aa(t,e),function(a){var n=t.getApproximateExtent(a);n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])})}var ao=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},r.prototype.getCoordSysModel=function(){},r}(),wt=ht();function Sa(r,t){var e=G(t,function(a){return r.scale.parse(a)});return r.type==="time"&&e.length>0&&(e.sort(),e.unshift(e[0]),e.push(e[e.length-1])),e}function no(r){var t=r.getLabelModel().get("customValues");if(t){var e=dt(r);return{labels:Sa(r,t).map(function(a){var n={value:a};return{formattedLabel:e(n),rawLabel:r.scale.getLabel(n),tickValue:a}})}}return r.type==="category"?oo(r):lo(r)}function io(r,t){var e=r.getTickModel().get("customValues");return e?{ticks:Sa(r,e)}:r.type==="category"?so(r,t):{ticks:G(r.scale.getTicks(),function(a){return a.value})}}function oo(r){var t=r.getLabelModel(),e=Ma(r,t);return!t.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:e.labelCategoryInterval}:e}function Ma(r,t){var e=Da(r,"labels"),a=Fe(t),n=wa(e,a);if(n)return n;var i,o;return Z(a)?i=Ia(r,a):(o=a==="auto"?uo(r):a,i=La(r,o)),Ca(e,a,{labels:i,labelCategoryInterval:o})}function so(r,t){var e=Da(r,"ticks"),a=Fe(t),n=wa(e,a);if(n)return n;var i,o;if((!t.get("show")||r.scale.isBlank())&&(i=[]),Z(a))i=Ia(r,a,!0);else if(a==="auto"){var s=Ma(r,r.getLabelModel());o=s.labelCategoryInterval,i=G(s.labels,function(l){return l.tickValue})}else o=a,i=La(r,o,!0);return Ca(e,a,{ticks:i,tickCategoryInterval:o})}function lo(r){var t=r.scale.getTicks(),e=dt(r);return{labels:G(t,function(a,n){return{level:a.level,formattedLabel:e(a,n),rawLabel:r.scale.getLabel(a),tickValue:a.value}})}}function Da(r,t){return wt(r)[t]||(wt(r)[t]=[])}function wa(r,t){for(var e=0;e<r.length;e++)if(r[e].key===t)return r[e].value}function Ca(r,t,e){return r.push({key:t,value:e}),e}function uo(r){var t=wt(r).autoInterval;return t??(wt(r).autoInterval=r.calculateCategoryInterval())}function co(r){var t=vo(r),e=dt(r),a=(t.axisRotate-t.labelRotate)/180*Math.PI,n=r.scale,i=n.getExtent(),o=n.count();if(i[1]-i[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=i[0],u=r.dataToCoord(l+1)-r.dataToCoord(l),c=Math.abs(u*Math.cos(a)),v=Math.abs(u*Math.sin(a)),f=0,h=0;l<=i[1];l+=s){var d=0,g=0,p=Jr(e({value:l}),t.font,"center","top");d=p.width*1.3,g=p.height*1.3,f=Math.max(f,d,7),h=Math.max(h,g,7)}var m=f/c,y=h/v;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(m,y))),_=wt(r.model),M=r.getExtent(),L=_.lastAutoInterval,D=_.lastTickCount;return L!=null&&D!=null&&Math.abs(L-x)<=1&&Math.abs(D-o)<=1&&L>x&&_.axisExtent0===M[0]&&_.axisExtent1===M[1]?x=L:(_.lastTickCount=o,_.lastAutoInterval=x,_.axisExtent0=M[0],_.axisExtent1=M[1]),x}function vo(r){var t=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function La(r,t,e){var a=dt(r),n=r.scale,i=n.getExtent(),o=r.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=i[0],c=n.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var v=ba(r),f=o.get("showMinLabel")||v,h=o.get("showMaxLabel")||v;f&&u!==i[0]&&g(i[0]);for(var d=u;d<=i[1];d+=l)g(d);h&&d-l!==i[1]&&g(i[1]);function g(p){var m={value:p};s.push(e?p:{formattedLabel:a(m),rawLabel:n.getLabel(m),tickValue:p})}return s}function Ia(r,t,e){var a=r.scale,n=dt(r),i=[];return A(a.getTicks(),function(o){var s=a.getLabel(o),l=o.value;t(o.value,s)&&i.push(e?l:{formattedLabel:n(o),rawLabel:s,tickValue:l})}),i}var or=[0,1],ho=function(){function r(t,e,a){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=a||[0,0]}return r.prototype.contain=function(t){var e=this._extent,a=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]);return t>=a&&t<=n},r.prototype.containData=function(t){return this.scale.contain(t)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(t){return _n(t||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(t,e){var a=this._extent;a[0]=t,a[1]=e},r.prototype.dataToCoord=function(t,e){var a=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(a=a.slice(),sr(a,n.count())),Ue(t,or,a,e)},r.prototype.coordToData=function(t,e){var a=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(a=a.slice(),sr(a,n.count()));var i=Ue(t,a,or,e);return this.scale.scale(i)},r.prototype.pointToData=function(t,e){},r.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),a=io(this,e),n=a.ticks,i=G(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=e.get("alignWithLabel");return fo(this,i,o,t.clamp),i},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var a=this.scale.getMinorTicks(e),n=G(a,function(i){return G(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},r.prototype.getViewLabels=function(){return no(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),a=e[1]-e[0]+(this.onBand?1:0);a===0&&(a=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/a},r.prototype.calculateCategoryInterval=function(){return co(this)},r}();function sr(r,t){var e=r[1]-r[0],a=t,n=e/a/2;r[0]+=n,r[1]-=n}function fo(r,t,e,a){var n=t.length;if(!r.onBand||e||!n)return;var i=r.getExtent(),o,s;if(n===1)t[0].coord=i[0],o=t[1]={coord:i[1]};else{var l=t[n-1].tickValue-t[0].tickValue,u=(t[n-1].coord-t[0].coord)/l;A(t,function(h){h.coord-=u/2});var c=r.scale.getExtent();s=1+c[1]-t[n-1].tickValue,o={coord:t[n-1].coord+u*s},t.push(o)}var v=i[0]>i[1];f(t[0].coord,i[0])&&(a?t[0].coord=i[0]:t.shift()),a&&f(i[0],t[0].coord)&&t.unshift({coord:i[0]}),f(i[1],o.coord)&&(a?o.coord=i[1]:t.pop()),a&&f(o.coord,i[1])&&t.push({coord:i[1]});function f(h,d){return h=F(h),d=F(d),v?h>d:h<d}}function go(r){for(var t=[],e=0;e<r.length;e++){var a=r[e];if(!a.defaultAttr.ignore){var n=a.label,i=n.getComputedTransform(),o=n.getBoundingRect(),s=!i||i[1]<1e-5&&i[2]<1e-5,l=n.style.margin||0,u=o.clone();u.applyTransform(i),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new me(o,i):null;t.push({label:n,labelLine:a.labelLine,rect:u,localRect:o,obb:c,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:s,transform:i})}}return t}function Ta(r,t,e,a,n,i){var o=r.length;if(o<2)return;r.sort(function(I,P){return I.rect[t]-P.rect[t]});for(var s=0,l,u=!1,c=0,v=0;v<o;v++){var f=r[v],h=f.rect;l=h[t]-s,l<0&&(h[t]-=l,f.label[t]-=l,u=!0);var d=Math.max(-l,0);c+=d,s=h[t]+h[e]}c>0&&i&&M(-c/o,0,o);var g=r[0],p=r[o-1],m,y;x(),m<0&&L(-m,.8),y<0&&L(y,.8),x(),_(m,y,1),_(y,m,-1),x(),m<0&&D(-m),y<0&&D(y);function x(){m=g.rect[t]-a,y=n-p.rect[t]-p.rect[e]}function _(I,P,w){if(I<0){var b=Math.min(P,-I);if(b>0){M(b*w,0,o);var C=b+I;C<0&&L(-C*w,1)}else L(-I*w,1)}}function M(I,P,w){I!==0&&(u=!0);for(var b=P;b<w;b++){var C=r[b],S=C.rect;S[t]+=I,C.label[t]+=I}}function L(I,P){for(var w=[],b=0,C=1;C<o;C++){var S=r[C-1].rect,E=Math.max(r[C].rect[t]-S[t]-S[e],0);w.push(E),b+=E}if(b){var T=Math.min(Math.abs(I)/b,P);if(I>0)for(var C=0;C<o-1;C++){var B=w[C]*T;M(B,0,C+1)}else for(var C=o-1;C>0;C--){var B=w[C-1]*T;M(-B,C,o)}}}function D(I){var P=I<0?-1:1;I=Math.abs(I);for(var w=Math.ceil(I/(o-1)),b=0;b<o-1;b++)if(P>0?M(w,0,b+1):M(-w,o-b-1,o),I-=w,I<=0)return}return u}function $s(r,t,e,a){return Ta(r,"x","width",t,e,a)}function Ks(r,t,e,a){return Ta(r,"y","height",t,e,a)}function po(r){var t=[];r.sort(function(g,p){return p.priority-g.priority});var e=new Ht(0,0,0,0);function a(g){if(!g.ignore){var p=g.ensureState("emphasis");p.ignore==null&&(p.ignore=!1)}g.ignore=!0}for(var n=0;n<r.length;n++){var i=r[n],o=i.axisAligned,s=i.localRect,l=i.transform,u=i.label,c=i.labelLine;e.copy(i.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var v=i.obb,f=!1,h=0;h<t.length;h++){var d=t[h];if(e.intersect(d.rect)){if(o&&d.axisAligned){f=!0;break}if(d.obb||(d.obb=new me(d.localRect,d.transform)),v||(v=new me(s,l)),v.intersect(d.obb)){f=!0;break}}}f?(a(u),c&&a(c)):(u.attr("ignore",i.defaultAttr.ignore),c&&c.attr("ignore",i.defaultAttr.labelGuideIgnore),t.push(i))}}var mo=function(r){R(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Te),_e=function(r){R(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",rt).models[0]},t.type="cartesian2dAxis",t}(Te);bn(_e,ao);var Pa={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},yo=st({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Pa),Ve=st({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Pa),xo=st({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Ve),_o=q({logBase:10},Ve);const bo={category:yo,value:Ve,time:xo,log:_o};var Ao={value:1,category:1,time:1,log:1};function lr(r,t,e,a){A(Ao,function(n,i){var o=st(st({},bo[i],!0),a,!0),s=function(l){R(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+i,c}return u.prototype.mergeDefaultAndTheme=function(c,v){var f=An(this),h=f?Sn(c):{},d=v.getTheme();st(c,d.get(i+"Axis")),st(c,this.getDefaultOption()),c.type=ur(c),f&&Mn(c,h,f)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=ye.createByAxisModel(this))},u.prototype.getCategories=function(c){var v=this.option;if(v.type==="category")return c?v.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+i,u.defaultOption=o,u}(e);r.registerComponentModel(s)}),r.registerSubTypeDefaulter(t+"Axis",ur)}function ur(r){return r.type||(r.data?"category":"value")}var So=function(){function r(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return r.prototype.getAxis=function(t){return this._axes[t]},r.prototype.getAxes=function(){return G(this._dimList,function(t){return this._axes[t]},this)},r.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),de(this.getAxes(),function(e){return e.scale.type===t})},r.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},r}(),be=["x","y"];function cr(r){return r.type==="interval"||r.type==="time"}var Mo=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=be,e}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!cr(e)||!cr(a))){var n=e.getExtent(),i=a.getExtent(),o=this.dataToPoint([n[0],i[0]]),s=this.dataToPoint([n[1],i[1]]),l=n[1]-n[0],u=i[1]-i[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,v=(s[1]-o[1])/u,f=o[0]-n[0]*c,h=o[1]-i[0]*v,d=this._transform=[c,0,0,v,f,h];this._invTransform=Dn([],d)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var a=this.getAxis("x"),n=this.getAxis("y");return a.contain(a.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,a){var n=this.dataToPoint(e),i=this.dataToPoint(a),o=this.getArea(),s=new Ht(n[0],n[1],i[0]-n[0],i[1]-n[1]);return o.intersect(s)},t.prototype.dataToPoint=function(e,a,n){n=n||[];var i=e[0],o=e[1];if(this._transform&&i!=null&&isFinite(i)&&o!=null&&isFinite(o))return ct(n,e,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return n[0]=s.toGlobalCoord(s.dataToCoord(i,a)),n[1]=l.toGlobalCoord(l.dataToCoord(o,a)),n},t.prototype.clampData=function(e,a){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),s=i.getExtent(),l=n.parse(e[0]),u=i.parse(e[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),a[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),a},t.prototype.pointToData=function(e,a){var n=[];if(this._invTransform)return ct(n,e,this._invTransform);var i=this.getAxis("x"),o=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(e[0]),a),n[1]=o.coordToData(o.toLocalCoord(e[1]),a),n},t.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},t.prototype.getArea=function(e){e=e||0;var a=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(a[0],a[1])-e,o=Math.min(n[0],n[1])-e,s=Math.max(a[0],a[1])-i+e,l=Math.max(n[0],n[1])-o+e;return new Ht(i,o,s,l)},t}(So),Do=function(r){R(t,r);function t(e,a,n,i,o){var s=r.call(this,e,a,n)||this;return s.index=0,s.type=i||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},t.prototype.getGlobalExtent=function(e){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),e&&a[0]>a[1]&&a.reverse(),a},t.prototype.pointToData=function(e,a){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),a)},t.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(ho);function Ae(r,t,e){e=e||{};var a=r.coordinateSystem,n=t.axis,i={},o=n.getAxesOnZeroOf()[0],s=n.position,l=o?"onZero":s,u=n.dim,c=a.getRect(),v=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=t.get("offset")||0,d=u==="x"?[v[2]-h,v[3]+h]:[v[0]-h,v[1]+h];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));d[f.onZero]=Math.max(Math.min(g,d[1]),d[0])}i.position=[u==="y"?d[f[l]]:v[0],u==="x"?d[f[l]]:v[3]],i.rotation=Math.PI/2*(u==="x"?0:1);var p={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=p[s],i.labelOffset=o?d[f[s]]-d[f.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Mt(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var m=t.get(["axisLabel","rotate"]);return i.labelRotate=l==="top"?-m:m,i.z2=1,i}function vr(r){return r.get("coordinateSystem")==="cartesian2d"}function hr(r){var t={xAxisModel:null,yAxisModel:null};return A(t,function(e,a){var n=a.replace(/Model$/,""),i=r.getReferringComponents(n,rt).models[0];t[a]=i}),t}var oe=Math.log;function wo(r,t,e){var a=ft.prototype,n=a.getTicks.call(e),i=a.getTicks.call(e,!0),o=n.length-1,s=a.getInterval.call(e),l=xa(r,t),u=l.extent,c=l.fixMin,v=l.fixMax;if(r.type==="log"){var f=oe(r.base);u=[oe(u[0])/f,oe(u[1])/f]}r.setExtent(u[0],u[1]),r.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:v});var h=a.getExtent.call(r);c&&(u[0]=h[0]),v&&(u[1]=h[1]);var d=a.getInterval.call(r),g=u[0],p=u[1];if(c&&v)d=(p-g)/o;else if(c)for(p=u[0]+d*o;p<u[1]&&isFinite(p)&&isFinite(u[1]);)d=ne(d),p=u[0]+d*o;else if(v)for(g=u[1]-d*o;g>u[0]&&isFinite(g)&&isFinite(u[0]);)d=ne(d),g=u[1]-d*o;else{var m=r.getTicks().length-1;m>o&&(d=ne(d));var y=d*o;p=Math.ceil(u[1]/d)*d,g=F(p-y),g<0&&u[0]>=0?(g=0,p=F(y)):p>0&&u[1]<=0&&(p=0,g=-F(y))}var x=(n[0].value-i[0].value)/s,_=(n[o].value-i[o].value)/s;a.setExtent.call(r,g+d*x,p+d*_),a.setInterval.call(r,d),(x||_)&&a.setNiceExtent.call(r,g+d,p-d)}var Co=function(){function r(t,e,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=be,this._initCartesian(t,e,a),this.model=t}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(t,e){var a=this._axesMap;this._updateScale(t,this.model);function n(o){var s,l=Kt(o),u=l.length;if(u){for(var c=[],v=u-1;v>=0;v--){var f=+l[v],h=o[f],d=h.model,g=h.scale;xe(g)&&d.get("alignTicks")&&d.get("interval")==null?c.push(h):(ir(g,d),xe(g)&&(s=h))}c.length&&(s||(s=c.pop(),ir(s.scale,s.model)),A(c,function(p){wo(p.scale,p.model,s.scale)}))}}n(a.x),n(a.y);var i={};A(a.x,function(o){fr(a,"y",o,i)}),A(a.y,function(o){fr(a,"x",o,i)}),this.resize(this.model,e)},r.prototype.resize=function(t,e,a){var n=t.getBoxLayoutParams(),i=!a&&t.get("containLabel"),o=wn(n,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var s=this._axesList;l(),i&&(A(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=eo(u);if(c){var v=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);o[v]-=c[v]+f,u.position==="top"?o.y+=c.height+f:u.position==="left"&&(o.x+=c.width+f)}}}),l()),A(this._coordsList,function(u){u.calcAffineTransform()});function l(){A(s,function(u){var c=u.isHorizontal(),v=c?[0,o.width]:[0,o.height],f=u.inverse?1:0;u.setExtent(v[f],v[1-f]),Lo(u,c?o.x:o.y)})}},r.prototype.getAxis=function(t,e){var a=this._axesMap[t];if(a!=null)return a[e||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(t,e){if(t!=null&&e!=null){var a="x"+t+"y"+e;return this._coordsMap[a]}K(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,i=this._coordsList;n<i.length;n++)if(i[n].getAxis("x").index===t||i[n].getAxis("y").index===e)return i[n]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(t,e,a){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.dataToPoint(a):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(a)):null},r.prototype.convertFromPixel=function(t,e,a){var n=this._findConvertTarget(e);return n.cartesian?n.cartesian.pointToData(a):n.axis?n.axis.coordToData(n.axis.toLocalCoord(a)):null},r.prototype._findConvertTarget=function(t){var e=t.seriesModel,a=t.xAxisModel||e&&e.getReferringComponents("xAxis",rt).models[0],n=t.yAxisModel||e&&e.getReferringComponents("yAxis",rt).models[0],i=t.gridModel,o=this._coordsList,s,l;if(e)s=e.coordinateSystem,Vt(o,s)<0&&(s=null);else if(a&&n)s=this.getCartesian(a.componentIndex,n.componentIndex);else if(a)l=this.getAxis("x",a.componentIndex);else if(n)l=this.getAxis("y",n.componentIndex);else if(i){var u=i.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},r.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},r.prototype._initCartesian=function(t,e,a){var n=this,i=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(e.eachComponent("xAxis",u("x"),this),e.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,A(s.x,function(c,v){A(s.y,function(f,h){var d="x"+v+"y"+h,g=new Mo(d);g.master=n,g.model=t,n._coordsMap[d]=g,n._coordsList.push(g),g.addAxis(c),g.addAxis(f)})});function u(c){return function(v,f){if(se(v,t)){var h=v.get("position");c==="x"?h!=="top"&&h!=="bottom"&&(h=o.bottom?"top":"bottom"):h!=="left"&&h!=="right"&&(h=o.left?"right":"left"),o[h]=!0;var d=new Do(c,Qi(v),[0,0],v.get("type"),h),g=d.type==="category";d.onBand=g&&v.get("boundaryGap"),d.inverse=v.get("inverse"),v.axis=d,d.model=v,d.grid=i,d.index=f,i._axesList.push(d),s[c][f]=d,l[c]++}}}},r.prototype._updateScale=function(t,e){A(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var i=n.model.get("categorySortInfo");n.scale.setSortInfo(i)}}),t.eachSeries(function(n){if(vr(n)){var i=hr(n),o=i.xAxisModel,s=i.yAxisModel;if(!se(o,e)||!se(s,e))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=n.getData(),c=l.getAxis("x"),v=l.getAxis("y");a(u,c),a(u,v)}},this);function a(n,i){A(Aa(n,i.dim),function(o){i.scale.unionExtentFromData(n,o)})}},r.prototype.getTooltipAxes=function(t){var e=[],a=[];return A(this.getCartesians(),function(n){var i=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),o=n.getOtherAxis(i);Vt(e,i)<0&&e.push(i),Vt(a,o)<0&&a.push(o)}),{baseAxes:e,otherAxes:a}},r.create=function(t,e){var a=[];return t.eachComponent("grid",function(n,i){var o=new r(n,t,e);o.name="grid_"+i,o.resize(n,e,!0),n.coordinateSystem=o,a.push(o)}),t.eachSeries(function(n){if(vr(n)){var i=hr(n),o=i.xAxisModel,s=i.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;n.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),a},r.dimensions=be,r}();function se(r,t){return r.getCoordSysModel()===t}function fr(r,t,e,a){e.getAxesOnZeroOf=function(){return i?[i]:[]};var n=r[t],i,o=e.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)dr(n[l])&&(i=n[l]);else for(var u in n)if(n.hasOwnProperty(u)&&dr(n[u])&&!a[c(n[u])]){i=n[u];break}i&&(a[c(i)]=!0);function c(v){return v.dim+"_"+v.index}}function dr(r){return r&&r.type!=="category"&&r.type!=="time"&&to(r)}function Lo(r,t){var e=r.getExtent(),a=e[0]+e[1];r.toGlobalCoord=r.dim==="x"?function(n){return n+t}:function(n){return a-n+t},r.toLocalCoord=r.dim==="x"?function(n){return n-t}:function(n){return a-n+t}}var at=Math.PI,nt=function(){function r(t,e){this.group=new Dt,this.opt=e,this.axisModel=t,q(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var a=new Dt({x:e.position[0],y:e.position[1],rotation:e.rotation});a.updateTransform(),this._transformGroup=a}return r.prototype.hasBuilder=function(t){return!!gr[t]},r.prototype.add=function(t){gr[t](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(t,e,a){var n=ta(e-t),i,o;return Xt(n)?(o=a>0?"top":"bottom",i="center"):Xt(n-at)?(o=a>0?"bottom":"top",i="center"):(o="middle",n>0&&n<at?i=a>0?"right":"left":i=a>0?"left":"right"),{rotation:n,textAlign:i,textVerticalAlign:o}},r.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},r.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},r}(),gr={axisLine:function(r,t,e,a){var n=t.get(["axisLine","show"]);if(n==="auto"&&r.handleAutoShown&&(n=r.handleAutoShown("axisLine")),!!n){var i=t.axis.getExtent(),o=a.transform,s=[i[0],0],l=[i[1],0],u=s[0]>l[0];o&&(ct(s,s,o),ct(l,l,o));var c=H({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),v=new Zt({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});Yt(v.shape,v.style.lineWidth),v.anid="line",e.add(v);var f=t.get(["axisLine","symbol"]);if(f!=null){var h=t.get(["axisLine","symbolSize"]);X(f)&&(f=[f,f]),(X(h)||$t(h))&&(h=[h,h]);var d=Cn(t.get(["axisLine","symbolOffset"])||0,h),g=h[0],p=h[1];A([{rotate:r.rotation+Math.PI/2,offset:d[0],r:0},{rotate:r.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,y){if(f[y]!=="none"&&f[y]!=null){var x=Ln(f[y],-g/2,-p/2,g,p,c.stroke,!0),_=m.r+m.offset,M=u?l:s;x.attr({rotation:m.rotate,x:M[0]+_*Math.cos(r.rotation),y:M[1]-_*Math.sin(r.rotation),silent:!0,z2:11}),e.add(x)}})}}},axisTickLabel:function(r,t,e,a){var n=Po(e,a,t,r),i=Eo(e,a,t,r);if(To(t,i,n),Oo(e,a,t,r.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=go(G(i,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));po(o)}},axisName:function(r,t,e,a){var n=Mt(r.axisName,t.get("name"));if(n){var i=t.get("nameLocation"),o=r.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,v=[i==="start"?u[0]-c*l:i==="end"?u[1]+c*l:(u[0]+u[1])/2,mr(i)?r.labelOffset+o*l:0],f,h=t.get("nameRotate");h!=null&&(h=h*at/180);var d;mr(i)?f=nt.innerTextLayout(r.rotation,h??r.rotation,o):(f=Io(r.rotation,i,h||0,u),d=r.axisNameAvailableWidth,d!=null&&(d=Math.abs(d/Math.sin(f.rotation)),!isFinite(d)&&(d=null)));var g=s.getFont(),p=t.get("nameTruncate",!0)||{},m=p.ellipsis,y=Mt(r.nameTruncateMaxWidth,p.maxWidth,d),x=new Pe({x:v[0],y:v[1],rotation:f.rotation,silent:nt.isLabelSilent(t),style:Oe(s,{text:n,font:g,overflow:"truncate",width:y,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||f.textAlign,verticalAlign:s.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(In({el:x,componentModel:t,itemName:n}),x.__fullText=n,x.anid="name",t.get("triggerEvent")){var _=nt.makeAxisEventDataBase(t);_.targetType="axisName",_.name=n,Lt(x).eventData=_}a.add(x),x.updateTransform(),e.add(x),x.decomposeTransform()}}};function Io(r,t,e,a){var n=ta(e-r),i,o,s=a[0]>a[1],l=t==="start"&&!s||t!=="start"&&s;return Xt(n-at/2)?(o=l?"bottom":"top",i="center"):Xt(n-at*1.5)?(o=l?"top":"bottom",i="center"):(o="middle",n<at*1.5&&n>at/2?i=l?"left":"right":i=l?"right":"left"),{rotation:n,textAlign:i,textVerticalAlign:o}}function To(r,t,e){if(!ba(r.axis)){var a=r.get(["axisLabel","showMinLabel"]),n=r.get(["axisLabel","showMaxLabel"]);t=t||[],e=e||[];var i=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=e[0],c=e[1],v=e[e.length-1],f=e[e.length-2];a===!1?(Y(i),Y(u)):pr(i,o)&&(a?(Y(o),Y(c)):(Y(i),Y(u))),n===!1?(Y(s),Y(v)):pr(l,s)&&(n?(Y(l),Y(f)):(Y(s),Y(v)))}}function Y(r){r&&(r.ignore=!0)}function pr(r,t){var e=r&&r.getBoundingRect().clone(),a=t&&t.getBoundingRect().clone();if(!(!e||!a)){var n=Tn([]);return Qr(n,n,-r.rotation),e.applyTransform($e([],n,r.getLocalTransform())),a.applyTransform($e([],n,t.getLocalTransform())),e.intersect(a)}}function mr(r){return r==="middle"||r==="center"}function Oa(r,t,e,a,n){for(var i=[],o=[],s=[],l=0;l<r.length;l++){var u=r[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=e,t&&(ct(o,o,t),ct(s,s,t));var c=new Zt({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:a,z2:2,autoBatch:!0,silent:!0});Yt(c.shape,c.style.lineWidth),c.anid=n+"_"+r[l].tickValue,i.push(c)}return i}function Po(r,t,e,a){var n=e.axis,i=e.getModel("axisTick"),o=i.get("show");if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisTick")),!(!o||n.scale.isBlank())){for(var s=i.getModel("lineStyle"),l=a.tickDirection*i.get("length"),u=n.getTicksCoords(),c=Oa(u,t.transform,l,q(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),v=0;v<c.length;v++)r.add(c[v]);return c}}function Oo(r,t,e,a){var n=e.axis,i=e.getModel("minorTick");if(!(!i.get("show")||n.scale.isBlank())){var o=n.getMinorTicksCoords();if(o.length)for(var s=i.getModel("lineStyle"),l=a*i.get("length"),u=q(s.getLineStyle(),q(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var v=Oa(o[c],t.transform,l,u,"minorticks_"+c),f=0;f<v.length;f++)r.add(v[f])}}function Eo(r,t,e,a){var n=e.axis,i=Mt(a.axisLabelShow,e.get(["axisLabel","show"]));if(!(!i||n.scale.isBlank())){var o=e.getModel("axisLabel"),s=o.get("margin"),l=n.getViewLabels(),u=(Mt(a.labelRotate,o.get("rotate"))||0)*at/180,c=nt.innerTextLayout(a.rotation,u,a.labelDirection),v=e.getCategories&&e.getCategories(!0),f=[],h=nt.isLabelSilent(e),d=e.get("triggerEvent");return A(l,function(g,p){var m=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(g.tickValue):g.tickValue,y=g.formattedLabel,x=g.rawLabel,_=o;if(v&&v[m]){var M=v[m];K(M)&&M.textStyle&&(_=new we(M.textStyle,o,e.ecModel))}var L=_.getTextColor()||e.get(["axisLine","lineStyle","color"]),D=n.dataToCoord(m),I=_.getShallow("align",!0)||c.textAlign,P=_t(_.getShallow("alignMinLabel",!0),I),w=_t(_.getShallow("alignMaxLabel",!0),I),b=_.getShallow("verticalAlign",!0)||_.getShallow("baseline",!0)||c.textVerticalAlign,C=_t(_.getShallow("verticalAlignMinLabel",!0),b),S=_t(_.getShallow("verticalAlignMaxLabel",!0),b),E=new Pe({x:D,y:a.labelOffset+a.labelDirection*s,rotation:c.rotation,silent:h,z2:10+(g.level||0),style:Oe(_,{text:y,align:p===0?P:p===l.length-1?w:I,verticalAlign:p===0?C:p===l.length-1?S:b,fill:Z(L)?L(n.type==="category"?x:n.type==="value"?m+"":m,p):L})});if(E.anid="label_"+m,d){var T=nt.makeAxisEventDataBase(e);T.targetType="axisLabel",T.value=x,T.tickIndex=p,n.type==="category"&&(T.dataIndex=m),Lt(E).eventData=T}t.add(E),E.updateTransform(),f.push(E),r.add(E),E.decomposeTransform()}),f}}function ko(r,t){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return No(e,r,t),e.seriesInvolved&&Bo(e,r),e}function No(r,t,e){var a=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),i=n.get("link",!0)||[],o=[];A(e.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Ct(s.model),u=r.coordSysAxesInfo[l]={};r.coordSysMap[l]=s;var c=s.model,v=c.getModel("tooltip",a);if(A(s.getAxes(),j(g,!1,null)),s.getTooltipAxes&&a&&v.get("show")){var f=v.get("trigger")==="axis",h=v.get(["axisPointer","type"])==="cross",d=s.getTooltipAxes(v.get(["axisPointer","axis"]));(f||h)&&A(d.baseAxes,j(g,h?"cross":!0,f)),h&&A(d.otherAxes,j(g,"cross",!1))}function g(p,m,y){var x=y.model.getModel("axisPointer",n),_=x.get("show");if(!(!_||_==="auto"&&!p&&!Se(x))){m==null&&(m=x.get("triggerTooltip")),x=p?Ro(y,v,n,t,p,m):x;var M=x.get("snap"),L=x.get("triggerEmphasis"),D=Ct(y.model),I=m||M||y.type==="category",P=r.axesInfo[D]={key:D,axis:y,coordSys:s,axisPointerModel:x,triggerTooltip:m,triggerEmphasis:L,involveSeries:I,snap:M,useHandle:Se(x),seriesModels:[],linkGroup:null};u[D]=P,r.seriesInvolved=r.seriesInvolved||I;var w=Go(i,y);if(w!=null){var b=o[w]||(o[w]={axesInfo:{}});b.axesInfo[D]=P,b.mapper=i[w].mapper,P.linkGroup=b}}}})}function Ro(r,t,e,a,n,i){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};A(s,function(f){l[f]=Ce(o.get(f))}),l.snap=r.type!=="category"&&!!i,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),n==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!i){var v=l.lineStyle=o.get("crossStyle");v&&q(u,v.textStyle)}}return r.model.getModel("axisPointer",new we(l,e,a))}function Bo(r,t){t.eachSeries(function(e){var a=e.coordinateSystem,n=e.get(["tooltip","trigger"],!0),i=e.get(["tooltip","show"],!0);!a||n==="none"||n===!1||n==="item"||i===!1||e.get(["axisPointer","show"],!0)===!1||A(r.coordSysAxesInfo[Ct(a.model)],function(o){var s=o.axis;a.getAxis(s.dim)===s&&(o.seriesModels.push(e),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=e.getData().count())})})}function Go(r,t){for(var e=t.model,a=t.dim,n=0;n<r.length;n++){var i=r[n]||{};if(le(i[a+"AxisId"],e.id)||le(i[a+"AxisIndex"],e.componentIndex)||le(i[a+"AxisName"],e.name))return n}}function le(r,t){return r==="all"||V(r)&&Vt(r,t)>=0||r===t}function Fo(r){var t=We(r);if(t){var e=t.axisPointerModel,a=t.axis.scale,n=e.option,i=e.get("status"),o=e.get("value");o!=null&&(o=a.parse(o));var s=Se(e);i==null&&(n.status=s?"show":"hide");var l=a.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),n.value=o,s&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function We(r){var t=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ct(r)]}function Vo(r){var t=We(r);return t&&t.axisPointerModel}function Se(r){return!!r.get(["handle","show"])}function Ct(r){return r.type+"||"+r.id}var yr={},Ea=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n,i){this.axisPointerClass&&Fo(e),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,n,!0)},t.prototype.updateAxisPointer=function(e,a,n,i){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,a){var n=this._axisPointer;n&&n.remove(a)},t.prototype.dispose=function(e,a){this._disposeAxisPointer(a),r.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,a,n){var i=t.getAxisPointerClass(this.axisPointerClass);if(i){var o=Vo(e);o?(this._axisPointer||(this._axisPointer=new i)).render(e,o,a,n):this._disposeAxisPointer(a)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,a){yr[e]=a},t.getAxisPointerClass=function(e){return e&&yr[e]},t.type="axis",t}(Ee),Me=ht();function Wo(r,t,e,a){var n=e.axis;if(!n.scale.isBlank()){var i=e.getModel("splitArea"),o=i.getModel("areaStyle"),s=o.get("color"),l=a.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:i,clamp:!0});if(u.length){var c=s.length,v=Me(r).splitAreaColors,f=J(),h=0;if(v)for(var d=0;d<u.length;d++){var g=v.get(u[d].tickValue);if(g!=null){h=(g+(c-1)*d)%c;break}}var p=n.toGlobalCoord(u[0].coord),m=o.getAreaStyle();s=V(s)?s:[s];for(var d=1;d<u.length;d++){var y=n.toGlobalCoord(u[d].coord),x=void 0,_=void 0,M=void 0,L=void 0;n.isHorizontal()?(x=p,_=l.y,M=y-x,L=l.height,p=x+M):(x=l.x,_=p,M=l.width,L=y-_,p=_+L);var D=u[d-1].tickValue;D!=null&&f.set(D,h),t.add(new It({anid:D!=null?"area_"+D:null,shape:{x,y:_,width:M,height:L},style:q({fill:s[h]},m),autoBatch:!0,silent:!0})),h=(h+1)%c}Me(r).splitAreaColors=f}}}function zo(r){Me(r).splitAreaColors=null}var Ho=["axisLine","axisTickLabel","axisName"],Zo=["splitArea","splitLine","minorSplitLine"],ka=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return t.prototype.render=function(e,a,n,i){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Dt,this.group.add(this._axisGroup),!!e.get("show")){var s=e.getCoordSysModel(),l=Ae(s,e),u=new nt(e,H({handleAutoShown:function(v){for(var f=s.coordinateSystem.getCartesians(),h=0;h<f.length;h++)if(xe(f[h].getOtherAxis(e.axis).scale))return!0;return!1}},l));A(Ho,u.add,u),this._axisGroup.add(u.getGroup()),A(Zo,function(v){e.get([v,"show"])&&Yo[v](this,this._axisGroup,e,s)},this);var c=i&&i.type==="changeAxisOrder"&&i.isInitSort;c||Pn(o,this._axisGroup,e),r.prototype.render.call(this,e,a,n,i)}},t.prototype.remove=function(){zo(this)},t.type="cartesianAxis",t}(Ea),Yo={splitLine:function(r,t,e,a){var n=e.axis;if(!n.scale.isBlank()){var i=e.getModel("splitLine"),o=i.getModel("lineStyle"),s=o.get("color");s=V(s)?s:[s];for(var l=a.coordinateSystem.getRect(),u=n.isHorizontal(),c=0,v=n.getTicksCoords({tickModel:i}),f=[],h=[],d=o.getLineStyle(),g=0;g<v.length;g++){var p=n.toGlobalCoord(v[g].coord);u?(f[0]=p,f[1]=l.y,h[0]=p,h[1]=l.y+l.height):(f[0]=l.x,f[1]=p,h[0]=l.x+l.width,h[1]=p);var m=c++%s.length,y=v[g].tickValue,x=new Zt({anid:y!=null?"line_"+v[g].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:h[0],y2:h[1]},style:q({stroke:s[m]},d),silent:!0});Yt(x.shape,d.lineWidth),t.add(x)}}},minorSplitLine:function(r,t,e,a){var n=e.axis,i=e.getModel("minorSplitLine"),o=i.getModel("lineStyle"),s=a.coordinateSystem.getRect(),l=n.isHorizontal(),u=n.getMinorTicksCoords();if(u.length)for(var c=[],v=[],f=o.getLineStyle(),h=0;h<u.length;h++)for(var d=0;d<u[h].length;d++){var g=n.toGlobalCoord(u[h][d].coord);l?(c[0]=g,c[1]=s.y,v[0]=g,v[1]=s.y+s.height):(c[0]=s.x,c[1]=g,v[0]=s.x+s.width,v[1]=g);var p=new Zt({anid:"minor_line_"+u[h][d].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:v[0],y2:v[1]},style:f,silent:!0});Yt(p.shape,f.lineWidth),t.add(p)}},splitArea:function(r,t,e,a){Wo(r,t,e,a)}},Na=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="xAxis",t}(ka),Xo=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=Na.type,e}return t.type="yAxis",t}(ka),Uo=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="grid",e}return t.prototype.render=function(e,a){this.group.removeAll(),e.get("show")&&this.group.add(new It({shape:e.coordinateSystem.getRect(),style:q({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Ee),xr={offset:0};function $o(r){r.registerComponentView(Uo),r.registerComponentModel(mo),r.registerCoordinateSystem("cartesian2d",Co),lr(r,"x",_e,xr),lr(r,"y",_e,xr),r.registerComponentView(Na),r.registerComponentView(Xo),r.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}var ot=ht(),_r=Ce,ue=ut,Ko=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(t,e,a,n){var i=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=a,!(!n&&this._lastValue===i&&this._lastStatus===o)){this._lastValue=i,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,i,t,e,a);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=c;var v=this._moveAnimation=this.determineAnimation(t,e);if(!s)s=this._group=new Dt,this.createPointerEl(s,u,t,e),this.createLabelEl(s,u,t,e),a.getZr().add(s);else{var f=j(br,e,v);this.updatePointerEl(s,u,f),this.updateLabelEl(s,u,f,e)}Sr(s,e,!0),this._renderHandle(i)}},r.prototype.remove=function(t){this.clear(t)},r.prototype.dispose=function(t){this.clear(t)},r.prototype.determineAnimation=function(t,e){var a=e.get("animation"),n=t.axis,i=n.type==="category",o=e.get("snap");if(!o&&!i)return!1;if(a==="auto"||a==null){var s=this.animationThreshold;if(i&&n.getBandWidth()>s)return!0;if(o){var l=We(t).seriesDataCount,u=n.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return a===!0},r.prototype.makeElOption=function(t,e,a,n,i){},r.prototype.createPointerEl=function(t,e,a,n){var i=e.pointer;if(i){var o=ot(t).pointerEl=new On[i.type](_r(e.pointer));t.add(o)}},r.prototype.createLabelEl=function(t,e,a,n){if(e.label){var i=ot(t).labelEl=new Pe(_r(e.label));t.add(i),Ar(i,n)}},r.prototype.updatePointerEl=function(t,e,a){var n=ot(t).pointerEl;n&&e.pointer&&(n.setStyle(e.pointer.style),a(n,{shape:e.pointer.shape}))},r.prototype.updateLabelEl=function(t,e,a,n){var i=ot(t).labelEl;i&&(i.setStyle(e.label.style),a(i,{x:e.label.x,y:e.label.y}),Ar(i,n))},r.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,a=this._api.getZr(),n=this._handle,i=e.getModel("handle"),o=e.get("status");if(!i.get("show")||!o||o==="hide"){n&&a.remove(n),this._handle=null;return}var s;this._handle||(s=!0,n=this._handle=En(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){kn(u.event)},onmousedown:ue(this._onHandleDragMove,this,0,0),drift:ue(this._onHandleDragMove,this),ondragend:ue(this._onHandleDragEnd,this)}),a.add(n)),Sr(n,e,!1),n.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");V(l)||(l=[l,l]),n.scaleX=l[0]/2,n.scaleY=l[1]/2,Nn(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},r.prototype._moveHandleToValue=function(t,e){br(this._axisPointerModel,!e&&this._moveAnimation,this._handle,ce(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(t,e){var a=this._handle;if(a){this._dragging=!0;var n=this.updateHandleTransform(ce(a),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=n,a.stopAnimation(),a.attr(ce(n)),ot(a).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),a=this._group,n=this._handle;e&&a&&(this._lastGraphicKey=null,a&&e.remove(a),n&&e.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),Rn(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(t,e,a){return a=a||0,{x:t[a],y:t[1-a],width:e[a],height:e[1-a]}},r}();function br(r,t,e,a){Ra(ot(e).lastProp,a)||(ot(e).lastProp=a,t?vt(e,a,r):(e.stopAnimation(),e.attr(a)))}function Ra(r,t){if(K(r)&&K(t)){var e=!0;return A(t,function(a,n){e=e&&Ra(r[n],a)}),!!e}else return r===t}function Ar(r,t){r[t.get(["label","show"])?"show":"hide"]()}function ce(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function Sr(r,t,e){var a=t.get("z"),n=t.get("zlevel");r&&r.traverse(function(i){i.type!=="group"&&(a!=null&&(i.z=a),n!=null&&(i.zlevel=n),i.silent=e)})}function qo(r){var t=r.get("type"),e=r.getModel(t+"Style"),a;return t==="line"?(a=e.getLineStyle(),a.fill=null):t==="shadow"&&(a=e.getAreaStyle(),a.stroke=null),a}function jo(r,t,e,a,n){var i=e.get("value"),o=Qo(i,t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=Fn(s.get("padding")||0),u=s.getFont(),c=Jr(o,u),v=n.position,f=c.width+l[1]+l[3],h=c.height+l[0]+l[2],d=n.align;d==="right"&&(v[0]-=f),d==="center"&&(v[0]-=f/2);var g=n.verticalAlign;g==="bottom"&&(v[1]-=h),g==="middle"&&(v[1]-=h/2),Jo(v,f,h,a);var p=s.get("backgroundColor");(!p||p==="auto")&&(p=t.get(["axisLine","lineStyle","color"])),r.label={x:v[0],y:v[1],style:Oe(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:p}),z2:10}}function Jo(r,t,e,a){var n=a.getWidth(),i=a.getHeight();r[0]=Math.min(r[0]+t,n)-t,r[1]=Math.min(r[1]+e,i)-e,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function Qo(r,t,e,a,n){r=t.scale.parse(r);var i=t.scale.getLabel({value:r},{precision:n.precision}),o=n.formatter;if(o){var s={value:_a(t,{value:r}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};A(a,function(l){var u=e.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,v=u&&u.getDataParams(c);v&&s.seriesData.push(v)}),X(o)?i=o.replace("{value}",i):Z(o)&&(i=o(s))}return i}function Ba(r,t,e){var a=Vn();return Qr(a,a,e.rotation),Bn(a,a,e.position),Gn([r.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],a)}function ts(r,t,e,a,n,i){var o=nt.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=n.get(["label","margin"]),jo(t,a,n,i,{position:Ba(a.axis,r,e),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function es(r,t,e){return e=e||0,{x1:r[e],y1:r[1-e],x2:t[e],y2:t[1-e]}}function rs(r,t,e){return e=e||0,{x:r[e],y:r[1-e],width:t[e],height:t[1-e]}}var as=function(r){R(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.makeElOption=function(e,a,n,i,o){var s=n.axis,l=s.grid,u=i.get("type"),c=Mr(l,s).getOtherAxis(s).getGlobalExtent(),v=s.toGlobalCoord(s.dataToCoord(a,!0));if(u&&u!=="none"){var f=qo(i),h=ns[u](s,v,c);h.style=f,e.graphicKey=h.type,e.pointer=h}var d=Ae(l.model,n);ts(a,e,d,n,i,o)},t.prototype.getHandleTransform=function(e,a,n){var i=Ae(a.axis.grid.model,a,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var o=Ba(a.axis,e,i);return{x:o[0],y:o[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,a,n,i){var o=n.axis,s=o.grid,l=o.getGlobalExtent(!0),u=Mr(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,v=[e.x,e.y];v[c]+=a[c],v[c]=Math.min(l[1],v[c]),v[c]=Math.max(l[0],v[c]);var f=(u[1]+u[0])/2,h=[f,f];h[c]=v[c];var d=[{verticalAlign:"middle"},{align:"center"}];return{x:v[0],y:v[1],rotation:e.rotation,cursorPoint:h,tooltipOption:d[c]}},t}(Ko);function Mr(r,t){var e={};return e[t.dim+"AxisIndex"]=t.index,r.getCartesian(e)}var ns={line:function(r,t,e){var a=es([t,e[0]],[t,e[1]],Dr(r));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(r,t,e){var a=Math.max(1,r.getBandWidth()),n=e[1]-e[0];return{type:"Rect",shape:rs([t-a/2,e[0]],[a,n],Dr(r))}}};function Dr(r){return r.dim==="x"?0:1}var is=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Te),tt=ht(),os=A;function ss(r,t,e){if(!ea.node){var a=t.getZr();tt(a).records||(tt(a).records={}),ls(a,t);var n=tt(a).records[r]||(tt(a).records[r]={});n.handler=e}}function ls(r,t){if(tt(r).initialized)return;tt(r).initialized=!0,e("click",j(wr,"click")),e("mousemove",j(wr,"mousemove")),e("globalout",cs);function e(a,n){r.on(a,function(i){var o=vs(t);os(tt(r).records,function(s){s&&n(s,i,o.dispatchAction)}),us(o.pendings,t)})}}function us(r,t){var e=r.showTip.length,a=r.hideTip.length,n;e?n=r.showTip[e-1]:a&&(n=r.hideTip[a-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function cs(r,t,e){r.handler("leave",null,e)}function wr(r,t,e,a){t.handler(r,e,a)}function vs(r){var t={showTip:[],hideTip:[]},e=function(a){var n=t[a.type];n?n.push(a):(a.dispatchAction=e,r.dispatchAction(a))};return{dispatchAction:e,pendings:t}}function Cr(r,t){if(!ea.node){var e=t.getZr(),a=(tt(e).records||{})[r];a&&(tt(e).records[r]=null)}}var hs=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,a,n){var i=a.getComponent("tooltip"),o=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";ss("axisPointer",n,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(e,a){Cr("axisPointer",a)},t.prototype.dispose=function(e,a){Cr("axisPointer",a)},t.type="axisPointer",t}(Ee);function fs(r,t){var e=[],a=r.seriesIndex,n;if(a==null||!(n=t.getSeriesByIndex(a)))return{point:[]};var i=n.getData(),o=Wn(i,r);if(o==null||o<0||V(o))return{point:[]};var s=i.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)e=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(r.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),v=c.dim,f=u.dim,h=v==="x"||v==="radius"?1:0,d=i.mapDimension(f),g=[];g[h]=i.get(d,o),g[1-h]=i.get(i.getCalculationInfo("stackResultDimension"),o),e=l.dataToPoint(g)||[]}else e=l.dataToPoint(i.getValues(G(l.dimensions,function(m){return i.mapDimension(m)}),o))||[];else if(s){var p=s.getBoundingRect().clone();p.applyTransform(s.transform),e=[p.x+p.width/2,p.y+p.height/2]}return{point:e,el:s}}var Lr=ht();function ds(r,t,e){var a=r.currTrigger,n=[r.x,r.y],i=r,o=r.dispatchAction||ut(e.dispatchAction,e),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){zt(n)&&(n=fs({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var l=zt(n),u=i.axesInfo,c=s.axesInfo,v=a==="leave"||zt(n),f={},h={},d={list:[],map:{}},g={showPointer:j(ps,h),showTooltip:j(ms,d)};A(s.coordSysMap,function(m,y){var x=l||m.containPoint(n);A(s.coordSysAxesInfo[y],function(_,M){var L=_.axis,D=bs(u,_);if(!v&&x&&(!u||D)){var I=D&&D.value;I==null&&!l&&(I=L.pointToData(n)),I!=null&&Ir(_,I,g,!1,f)}})});var p={};return A(c,function(m,y){var x=m.linkGroup;x&&!h[y]&&A(x.axesInfo,function(_,M){var L=h[M];if(_!==m&&L){var D=L.value;x.mapper&&(D=m.axis.scale.parse(x.mapper(D,Tr(_),Tr(m)))),p[m.key]=D}})}),A(p,function(m,y){Ir(c[y],m,g,!0,f)}),ys(h,c,f),xs(d,n,r,o),_s(c,o,e),f}}function Ir(r,t,e,a,n){var i=r.axis;if(!(i.scale.isBlank()||!i.containData(t))){if(!r.involveSeries){e.showPointer(r,t);return}var o=gs(t,r),s=o.payloadBatch,l=o.snapToValue;s[0]&&n.seriesIndex==null&&H(n,s[0]),!a&&r.snap&&i.containData(l)&&l!=null&&(t=l),e.showPointer(r,t,s),e.showTooltip(r,o,l)}}function gs(r,t){var e=t.axis,a=e.dim,n=r,i=[],o=Number.MAX_VALUE,s=-1;return A(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(a),v,f;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(c,r,e);f=h.dataIndices,v=h.nestestValue}else{if(f=l.getData().indicesOfNearest(c[0],r,e.type==="category"?.5:null),!f.length)return;v=l.getData().get(c[0],f[0])}if(!(v==null||!isFinite(v))){var d=r-v,g=Math.abs(d);g<=o&&((g<o||d>=0&&s<0)&&(o=g,s=d,n=v,i.length=0),A(f,function(p){i.push({seriesIndex:l.seriesIndex,dataIndexInside:p,dataIndex:l.getData().getRawIndex(p)})}))}}),{payloadBatch:i,snapToValue:n}}function ps(r,t,e,a){r[t.key]={value:e,payloadBatch:a}}function ms(r,t,e,a){var n=e.payloadBatch,i=t.axis,o=i.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var l=t.coordSys.model,u=Ct(l),c=r.map[u];c||(c=r.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},r.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:a,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function ys(r,t,e){var a=e.axesInfo=[];A(t,function(n,i){var o=n.axisPointerModel.option,s=r[i];s?(!n.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!n.useHandle&&(o.status="hide"),o.status==="show"&&a.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:o.value})})}function xs(r,t,e,a){if(zt(t)||!r.list.length){a({type:"hideTip"});return}var n=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:r.list})}function _s(r,t,e){var a=e.getZr(),n="axisPointerLastHighlights",i=Lr(a)[n]||{},o=Lr(a)[n]={};A(r,function(u,c){var v=u.axisPointerModel.option;v.status==="show"&&u.triggerEmphasis&&A(v.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;o[h]=f})});var s=[],l=[];A(i,function(u,c){!o[c]&&l.push(u)}),A(o,function(u,c){!i[c]&&s.push(u)}),l.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function bs(r,t){for(var e=0;e<(r||[]).length;e++){var a=r[e];if(t.axis.dim===a.axisDim&&t.axis.model.componentIndex===a.axisIndex)return a}}function Tr(r){var t=r.axis.model,e={},a=e.axisDim=r.axis.dim;return e.axisIndex=e[a+"AxisIndex"]=t.componentIndex,e.axisName=e[a+"AxisName"]=t.name,e.axisId=e[a+"AxisId"]=t.id,e}function zt(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function As(r){Ea.registerAxisPointerClass("CartesianAxisPointer",as),r.registerComponentModel(is),r.registerComponentView(hs),r.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!V(e)&&(t.axisPointer.link=[e])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=ko(t,e)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ds)}function qs(r){Ke($o),Ke(As)}function Ss(r,t){var e=r.mapDimensionsAll("defaultedLabel"),a=e.length;if(a===1){var n=qe(r,t,e[0]);return n!=null?n+"":null}else if(a){for(var i=[],o=0;o<e.length;o++)i.push(qe(r,t,e[o]));return i.join(" ")}}function Ms(r,t){var e=r.mapDimensionsAll("defaultedLabel");if(!V(t))return t+"";for(var a=[],n=0;n<e.length;n++){var i=r.getDimensionIndex(e[n]);i>=0&&a.push(t[i])}return a.join(" ")}function Ga(r,t){return r.type===t}function Ds(r,t,e,a,n){var i=r.getArea(),o=i.x,s=i.y,l=i.width,u=i.height,c=e.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var v=new It({shape:{x:o,y:s,width:l,height:u}});return v}function ws(r,t,e){var a=r.getArea(),n=F(a.r0,1),i=F(a.r,1),o=new ke({shape:{cx:F(r.cx,1),cy:F(r.cy,1),r0:n,r:i,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});return o}function Cs(r,t,e,a,n){if(r){if(r.type==="polar")return ws(r);if(r.type==="cartesian2d")return Ds(r,t,e)}else return null;return null}var Ls={average:function(r){for(var t=0,e=0,a=0;a<r.length;a++)isNaN(r[a])||(t+=r[a],e++);return e===0?NaN:t/e},sum:function(r){for(var t=0,e=0;e<r.length;e++)t+=r[e]||0;return t},max:function(r){for(var t=-1/0,e=0;e<r.length;e++)r[e]>t&&(t=r[e]);return isFinite(t)?t:NaN},min:function(r){for(var t=1/0,e=0;e<r.length;e++)r[e]<t&&(t=r[e]);return isFinite(t)?t:NaN},minmax:function(r){for(var t=-1/0,e=-1/0,a=0;a<r.length;a++){var n=r[a],i=Math.abs(n);i>t&&(t=i,e=n)}return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},Is=function(r){return Math.round(r.length/2)};function Ts(r){return{seriesType:r,reset:function(t,e,a){var n=t.getData(),i=t.get("sampling"),o=t.coordinateSystem,s=n.count();if(s>10&&o.type==="cartesian2d"&&i){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),v=a.getDevicePixelRatio(),f=Math.abs(c[1]-c[0])*(v||1),h=Math.round(s/f);if(isFinite(h)&&h>1){i==="lttb"&&t.setData(n.lttbDownSample(n.mapDimension(u.dim),1/h));var d=void 0;X(i)?d=Ls[i]:Z(i)&&(d=i),d&&t.setData(n.downSample(n.mapDimension(u.dim),1/h,d,Is))}}}}}var De=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(e,a){return ca(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,a,n){var i=this.coordinateSystem;if(i&&i.clampData){var o=i.clampData(e),s=i.dataToPoint(o);if(n)A(i.getAxes(),function(f,h){if(f.type==="category"&&a!=null){var d=f.getTicksCoords(),g=f.getTickModel().get("alignWithLabel"),p=o[h],m=a[h]==="x1"||a[h]==="y1";if(m&&!g&&(p+=1),d.length<2)return;if(d.length===2){s[h]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var y=void 0,x=void 0,_=1,M=0;M<d.length;M++){var L=d[M].coord,D=M===d.length-1?d[M-1].tickValue+_:d[M].tickValue;if(D===p){x=L;break}else if(D<p)y=L;else if(y!=null&&D>p){x=(L+y)/2;break}M===1&&(_=D-d[0].tickValue)}x==null&&(y?y&&(x=d[d.length-1].coord):x=d[0].coord),s[h]=f.toGlobalCoord(x)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),v=i.getBaseAxis().isHorizontal()?0:1;s[v]+=u+c/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ra);ra.registerClass(De);var Ps=function(r){R(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.getInitialData=function(){return ca(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>e&&(e=a),e},t.prototype.brushSelector=function(e,a,n){return n.rect(a.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=zn(De.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(De),Os=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),Pr=function(r){R(t,r);function t(e){var a=r.call(this,e)||this;return a.type="sausage",a}return t.prototype.getDefaultShape=function(){return new Os},t.prototype.buildPath=function(e,a){var n=a.cx,i=a.cy,o=Math.max(a.r0||0,0),s=Math.max(a.r,0),l=(s-o)*.5,u=o+l,c=a.startAngle,v=a.endAngle,f=a.clockwise,h=Math.PI*2,d=f?v-c<h:c-v<h;d||(c=v-(f?h:-h));var g=Math.cos(c),p=Math.sin(c),m=Math.cos(v),y=Math.sin(v);d?(e.moveTo(g*o+n,p*o+i),e.arc(g*u+n,p*u+i,l,-Math.PI+c,c,!f)):e.moveTo(g*s+n,p*s+i),e.arc(n,i,s,c,v,!f),e.arc(m*u+n,y*u+i,l,v-Math.PI*2,v-Math.PI,!f),o!==0&&e.arc(n,i,o,v,c,f)},t}(aa);function Es(r,t){t=t||{};var e=t.isRoundCap;return function(a,n,i){var o=n.position;if(!o||o instanceof Array)return je(a,n,i);var s=r(o),l=n.distance!=null?n.distance:5,u=this.shape,c=u.cx,v=u.cy,f=u.r,h=u.r0,d=(f+h)/2,g=u.startAngle,p=u.endAngle,m=(g+p)/2,y=e?Math.abs(f-h)/2:0,x=Math.cos,_=Math.sin,M=c+f*x(g),L=v+f*_(g),D="left",I="top";switch(s){case"startArc":M=c+(h-l)*x(m),L=v+(h-l)*_(m),D="center",I="top";break;case"insideStartArc":M=c+(h+l)*x(m),L=v+(h+l)*_(m),D="center",I="bottom";break;case"startAngle":M=c+d*x(g)+Rt(g,l+y,!1),L=v+d*_(g)+Bt(g,l+y,!1),D="right",I="middle";break;case"insideStartAngle":M=c+d*x(g)+Rt(g,-l+y,!1),L=v+d*_(g)+Bt(g,-l+y,!1),D="left",I="middle";break;case"middle":M=c+d*x(m),L=v+d*_(m),D="center",I="middle";break;case"endArc":M=c+(f+l)*x(m),L=v+(f+l)*_(m),D="center",I="bottom";break;case"insideEndArc":M=c+(f-l)*x(m),L=v+(f-l)*_(m),D="center",I="top";break;case"endAngle":M=c+d*x(p)+Rt(p,l+y,!0),L=v+d*_(p)+Bt(p,l+y,!0),D="left",I="middle";break;case"insideEndAngle":M=c+d*x(p)+Rt(p,-l+y,!0),L=v+d*_(p)+Bt(p,-l+y,!0),D="right",I="middle";break;default:return je(a,n,i)}return a=a||{},a.x=M,a.y=L,a.align=D,a.verticalAlign=I,a}}function ks(r,t,e,a){if($t(a)){r.setTextConfig({rotation:a});return}else if(V(t)){r.setTextConfig({rotation:0});return}var n=r.shape,i=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,s=(i+o)/2,l,u=e(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=o;break;default:r.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),r.setTextConfig({rotation:c})}function Rt(r,t,e){return t*Math.sin(r)*(e?-1:1)}function Bt(r,t,e){return t*Math.cos(r)*(e?1:-1)}function Ns(r,t,e){var a=r.get("borderRadius");if(a==null)return e?{cornerRadius:0}:null;V(a)||(a=[a,a,a,a]);var n=Math.abs(t.r||0-t.r0||0);return{cornerRadius:G(a,function(i){return ge(i,n)})}}var ve=Math.max,he=Math.min;function Rs(r,t){var e=r.getArea&&r.getArea();if(Ga(r,"cartesian2d")){var a=r.getBaseAxis();if(a.type!=="category"||!a.onBand){var n=t.getLayout("bandWidth");a.isHorizontal()?(e.x-=n,e.width+=n*2):(e.y-=n,e.height+=n*2)}}return e}var Bs=function(r){R(t,r);function t(){var e=r.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return t.prototype.render=function(e,a,n,i){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var o=e.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,a,n):this._renderNormal(e,a,n,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,a){this._progressiveEls=[],this._incrementalRenderLarge(e,a)},t.prototype.eachRendered=function(e){Hn(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var a=e.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},t.prototype._renderNormal=function(e,a,n,i){var o=this.group,s=e.getData(),l=this._data,u=e.coordinateSystem,c=u.getBaseAxis(),v;u.type==="cartesian2d"?v=c.isHorizontal():u.type==="polar"&&(v=c.dim==="angle");var f=e.isAnimationEnabled()?e:null,h=Gs(e,u);h&&this._enableRealtimeSort(h,s,n);var d=e.get("clip",!0)||h,g=Rs(u,s);o.removeClipPath();var p=e.get("roundCap",!0),m=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),x=y.get("borderRadius")||0,_=[],M=this._backgroundEls,L=i&&i.isInitSort,D=i&&i.type==="changeAxisOrder";function I(b){var C=Gt[u.type](s,b),S=Ys(u,v,C);return S.useStyle(y.getItemStyle()),u.type==="cartesian2d"?S.setShape("r",x):S.setShape("cornerRadius",x),_[b]=S,S}s.diff(l).add(function(b){var C=s.getItemModel(b),S=Gt[u.type](s,b,C);if(m&&I(b),!(!s.hasValue(b)||!Rr[u.type](S))){var E=!1;d&&(E=Or[u.type](g,S));var T=Er[u.type](e,s,b,S,v,f,c.model,!1,p);h&&(T.forceLabelAnimation=!0),Br(T,s,b,C,S,e,v,u.type==="polar"),L?T.attr({shape:S}):h?kr(h,f,T,S,b,v,!1,!1):Ut(T,{shape:S},e,b),s.setItemGraphicEl(b,T),o.add(T),T.ignore=E}}).update(function(b,C){var S=s.getItemModel(b),E=Gt[u.type](s,b,S);if(m){var T=void 0;M.length===0?T=I(C):(T=M[C],T.useStyle(y.getItemStyle()),u.type==="cartesian2d"?T.setShape("r",x):T.setShape("cornerRadius",x),_[b]=T);var B=Gt[u.type](s,b),W=Va(v,B,u);vt(T,{shape:W},f,b)}var O=l.getItemGraphicEl(C);if(!s.hasValue(b)||!Rr[u.type](E)){o.remove(O);return}var k=!1;if(d&&(k=Or[u.type](g,E),k&&o.remove(O)),O?Zn(O):O=Er[u.type](e,s,b,E,v,f,c.model,!!O,p),h&&(O.forceLabelAnimation=!0),D){var N=O.getTextContent();if(N){var z=Yn(N);z.prevValue!=null&&(z.prevValue=z.value)}}else Br(O,s,b,S,E,e,v,u.type==="polar");L?O.attr({shape:E}):h?kr(h,f,O,E,b,v,!0,D):vt(O,{shape:E},e,b,null),s.setItemGraphicEl(b,O),O.ignore=k,o.add(O)}).remove(function(b){var C=l.getItemGraphicEl(b);C&&Je(C,e,b)}).execute();var P=this._backgroundGroup||(this._backgroundGroup=new Dt);P.removeAll();for(var w=0;w<_.length;++w)P.add(_[w]);o.add(P),this._backgroundEls=_,this._data=s},t.prototype._renderLarge=function(e,a,n){this._clear(),Fr(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,a){this._removeBackground(),Fr(a,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var a=e.get("clip",!0)&&Cs(e.coordinateSystem,!1,e),n=this.group;a?n.setClipPath(a):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,a,n){var i=this;if(a.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,e,n),this._isFirstFrame=!1;else{var s=function(l){var u=a.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){i._updateSortWithinSameData(a,s,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,a,n){var i=[];return e.each(e.mapDimension(a.dim),function(o,s){var l=n(s);l=l??NaN,i.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),i.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:G(i,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,a,n){for(var i=n.scale,o=e.mapDimension(n.dim),s=Number.MAX_VALUE,l=0,u=i.getOrdinalMeta().categories.length;l<u;++l){var c=e.rawIndexOf(o,i.getRawOrdinalNumber(l)),v=c<0?Number.MIN_VALUE:a(e.indexOfRawIndex(c));if(v>s)return!0;s=v}return!1},t.prototype._isOrderDifferentInView=function(e,a){for(var n=a.scale,i=n.getExtent(),o=Math.max(0,i[0]),s=Math.min(i[1],n.getOrdinalMeta().categories.length-1);o<=s;++o)if(e.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,a,n,i){if(this._isOrderChangedWithinSameData(e,a,n)){var o=this._dataSort(e,n,a);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,a,n){var i=a.baseAxis,o=this._dataSort(e,i,function(s){return e.get(e.mapDimension(a.otherAxis.dim),s)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:o})},t.prototype.remove=function(e,a){this._clear(this._model),this._removeOnRenderedListener(a)},t.prototype.dispose=function(e,a){this._removeOnRenderedListener(a)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var a=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){Je(i,e,Lt(i).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Xn),Or={cartesian2d:function(r,t){var e=t.width<0?-1:1,a=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var n=r.x+r.width,i=r.y+r.height,o=ve(t.x,r.x),s=he(t.x+t.width,n),l=ve(t.y,r.y),u=he(t.y+t.height,i),c=s<o,v=u<l;return t.x=c&&o>n?s:o,t.y=v&&l>i?u:l,t.width=c?0:s-o,t.height=v?0:u-l,e<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),c||v},polar:function(r,t){var e=t.r0<=t.r?1:-1;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}var n=he(t.r,r.r),i=ve(t.r0,r.r0);t.r=n,t.r0=i;var o=n-i<0;if(e<0){var a=t.r;t.r=t.r0,t.r0=a}return o}},Er={cartesian2d:function(r,t,e,a,n,i,o,s,l){var u=new It({shape:H({},a),z2:1});if(u.__dataIndex=e,u.name="item",i){var c=u.shape,v=n?"height":"width";c[v]=0}return u},polar:function(r,t,e,a,n,i,o,s,l){var u=!n&&l?Pr:ke,c=new u({shape:a,z2:1});c.name="item";var v=Fa(n);if(c.calculateTextPosition=Es(v,{isRoundCap:u===Pr}),i){var f=c.shape,h=n?"r":"endAngle",d={};f[h]=n?a.r0:a.startAngle,d[h]=a[h],(s?vt:Ut)(c,{shape:d},i)}return c}};function Gs(r,t){var e=r.get("realtimeSort",!0),a=t.getBaseAxis();if(e&&a.type==="category"&&t.type==="cartesian2d")return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function kr(r,t,e,a,n,i,o,s){var l,u;i?(u={x:a.x,width:a.width},l={y:a.y,height:a.height}):(u={y:a.y,height:a.height},l={x:a.x,width:a.width}),s||(o?vt:Ut)(e,{shape:l},t,n,null);var c=t?r.baseAxis.model:null;(o?vt:Ut)(e,{shape:u},c,n)}function Nr(r,t){for(var e=0;e<t.length;e++)if(!isFinite(r[t[e]]))return!0;return!1}var Fs=["x","y","width","height"],Vs=["cx","cy","r","startAngle","endAngle"],Rr={cartesian2d:function(r){return!Nr(r,Fs)},polar:function(r){return!Nr(r,Vs)}},Gt={cartesian2d:function(r,t,e){var a=r.getItemLayout(t),n=e?zs(e,a):0,i=a.width>0?1:-1,o=a.height>0?1:-1;return{x:a.x+i*n/2,y:a.y+o*n/2,width:a.width-i*n,height:a.height-o*n}},polar:function(r,t,e){var a=r.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function Ws(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function Fa(r){return function(t){var e=t?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+e;default:return a}}}(r)}function Br(r,t,e,a,n,i,o,s){var l=t.getItemVisual(e,"style");if(s){if(!i.get("roundCap")){var c=r.shape,v=Ns(a.getModel("itemStyle"),c,!0);H(c,v),r.setShape(c)}}else{var u=a.get(["itemStyle","borderRadius"])||0;r.setShape("r",u)}r.useStyle(l);var f=a.getShallow("cursor");f&&r.attr("cursor",f);var h=s?o?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":o?n.height>=0?"bottom":"top":n.width>=0?"right":"left",d=Un(a);$n(r,d,{labelFetcher:i,labelDataIndex:e,defaultText:Ss(i.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var g=r.getTextContent();if(s&&g){var p=a.get(["label","position"]);r.textConfig.inside=p==="middle"?!0:null,ks(r,p==="outside"?h:p,Fa(o),a.get(["label","rotate"]))}Kn(g,d,i.getRawValue(e),function(y){return Ms(t,y)});var m=a.getModel(["emphasis"]);qn(r,m.get("focus"),m.get("blurScope"),m.get("disabled")),jn(r,a),Ws(n)&&(r.style.fill="none",r.style.stroke="none",A(r.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function zs(r,t){var e=r.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var a=r.get(["itemStyle","borderWidth"])||0,n=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,n,i)}var Hs=function(){function r(){}return r}(),Gr=function(r){R(t,r);function t(e){var a=r.call(this,e)||this;return a.type="largeBar",a}return t.prototype.getDefaultShape=function(){return new Hs},t.prototype.buildPath=function(e,a){for(var n=a.points,i=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<n.length;c+=3)l[i]=u,l[o]=n[c+2],s[i]=n[c+i],s[o]=n[c+o],e.rect(s[0],s[1],l[0],l[1])},t}(aa);function Fr(r,t,e,a){var n=r.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,o=n.getLayout("largeDataIndices"),s=n.getLayout("size"),l=r.getModel("backgroundStyle"),u=n.getLayout("largeBackgroundPoints");if(u){var c=new Gr({shape:{points:u},incremental:!!a,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),e&&e.push(c)}var v=new Gr({shape:{points:n.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});v.baseDimIdx=i,v.largeDataIndices=o,v.barWidth=s,t.add(v),v.useStyle(n.getVisual("style")),Lt(v).seriesIndex=r.seriesIndex,r.get("silent")||(v.on("mousedown",Vr),v.on("mousemove",Vr)),e&&e.push(v)}var Vr=Jn(function(r){var t=this,e=Zs(t,r.offsetX,r.offsetY);Lt(t).dataIndex=e>=0?e:null},30,!1);function Zs(r,t,e){for(var a=r.baseDimIdx,n=1-a,i=r.shape.points,o=r.largeDataIndices,s=[],l=[],u=r.barWidth,c=0,v=i.length/3;c<v;c++){var f=c*3;if(l[a]=u,l[n]=i[f+2],s[a]=i[f+a],s[n]=i[f+n],l[n]<0&&(s[n]+=l[n],l[n]=-l[n]),t>=s[0]&&t<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return o[c]}return-1}function Va(r,t,e){if(Ga(e,"cartesian2d")){var a=t,n=e.getArea();return{x:r?a.x:n.x,y:r?n.y:a.y,width:r?a.width:n.width,height:r?n.height:a.height}}else{var n=e.getArea(),i=t;return{cx:n.cx,cy:n.cy,r0:r?n.r0:i.r0,r:r?n.r:i.r,startAngle:r?i.startAngle:0,endAngle:r?i.endAngle:Math.PI*2}}}function Ys(r,t,e){var a=r.type==="polar"?ke:It;return new a({shape:Va(t,e,r),silent:!0,z2:0})}function js(r){r.registerChartView(Bs),r.registerSeriesModel(Ps),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,j(ki,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Ni("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Ts("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var a=t.componentType||"series";e.eachComponent({mainType:a,query:t},function(n){t.sortInfo&&n.axis.setCategorySortInfo(t.sortInfo)})})}export{Qn as D,ci as S,Ks as a,_a as b,Cr as c,Ns as d,ji as e,fs as f,Qo as g,po as h,As as i,vi as j,qs as k,js as l,go as p,ss as r,$s as s,Us as u};
