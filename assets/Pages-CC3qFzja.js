import{q,s as T,r as s,j as e,b7 as j,b8 as V,b9 as X,T as h,X as $,a5 as i,ba as Q,I as R,bb as H,bc as J,bd as K,be as U,bf as W,bg as Y,bh as Z}from"./index-Bl_pZCeN.js";import{ba as ee,b7 as te}from"./Layout-Cr3VXxUG.js";import{E as k}from"./Table-CeY_MlRZ.js";import{F as d,a as ae}from"./Filter-Lrk5w5En.js";import{f as re,e as ie}from"./Format-Cdb_63wG.js";import{v as ne,w as se,x as C}from"./index-FpgqAsqH.js";import{e as oe}from"./export-CuSBNYV7.js";import{F as o}from"./index-CEfktzSB.js";import{T as u}from"./index-Cil4O1hR.js";import{B as l}from"./TextArea-BanZLPmh.js";import{M as S}from"./index-B65SxrxW.js";import{I as w}from"./index-_oEg5XM8.js";import{T as le}from"./index-DjArs4z8.js";import"./index-CZycZjMr.js";import"./index-k6j_HrSw.js";import"./index-Ch5hctbl.js";import"./row-BAzrWk1M.js";import"./index-Bev9D8vS.js";import"./Overflow-B2U5bHyH.js";import"./PurePanel-ryEM3orR.js";import"./useVariants-B1zc-sRz.js";import"./index-Bh9zOY6B.js";import"./useLocale-BY4459aG.js";import"./CheckOutlined-BPHqeFCx.js";import"./SearchOutlined-Bm-v0bMy.js";import"./context-CeT_YlOn.js";import"./index-DK56_scK.js";import"./EllipsisOutlined-Dv0U7LQh.js";import"./Dropdown-BgYRO9jp.js";import"./Table-CU9gFey1.js";import"./styleChecker-Ck8JMnEb.js";import"./iconUtil-CW9oYwre.js";import"./index-BoV9MRuN.js";import"./index-Cg5YuCgZ.js";import"./index-DnInuHaQ.js";import"./index-CnsZvPuK.js";import"./index-D2qZIhzW.js";import"./index-uqfG7IHM.js";import"./html2canvas.esm-CBrSDip1.js";import"./jspdf.es.min-B8LO2qQX.js";const Ue=()=>{const r=q(),P=ee({query:"(max-width: 576px)"}),[g]=o.useForm(),[m]=o.useForm(),{pages:n,loading:x}=T(t=>t.pages),{groupPages:f,loading:p}=T(t=>t.groupPages),a=f==null?void 0:f.newData,[N,b]=s.useState(!1),[D,y]=s.useState(!1),[A,I]=s.useState(localStorage.getItem("drag")==="true"),F=s.useMemo(()=>{var t;return(t=n==null?void 0:n.newData)==null?void 0:t.map(c=>({...c,key:c._id}))},[n]),E=s.useMemo(()=>a==null?void 0:a.map(t=>({...t,key:t._id})),[a]),v=[{title:"Tên trang",dataIndex:"name",width:"15%",editable:!0,...d({dataIndex:"name",handleTableChange:({searchText:t,searchedColumn:c})=>{t?i(r,Z({[c]:t})):r(j({page:1,limit:localStorage.getItem("pageSize")||10}))}})},{title:"Link Trang",dataIndex:"slug",width:"15%",editable:!1,...d({dataIndex:"slug"}),render:t=>e.jsx(e.Fragment,{children:e.jsx(u.Paragraph,{className:"!mb-0",ellipsis:{suffix:""},copyable:{text:`/${t}`},children:t})})},{title:"Tiêu đề trang",dataIndex:"title",width:"15%",editable:!0,...d({dataIndex:"title"})},{title:"Mô tả",dataIndex:"description",width:"15%",editable:!0,...d({dataIndex:"description"})},{title:"Từ khóa",dataIndex:"keywords",width:"15%",type:"tag",editable:!0,render:t=>e.jsx(re,{keywords:t})},{title:"Nhóm",dataIndex:"group",width:"8%",type:"select",editable:!0,optionSelect:Array.isArray(a)&&(a==null?void 0:a.length)>0?a==null?void 0:a.map(t=>({label:t.group,value:t._id})):[],render:t=>t&&a&&Array.isArray(a)&&(a==null?void 0:a.length)>0?ie(t,a,"group"):null,...Array.isArray(a)&&(a==null?void 0:a.length)>0?ae("group",a==null?void 0:a.map(t=>({text:t.group,value:t._id}))):{}}],G=[{title:"Tên nhóm",dataIndex:"group",width:"60%",type:"text",editable:!0,...d({dataIndex:"group"})}],M=t=>{i(r,H(t),()=>{b(!1),g.resetFields()})},B=t=>{i(r,J(t))},z=t=>{i(r,K(t))},L=t=>{i(r,U(t),()=>{y(!1),m.resetFields()})},_=t=>{i(r,W(t))},O=t=>{i(r,Y(t))};return s.useEffect(()=>{x&&r(j({page:1,limit:localStorage.getItem("pageSize")||10}))},[]),s.useEffect(()=>{p===!0&&r(V())},[]),e.jsxs(te,{title:"Bài viết",header:"BÀI VIẾT",button:e.jsxs(e.Fragment,{children:[A?e.jsx(l,{onClick:()=>{I(!1),localStorage.setItem("drag","false")},children:e.jsx(u,{children:"Tắt sắp xếp"})}):e.jsx(l,{type:"primary",onClick:()=>{I(!0),localStorage.setItem("drag","true")},children:"Bật sắp xếp"}),e.jsx(l,{type:"primary",onClick:()=>y(!0),children:"Thêm nhóm"}),e.jsx(l,{type:"primary",onClick:()=>b(!0),children:"Thêm trang"}),e.jsx(l,{onClick:()=>oe(F,"Pages.xlsx"),type:"primary",children:"Xuất file Excel"})]}),children:[e.jsx(k,{dragMode:A,Api:j,ApiPut:X,total:n==null?void 0:n.totalItems,loading:x,data:F,columns:v,onSave:B,onDelete:z,width:"12%",button:t=>e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Xem trang",children:e.jsx($,{to:t.slug==="trang-chu"?"/":`/${t.slug}`,target:"_blank",children:e.jsx(ne,{size:22,color:"#006aff"})})}),e.jsx(h,{title:"Sao chép trang",children:e.jsx(u,{onClick:()=>i(r,Q(t._id)),children:e.jsx(se,{size:22,color:"#55ff00"})})}),P?e.jsx(e.Fragment,{children:e.jsx(h,{title:"Chỉnh sửa trang",children:e.jsx(u.Link,{onClick:()=>R("","Bạn không thể truy cập trang này!","Vui lòng sử dụng máy tính để trãi nghiệm tốt nhất!"),children:e.jsx(C,{size:22,color:"rgb(255 127 0)"})})})}):e.jsx(h,{title:"Chỉnh sửa trang",children:e.jsx("a",{href:`/admin/page/${t.slug}`,children:e.jsx(C,{size:22,color:"rgb(255 127 0)"})})})]})}),e.jsx(S,{title:"Thêm trang",centered:!0,open:N,onOk:()=>g.submit(),onCancel:()=>b(!1),confirmLoading:x,width:500,children:e.jsx(o,{form:g,name:"customForm",layout:"vertical",onFinish:M,children:e.jsx(o.Item,{label:"Tên trang",className:"mb-2",name:"name",rules:[{required:!0,message:"Vui lòng nhập tên trang!"}],children:e.jsx(w,{className:"mb-2",placeholder:"Nhập tên trang"})})})}),e.jsx(S,{centered:!0,open:D,confirmLoading:p,onOk:()=>m.submit(),onCancel:()=>y(!1),footer:null,width:600,children:e.jsx(le,{centered:!0,items:[{label:"Thêm nhóm",key:"1",children:e.jsx(e.Fragment,{children:e.jsxs(o,{form:m,name:"customForm",layout:"vertical",onFinish:L,children:[e.jsx(o.Item,{className:"mb-3",name:"group",label:"Tên nhóm",rules:[{required:!0,message:"Nhập tên nhóm!"}],children:e.jsx(w,{placeholder:"Nhập nhóm"})}),e.jsx(l,{type:"primary",loading:p,onClick:()=>m.submit(),className:"flex float-end",children:"Thêm nhóm"})]})})},{label:"Chỉnh sửa nhóm",key:"2",children:e.jsx(e.Fragment,{children:e.jsx(k,{loading:p,data:E,isScroll:!1,columns:G,width:"10%",onSave:_,onDelete:O})})}]})})]})};export{Ue as default};
